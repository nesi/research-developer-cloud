{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Research Developer Cloud","text":"<p>Cloud-native services</p> <p>Use NeSI's cloud infrastructure and on-demand services to develop and manage custom, interactive solutions. </p> <p>Programmable infrastructure</p> <p>Apply DevOps practices enabled by Infrastructure as Code (IaC) to automate, measure, collaborate, and learn. </p> <p>Partnership-led approaches</p> <p>Partner with NeSI's DevOps specialists to build a platform or tools that can benefit your research community. </p> <p>NeSI is building a research cloud computing platform for easier and more adaptable collaboration around research data.</p> <p>Research teams can use our Research Developer Cloud to develop novel solutions that enable research.</p> <p>Get started</p><p>Scroll down to see how to apply for early access </p> <p>Talk to us</p><p>If you want to chat with us about how our platform can support your research </p>"},{"location":"#get-started","title":"Get started","text":"<p>We invite you to apply for early access if you are:</p> <ul> <li> <p>Developing complex research software and data solutions that support custom workflows and a range of user experiences</p> </li> <li> <p>Seeking a locally owned and sovereign cloud computing platform to build and develop tools that can support research data collaborations </p> </li> <li> <p>Interested in partnering with NeSI to apply DevOps approaches and best practice to your research activities</p> </li> </ul> <p>Apply for early access</p>"},{"location":"summary/","title":"Summary","text":"<ul> <li>Home</li> <li>User Guides</li> <li>Security</li> <li>*/</li> </ul>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/","title":"Essential building blocks v0.9 - 20230918 NZRSE23","text":""},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#overview","title":"Overview","text":"<p>This is our first release of essential building blocks for cloud native services. Please see The Research Developer Cloud page for more information on how to gain access.</p>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#services-and-features","title":"Services and features","text":""},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#compute","title":"Compute","text":"<p>On-demand instances available for computational needs</p> <ul> <li>Launch and manage compute instances</li> <li>Wide range of scale and three different flavours avaialble for tailored needs</li> </ul>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#volume-storage","title":"Volume storage","text":"<p>Highly scalable persistant storage options</p> <ul> <li>Mount volume storage to any compute instance</li> <li>Option to encrypt the volume for added security</li> </ul>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#network","title":"Network","text":"<p>Network management for your solution, built on high speed REANNZ network</p> <ul> <li>Set up and manage network configurations</li> <li>Pool of public IP addresses available for use</li> </ul>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#images","title":"Images","text":"<p>Image repository for managing images that can be used with compute</p> <ul> <li>Common operating systems are available and maintained by NeSI</li> <li>Upload and manage custom images for your project or wider community</li> </ul>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#identity","title":"Identity","text":"<p>Identity management service</p> <ul> <li>Create and manage application credentials</li> </ul>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#other","title":"Other","text":"<ul> <li>Programmable environment with API based access to all of the above features</li> <li>Dashboard for user friendly GUI based interactions</li> <li>Utilising OpenStack technology to provide interoperability</li> </ul>"},{"location":"release-notes/20230918-essential-building-blocks-v0.9/#known-issues","title":"Known issues","text":"<ul> <li>Custom image upload feature is currently not working on the dashboard</li> </ul>"},{"location":"release-notes/20231205-research-developer-cloud-updates-and-fixes-v0.10/","title":"Research Developer Cloud updates and fixes v0.10 - 20231205","text":""},{"location":"release-notes/20231205-research-developer-cloud-updates-and-fixes-v0.10/#cloud-services","title":"Cloud services","text":""},{"location":"release-notes/20231205-research-developer-cloud-updates-and-fixes-v0.10/#images","title":"Images","text":"<ul> <li>UPDATE: Standard images provided are now regularly patched and updated via behind the scenes automated build process</li> <li>FIX: Uploading custom images via the dashboard is now fixed</li> </ul>"},{"location":"release-notes/20231205-research-developer-cloud-updates-and-fixes-v0.10/#block-storage","title":"Block storage","text":"<ul> <li>FIX: Issues with detaching volumes has now been fixed</li> </ul>"},{"location":"release-notes/20231205-research-developer-cloud-updates-and-fixes-v0.10/#infrastructure","title":"Infrastructure","text":"<ul> <li>Yoga<sup>1</sup> containers have been updated to the latest patched versions within the release, which fixed bugs and patched security vulnerabilities</li> <li>Significant improvements have been made on our infrastructure testing mechanism to enable more automated processes of testing and improved resilience and visibility to incidents</li> </ul>"},{"location":"release-notes/20231205-research-developer-cloud-updates-and-fixes-v0.10/#other-updates","title":"Other updates","text":"<ul> <li>Our security documentations have been updated. See here for more details</li> <li>Proof of concept usage of GPU accelerated compute flavors. We\u2019ve worked with partners at AgResearch to test a Windows server instance supporting a GPU accelerated Proteomics workload, using the [flavor name], which includes passthrough of 2x NVIDIA A40 GPUs into the instance</li> <li>Prototyped a managed identity solution with KeyCloak</li> </ul> <p>We will continue to improve our services and we are currently testing object storage functionalities before releasing. The Research Developer Cloud has SLA of 9-5 weekdays, with best effort response time. Our team will be away during the Christmas and New Years holidays, so we may not respond to your requests on the last week of December and the first week of January. Have a wonderful holiday!</p> <p></p> <p><sup>1 Yoga is the version of OpenStack our services are on. OpenStack is an open source cloud computing infrastructure software project adopted by many different research institutions and public cloud providers.</sup></p>"},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/","title":"Research Developer Cloud updates v0.11 - 20240205","text":""},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#cloud-services","title":"Cloud services","text":""},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#images","title":"Images","text":"<ul> <li>UPDATE: Rocky<sup>1</sup> images are now available for tenants to use on VMs</li> </ul>"},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#object-storage","title":"Object Storage","text":"<ul> <li>UPDATE: Now operational and is in a user-testing phase. Please reach out if you would like some quota and help getting started! Early documentation can be found here: Create and Manage Object Storage - Research Developer Cloud </li> </ul>"},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#blueprints","title":"Blueprints","text":"<p>On top of ongoing development of our Cloud Services, we are now working towards building Blueprints for useful patterns that can support your research applications and pipelines. If you\u2019ve a specific use case in mind, let us know.</p>"},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#kubernetes","title":"Kubernetes","text":"<p>We are starting out with K8s (Kubernetes, a container orchestration system). Deploying your applications on top of K8s can support gains in scalability, robustness, portability, and more. Starting with the basics, the following blueprint GitHub repositories support setting up a K8s management cluster and a workload cluster.</p> <ul> <li>Management Cluster: GitHub - nesi/nesi.rdc.kind-bootstrap-capi</li> <li>Workload Cluster: GitHub - nesi/nesi.rdc.capi.workload</li> </ul> <p>More guides around when and how to use K8s with your application are under development. Watch this space!</p>"},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#infrastructure","title":"Infrastructure","text":""},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#platform-testing","title":"Platform testing","text":"<p>A full suite of CI/CD functional testing is now running hourly 24 x 7 against our core Research Developer Cloud infrastructure, supporting early identification of any emerging problems or incidents.</p>"},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#infrastructure-observability","title":"Infrastructure observability","text":"<p>There is a common need to understand utilisation of resources for any cloud use case. We are in the process of creating a per tenant view of utilisation, which will be delivered via dashboards (using Grafana). We are prototyping this through our collaboration with AgResearch, to inform options towards more visibility for regular research developer cloud tenants in the future. Let us know of your needs for infrastructure observability.</p>"},{"location":"release-notes/20240205-research-developer-cloud-updates-v0.11/#platform-maintenance","title":"Platform maintenance","text":"<p>We are almost finished upgrading the operating systems of all hosts in our Ceph-based storage and OpenStack-based hosting platform (in both data centers) to Rocky Linux 9.2 from CentOS Stream 8. This upgrade improves maintainability, supportability, security, performance, and hardware compatibility. This is a significant upgrade and is in preparation for our next regular update to the newest versions of core OpenStack services, tentatively scheduled before mid-year.</p> <p></p> <p><sup>1 Rocky Linux is an open-source enterprise operating system designed to be 100% bug-for-bug compatible with Red Hat Enterprise Linux.</sup></p>"},{"location":"release-notes/summary/","title":"Summary","text":"<ul> <li>Research Developer Cloud updates v0.11 - 20240205</li> <li>Research Developer Cloud updates and fixes v0.10 - 20231205</li> <li>Essential building blocks v0.9 - 20230918 NZRSE23</li> <li>*/</li> </ul>"},{"location":"security/","title":"Protect and Manage Security","text":"<p>NeSI is striving to foster security capability within the research community through increased visibility and collaboration. We will be sharing our efforts and collecting your feedback here.</p> <ul> <li> <p>NeSI's Security Policy</p> </li> <li> <p>Security Practices at NeSI</p> </li> <li> <p>Shared Responsibility Model</p> </li> </ul>"},{"location":"security/security-policy/","title":"Security Policy","text":""},{"location":"security/security-policy/#nesi-security-policy","title":"NeSI Security Policy","text":"<p>Note</p> <p>NeSI has published a new security policy NeSI Security Policy</p>"},{"location":"security/security-policy/#_1","title":"Security Policy","text":""},{"location":"security/shared-responsibility/","title":"Shared Responsibility - What is it?","text":""},{"location":"security/shared-responsibility/#establishing-a-shared-responsibility-model","title":"Establishing a Shared Responsibility Model","text":"<p>The way we work together on this platform is captured within a Shared Responsibility model. Shared Responsibility emphasises the kaitiakitanga, the collaboration, and the coordination essential to its maintenance and to protect the research communities it enables. </p> <p>This shared way of working is becoming more common, yet there is plenty to learn. NeSI is openly exploring how we can bring greater value to, or reduce the risk of your research efforts, and of how best to refine the attributes of this sovereign platform and how we carry our shared responsibilities. We\u2019ll share our experiences and insights, and welcome you to share yours.</p>"},{"location":"security/shared-responsibility/#_1","title":"Shared Responsibility Model","text":""},{"location":"security/summary/","title":"Summary","text":"<ul> <li>Security: Protect and Manage</li> <li>Security Policy</li> <li>Security Practices</li> <li>Shared Responsibility</li> <li>General Terms</li> <li>*/</li> </ul>"},{"location":"security/terms/","title":"Terms","text":""},{"location":"security/terms/#terms","title":"Terms","text":"<p>Adding Terms Soon!</p>"},{"location":"security/security-practices/","title":"Security Practices","text":"<p>We are sharing what NeSI and our community members have learned and want to make available.</p> <ul> <li>Building Effective and Efficient Research Security Programs</li> </ul>"},{"location":"security/security-practices/building-eff-rsp/","title":"Building Effective and Efficient Research Security Programs","text":""},{"location":"security/security-practices/building-eff-rsp/#geting-started","title":"Geting Started","text":"<p>A broad approach to building effective and research security programs</p> <p><code>5 Ws and an H</code> Identifing the answers to 5 simple questions helps scope the engagement and resourcing</p> <p>When - Timing and length Where - Where will you make impact (indivduals, teams, services) Who - The audiance (researchers, staff, students) What - What you intend to impact with the engagement (capability, simplification, culture, policy) Why - Is there an external driver or internal improvement? How - The plan: getting executive support, marketing, training, consulting, measurement, reporting, closure.</p> <p></p> <p><code>Think Like a Researcher</code> We must find the balance between compulsory and optional. Researchers don't like being told that they must do something, so we need to build the story of why they are being asked to do this and then make it as easy as possible for them to comply.</p> <p>Understand the challenges they face on a day to day basis. Take the questions they ask as they begin and execute a project then create the map to the answers. It is very likely they are spread across teams, services, platforms, or even specific individuals. That is a massive barrier to a someone solving their own problems, which researchers are very good at! They aren't good at intuiting the solution you think they should choose unless they know it's an option.</p> <p></p> <p>Align services as answers to questions in single platform, service, or space. Map activities to the research lifecycle and how each one can be accessed, leveraged, or simply requested to help them achieve and maintain compliance</p> <p></p> <p><code>Telling the Story</code></p> <p>You need executive buy in and support prior to rolling these programs out to researchers. Researchers will ask their deans, department heads, and DVCRs directly <code>Why?</code>, and they need to be able to answer it concisely and completely. Provide metrics, statistics, and easy to share material to make those discussions easier. Here are some examples</p> <p></p> <p><code>Resources</code></p> <p>2018 IT Risk Report, Netwrix Backblaze Hard Drive Stats Q3 2023 Gov UK Education Cybersecurity breaches Data Breach Numbers</p>"},{"location":"security/security-practices/building-eff-rsp/#_1","title":"Building Effective and Efficient Research Security Programs","text":""},{"location":"security/security-practices/summary/","title":"Summary","text":"<ul> <li>Security Practices</li> <li>Building Effective and Efficient Research Security Programs</li> <li>*/</li> </ul>"},{"location":"user-guides/","title":"Features","text":"<p>We want to partner with early access users to explore and build scalable approaches for harnessing cloud technologies and DevOps practices in computational research.</p> <p>Our platform's building blocks include:</p> <code>Compute</code> <p>Virtual machines optimised for high-performance computational needs. Multiple flavours of CPU and GPU resources to support a range of compute and memory requirements.</p> <p>\u2192 Get started with our Compute User Guides</p> <code>Images</code> <p>Tailored operating systems to meet your research computing and data needs. Ready-to-use options available, as well as capability to create custom images and contribute to a pool of community-developed images.</p> <p>\u2192 Get started with our Images User Guides</p> <code>Storage</code> <p>Scalable storage space that can be dynamically mounted to your Compute instances. Options to encrypt storage volumes for added security.</p> <p>\u2192 Get started with our Storage User Guides</p> <code>Networks</code> <p>Fast, reliable, and secure connectivity built on the REANNZ national network. Options for network customisation and security groups.</p> <p>\u2192 Get started with our Networks User Guides</p> <code>Identity</code> <p>Identity management services to create application credentials and control access to projects.</p> <p>\u2192 Get started with our Identity User Guides</p> <code>Object Storage</code> <p>Openstack S3 compatiable object storage.</p> <p>\u2192 Get started with our Object Storage User Guides</p> <code>Application Programming Interface (API)</code> All services are programmable via a public API to enable repeatable definition of infrastructure through software code."},{"location":"user-guides/summary/","title":"Summary","text":"<ul> <li>User Guides</li> <li>Compute: Create and Manage</li> <li>Images: Upload and Manage</li> <li>Volumes: Create and Manage</li> <li>Networks: Create and Manage</li> <li>Identity: Create and Manage</li> <li>Keypairs: Create and Manage</li> <li>Object Storage: Create and Manage</li> <li>Set up your CLI environment</li> <li>*/</li> </ul>"},{"location":"user-guides/create-and-manage-identity/","title":"Create and Manage identity","text":"<p><code>Application Credentials</code> help you to avoid the practice of embedding user account credentials in configuration files. Instead, the user creates an Application Credential that receives delegated access to a single project and has its own distinct secret. The user can also limit the delegated privileges to a single role in that project. This allows you to adopt the principle of least privilege, where the authenticated service only gains access to the one project and role that it needs to function, rather than all of them.</p> <p>This approach allows you to consume an API with revealing your user credentials, and lets applications authenticate to Keystone without requiring embedded user credentials.</p> <p>Within FlexiHPC you are able to mange <code>Application Credentials</code> from the dashboard and/or the CLI.</p> <ul> <li> <p>Creating and Managing Application Credentials from the dashboard</p> </li> <li> <p>Creating and Managing Application Credentials via CLI</p> </li> </ul> <p>Note</p> <p>The Application Credential is dependent on the user account that created it, so it will terminate if that account is ever deleted, or loses access to the relevant role.</p>"},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-via-cli/","title":"Creating and Managing Application Credentials via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-via-cli/#create-application-credential","title":"Create Application Credential","text":"<p>Running the below command will generate a new <code>Application Credential</code></p> <pre><code>openstack application credential create\n    [--secret &lt;secret&gt;]\n    [--role &lt;role&gt;]\n    [--expiration &lt;expiration&gt;]\n    [--description &lt;description&gt;]\n    [--unrestricted]\n    [--restricted]\n    [--access-rules &lt;access-rules&gt;]\n    &lt;name&gt;\n</code></pre> <code>--secret &lt;secret&gt;</code> Secret to use for authentication. If not provided, one will be generated <code>--role &lt;role&gt;</code> Roles to authorize (name or ID) (repeat option to set multiple values), if not provided this will default to same roles as the user that creates it <code>--expiration &lt;expiration&gt;</code> Sets an expiration date for the application credential, format of YYYY-mm-ddTHH:MM:SS, if not provided, the application credential will not expire. <code>--description &lt;description&gt;</code> Application credential description <code>--unrestricted</code> Enable application credential to create and delete other application credentials and trusts <p>Warning</p> <p>This is potentially dangerous behavior and is disabled by default</p> <code>--restricted</code> Prohibit application credential from creating and deleting other application credentials and trusts, this is enabled by default. <code>--access-rules &lt;access-rules&gt;</code> Either a string or file path containing a JSON-formatted list of access rules, each containing a request method, path, and service, for example \u2018[{\u201cmethod\u201d: \u201cGET\u201d, \u201cpath\u201d: \u201c/v2.1/servers\u201d, \u201cservice\u201d: \u201ccompute\u201d}]\u2019 <code>name</code> Name of the application credential <p>Command example below with only a name supplied</p> <pre><code>openstack application credential create wiki-test-app-creds\n</code></pre> <pre><code>+--------------+----------------------------------------------------------------------------------------+\n| Field        | Value                                                                                  |\n+--------------+----------------------------------------------------------------------------------------+\n| description  | None                                                                                   |\n| expires_at   | None                                                                                   |\n| id           | 0f81c516aa6e443dba0aec93b0bbd87e                                                       |\n| name         | wiki-test-app-creds                                                                    |\n| project_id   | 4f07cc254d6c4471805d49bae1f739b9                                                       |\n| roles        | heat_stack_owner reader _member_ load-balancer_member member                           |\n| secret       | &lt;APPLICATION_CREDS_SECRET&gt;                                                             |\n| system       | None                                                                                   |\n| unrestricted | False                                                                                  |\n| user_id      | fb9a3d02c89e4cfdbe64658ad43ece97                                                       |\n+--------------+----------------------------------------------------------------------------------------+\n</code></pre> <p>Note</p> <p>Once the <code>Application Credentails</code> are created the secret will be displayed. You need to take note of this now as there is no way to get that secret again and a new <code>Application Credential</code> will need to be created should you misplace it.</p>"},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-via-cli/#list-application-credentials","title":"List Application Credentials","text":"<p>Running the below command will list all <code>Application Credentials</code> in your project</p> <pre><code>openstack application credential list\n</code></pre> <pre><code>+----------------------------------+---------------------+----------------------------------+-------------+------------+\n| ID                               | Name                | Project ID                       | Description | Expires At |\n+----------------------------------+---------------------+----------------------------------+-------------+------------+\n| 0f81c516aa6e443dba0aec93b0bbd87e | wiki-test-app-creds | 4f07cc254d6c4471805d49bae1f739b9 | None        | None       |\n+----------------------------------+---------------------+----------------------------------+-------------+------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-via-cli/#show-application-credentials-details","title":"Show Application Credentials details","text":"<p>Running the below command will present additional details about the Application Credentials</p> <pre><code>openstack application credential show APPLICATION_CRED_ID\n</code></pre> <pre><code>+--------------+--------------------------------------------------------------+\n| Field        | Value                                                        |\n+--------------+--------------------------------------------------------------+\n| description  | None                                                         |\n| expires_at   | None                                                         |\n| id           | 0f81c516aa6e443dba0aec93b0bbd87e                             |\n| name         | wiki-test-app-creds                                          |\n| project_id   | 4f07cc254d6c4471805d49bae1f739b9                             |\n| roles        | reader load-balancer_member _member_ member heat_stack_owner |\n| system       | None                                                         |\n| unrestricted | False                                                        |\n| user_id      | fb9a3d02c89e4cfdbe64658ad43ece97                             |\n+--------------+--------------------------------------------------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-via-cli/#deleting-application-credentials","title":"Deleting Application Credentials","text":"<p>Run the command <code>openstack application credential list</code> to get the <code>ID</code> of the <code>Application Credentials</code> you would like to delete</p> <p>Then with the <code>ID</code> run the below command to delete it</p> <pre><code>openstack application credential delete APPLICATION_CRED_ID\n</code></pre> <p>There will be no response, so you can run the list command again to confirm deletion </p>"},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-with-the-dashboard/","title":"Create and manage networks via the dashboard","text":""},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-with-the-dashboard/#create-a-network","title":"Create a Network","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Identity</code> tab and click <code>Application Credentials</code> category</p> <p></p> <p>Click <code>Create Application Credentials</code></p> <p>Within the <code>Create Application Credentials</code> dialog we have the following options</p> <code>Name</code> This is a required field. A name for your Application Credentials, an example could be terraform-deployment <code>Description</code> A friendly description for the Application Credentials  <code>Secret</code> If this field is left blank then one will be automatically generated for you, however you have the ability to provide one yourself should you choose. <code>Expiration Date</code> The day that you wish for this Application Credentials to expire, example is you may only want these to last 1 month and as part of maintenance each month you roll new credentials. If left blank it will default to never expire <code>Expiration Time</code> The time you wish for this Application Credentials to expire, example could be 23:59 on the first Monday of each month so it gives you the Monday morning to roll new credentials. If left blank and <code>Expiration Date</code> is set it will default to 00:00:00 <p>Note</p> <p>Expiration Date and Time will be in UTC format.</p> <code>Roles</code> You may select one or more roles for this application credential. If you do not select any, all of the roles you have assigned on the current project will be applied to the application credential. Example here is my user has <code>[admin, member, reader]</code> associated with it so if I don't pick any roles the <code>Application Credentials</code> will be given the same permissions. <code>Access Rules</code> <p>If you want more fine-grained access control delegation, you can create one or more access rules for this application credential. The list of access rules must be a JSON- or YAML-formatted list of rules each containing a service type, an HTTP method, and a URL path, for example: JSON example<pre><code>[\n\u00a0\u00a0{\n    \"service\": \"compute\",\n\u00a0\u00a0  \"method\": \"POST\",\n\u00a0\u00a0  \"path\": \"/v2.1/servers\"\n  }\n]\n</code></pre></p> YAML example<pre><code>- service: compute\nmethod: POST\npath: /v2.1/servers\n</code></pre> <code>Unrestricted (Dangerous)</code> <p>By default, for security reasons, application credentials are forbidden from being used for creating additional application credentials or keystone trusts. If your application credential needs to be able to perform these actions, check \"unrestricted\".</p> <p>Warning</p> <p>This is potentially dangerous behavior and is disabled by default</p> <p>Once all the required fields are completed click on <code>Create Application Credential</code></p> <p>Another dialog will appear that has your newly created <code>Application Credential</code> secret. The application credential secret will not be available after closing this page, so you must capture it now or download it. If you lose this secret, you must generate a new application credential.</p>"},{"location":"user-guides/create-and-manage-identity/creating-and-managing-application-credentials-with-the-dashboard/#deleting-application-credentials","title":"Deleting Application Credentials","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Identity</code> tab and click <code>Application Credentials</code> category</p> <p>Using the check box select the <code>Application Credentials</code> you would like to delete and the <code>Delete Application Credentials</code> should become clickable in the top right</p> <p></p> <p>Click <code>Delete Application Credentials</code> and a confirmation dialog will appear</p> <p>Confirm the deletion by clicking <code>Delete Application Credentials</code></p>"},{"location":"user-guides/create-and-manage-identity/summary/","title":"Summary","text":"<ul> <li>Identity: Create and Manage</li> <li>With the Dashboard<ul> <li>Create and Manage</li> </ul> </li> <li>With the CLI<ul> <li>Create and Manage</li> </ul> </li> <li>*</li> </ul>"},{"location":"user-guides/create-and-manage-keypairs/","title":"Create and Manage Keypairs","text":"<p>Key pairs are SSH credentials that are injected into a FlexiHPC instance when it is launched. These are used to access and manage your instances.</p> <p>You are able to create a new SSH Key pair on the RDC or import one of your own.</p> <p>Key pairs can be managed a few ways</p> <ul> <li> <p>Create and manage key pairs via the dashboard</p> </li> <li> <p>Create and manage key pairs via CLI</p> </li> </ul>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-via-cli/","title":"Create and manage keypairs via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-via-cli/#create-a-new-keypair","title":"Create a new Keypair","text":"<p>Running the following command will generate a new SSH keypair for use on the RDC</p> <pre><code>openstack keypair create KEY_PAIR_NAME\n</code></pre> <p>You will get a response from the server that contains your private key</p> <pre><code>-----BEGIN OPENSSH PRIVATE KEY-----\nA BIG STRING OF NUMBERS AND LETTERS\n-----END OPENSSH PRIVATE KEY-----\n</code></pre> <p>You will need to take that output and save it to a file. An example below on how to do that:</p> <pre><code>nano ~/.ssh/id_rdc_key\n</code></pre> <p>That will open up and empty file in <code>nano</code> called <code>~/.ssh/id_rdc_key</code></p> <p>You will then want to take the <code>private key</code> response and paste that into the file within your text editor and save it.</p> <p>You should now have a file under <code>~/.ssh</code> called <code>idc_rdc_key</code></p> <p>We will need to change its permissions so that only you can read and write to the file, run the following command:</p> <pre><code>chmod 0600 ~/.ssh/id_rdc_key\n</code></pre>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-via-cli/#import-a-keypair","title":"Import a Keypair","text":"<p>To import a keypair that you have for use on the RDC the command is the same as the create expect with a new parameter</p> <pre><code>openstack keypair create --public-key PUBLIC_KEY_FILE KEY_PAIR_NAME\n</code></pre> <p>You will need to replace <code>PUBLIC_KEY_FILE</code> with the Public Key file location on your machine, running the above command will give no response so you will need to list the key pairs to see if its been successfuly created</p>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-via-cli/#list-your-keypairs","title":"List your Keypairs","text":"<p>Running the below command will list all your keypairs that are on the RDC</p> <pre><code>openstack keypair list\n</code></pre> <pre><code>$ openstack keypair list\n+------------+-------------------------------------------------+------+\n| Name       | Fingerprint                                     | Type |\n+------------+-------------------------------------------------+------+\n| wiki-test  | d5:0a:41:68:e0:84:fc:08:b6:cc:34:23:d8:9a:b4:c3 | ssh  |\n+------------+-------------------------------------------------+------+\n</code></pre>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-via-cli/#details-of-a-keypair","title":"Details of a Keypair","text":"<p>Running the below command will show details about the key pair</p> <pre><code>openstack keypair show KEY_PAIR_NAME\n</code></pre> <pre><code>$ openstack keypair show wiki-test\n+-------------+-------------------------------------------------+\n| Field       | Value                                           |\n+-------------+-------------------------------------------------+\n| created_at  | 2023-11-02T20:28:15.000000                      |\n| fingerprint | d5:0a:41:68:e0:84:fc:08:b6:cc:34:23:d8:9a:b4:c3 |\n| id          | wiki-test                                       |\n| is_deleted  | False                                           |\n| name        | wiki-test                                       |\n| private_key | None                                            |\n| type        | ssh                                             |\n| user_id     | fb9a3d02c89e4cfdbe64658ad43ece97                |\n+-------------+-------------------------------------------------+\n</code></pre> <p>Adding the paramter <code>--public_key</code> will output the public key for that key pair</p> <pre><code>openstack keypair show --public-key KEY_PAIR_NAME\n</code></pre> <pre><code>$ openstack keypair show --public-key wiki-test\nssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILW2gFl/ax1FW1y5u2ihfJfPow7fFbX/aFsZ4Wv49yY4\n</code></pre>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-via-cli/#delete-a-keypair","title":"Delete a Keypair","text":"<p>To delete a keypair from the RDC run the below command</p> <pre><code>openstack keypair delete KEY_PAIR_NAME\n</code></pre> <p>Their will be no response from the server so running the list command will confirm that the keypair has been removed.</p>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-with-the-dashboard/","title":"Create and manage keypairs via the dashboard","text":""},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-with-the-dashboard/#create-a-keypair","title":"Create a Keypair","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select the <code>Key Pairs</code> category</p> <p>Click <code>Create Key Pair</code>.</p> <p></p> <p>In the <code>Create Key Pair</code> dialog box, enter a name for your <code>key pair,</code> and select a <code>Key Type</code></p> <code>Key Type</code> <p>Select one of the following options</p> <ul> <li> <code>SSH Key</code> This will be the common picked <code>Key Type</code> as we will use this to SSH to most compute instances. </li> <li> <code>X509 Certificate</code> This will be used to generate an Certificate based key. </li> </ul> <p></p> <p>Once all fields are supplied click <code>Create Key Pair</code></p> <p>The private key will be downloaded automatically</p> <p></p> <p>To change its permissions so that only you can read and write to the file, run the following command:</p> <pre><code>chmod 0600 yourPrivateKey.pem\n</code></pre> <p>Note</p> <p>If you are using the Dashboard from a Windows computer, use PuTTYgen to load the <code>*.pem</code> file and convert and save it as <code>*.ppk</code>. For more information see the WinSCP web page for PuTTYgen.</p> <p>To make the key pair known to SSH, run the ssh-add command.</p> <pre><code>ssh-add yourPrivateKey.pem\n</code></pre>"},{"location":"user-guides/create-and-manage-keypairs/create-and-manage-keypairs-with-the-dashboard/#import-a-key-pair","title":"Import a Key Pair","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select the <code>Key Pairs</code> category</p> <p>Click <code>Import Key Pair</code>.</p> <p>In the <code>Import Key Pair</code> dialog box, enter the name of your key pair, copy the public key into the <code>Public Key</code> box, and then click <code>Import Key Pair</code>.</p> <p>The Compute database registers the public key of the key pair.</p> <p>The Dashboard lists the key pair on the <code>Key Pairs</code> tab.</p>"},{"location":"user-guides/create-and-manage-keypairs/summary/","title":"Summary","text":"<ul> <li>Keypairs: Create and Manage</li> <li>With the Dashboard<ul> <li>Create and Manage</li> </ul> </li> <li>With the CLI<ul> <li>Create and Manage</li> </ul> </li> <li>*</li> </ul>"},{"location":"user-guides/create-and-manage-networks/","title":"Create and Manage networks","text":"<p>Within FlexiHPC you are able to use the default network that comes with the FlexiHPC Project or you are able to create your own with a specific IP range.</p> <p>The networks within FlexiHPC are all <code>Software Defined Networks</code> so can overlap each other in different projects.</p> <p>Networks can be created and managed in 2 ways</p> <ul> <li> <p>Create and Manage networks with the Dashboard</p> </li> <li> <p>Create and Manage networks via CLI</p> </li> </ul> <p>Within the network tab you also have the following that you are able to manage</p>"},{"location":"user-guides/create-and-manage-networks/#security-groups","title":"Security Groups","text":"<p>A security group acts as a virtual firewall for servers and other resources on a network. It is a container for security group rules which specify the network access rules.</p> <p>Security Groups can be created and managed within the FlexiHPC dashboard. However, advanced users can take advantage of the OpenStack CLI to manage Security Groups.</p> <ul> <li> <p>Create and Manage Security groups with the Dashboard</p> </li> <li> <p>Manage Security groups via CLI</p> </li> </ul>"},{"location":"user-guides/create-and-manage-networks/#floating-ips","title":"Floating IPs","text":"<p>When an instance is created in FlexiHPC, it is automatically assigned a fixed IP address in the network to which the instance is assigned. This IP address is permanently associated with the instance until the instance is terminated.</p> <p>However, in addition to the fixed IP address, a floating IP address can also be attached to an instance. Unlike fixed IP addresses, floating IP addresses can have their associations modified at any time, regardless of the state of the instances involved. This procedure details the reservation of a floating IP address from an existing pool of addresses and the association of that address with a specific instance.</p> <p>If you wish to connect to an instance within the FlexiHPC platform from outside then these are required.</p> <ul> <li> <p>Manage Floating IPs with the Dashboard</p> </li> <li> <p>Manage Floating IPs with the CLI</p> </li> </ul>"},{"location":"user-guides/create-and-manage-networks/#static-ips","title":"Static IPs","text":"<p>If you wanted to create an instance with a fixed static IP address this can be achieved by using network ports. A port is a connection point for attaching a single device, such as the NIC of a server, to an OpenStack network. A network port also describes the associated network configuration, such as the MAC and IP addresses to be used on that port.</p> <p>These network ports can be managed 2 ways</p> <ul> <li> <p>Create and Manage network ports with the Dashboard</p> </li> <li> <p>Create and manage network ports via CLI</p> </li> </ul>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-via-cli/","title":"Create and manage network ports via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>First we need to get a few details, <code>Network ID</code> we want to connect to the network port to, <code>the Subnet ID</code> we want to connect the IP to and the <code>IP Address</code> we want to assign to the network port unless you want it to be assigned an IP from the DHCP</p> <p>Run the following command to get the <code>Network ID</code></p> <pre><code>openstack network list\n</code></pre> <pre><code>+--------------------------------------+--------------------------------+--------------------------------------+\n| ID                                   | Name                           | Subnets                              |\n+--------------------------------------+--------------------------------+--------------------------------------+\n| 33d0c11b-b659-4b77-9afc-5676fe965839 | external                       | 5c2644ad-7253-42f5-ad69-40970b84dea6 |\n| 79029286-80ad-4923-a2e6-7d1216a9f2be | rally_verify_88403f86_qmojdKSJ |                                      |\n| bcfd4714-ef9c-4c0b-aa58-ad8bcc1a999e | rally_verify_51cf3f2d_mQ0taHVb |                                      |\n| d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | NeSI-Training-Test             | f5715775-270c-4230-bfa7-fdbdf51352dc |\n| d780f680-9640-430f-813f-dbf2128b445c | azimuth-demo                   | 70dc21e9-d8f4-4232-bda9-2f0a0d508105 |\n+--------------------------------------+--------------------------------+--------------------------------------+\n</code></pre> <p>Take note of the <code>Network ID</code> and the <code>Subnet ID</code></p> <p>Note</p> <p>For this example we will use the <code>azimuth-demo</code> network so the <code>Network ID: d780f680-9640-430f-813f-dbf2128b445c</code> and the <code>Subnet ID: 70dc21e9-d8f4-4232-bda9-2f0a0d508105</code></p> <p>Should you not know the IP range of the subnet run the following command to get the IP address range from that chosen subnet</p> <pre><code>openstack subnet show SUBNET_ID\n</code></pre> <p>Example response below using the <code>Subnet ID: 70dc21e9-d8f4-4232-bda9-2f0a0d508105</code></p> <pre><code>openstack subnet show 70dc21e9-d8f4-4232-bda9-2f0a0d508105\n</code></pre> <pre><code>+----------------------+--------------------------------------+\n| Field                | Value                                |\n+----------------------+--------------------------------------+\n| allocation_pools     | 192.168.100.2-192.168.100.254        |\n| cidr                 | 192.168.100.0/24                     |\n| created_at           | 2023-08-11T02:47:17Z                 |\n| description          |                                      |\n| dns_nameservers      |                                      |\n| dns_publish_fixed_ip | False                                |\n| enable_dhcp          | True                                 |\n| gateway_ip           | 192.168.100.1                        |\n| host_routes          |                                      |\n| id                   | 70dc21e9-d8f4-4232-bda9-2f0a0d508105 |\n| ip_version           | 4                                    |\n| ipv6_address_mode    | None                                 |\n| ipv6_ra_mode         | None                                 |\n| name                 | azimuth-demo                         |\n| network_id           | d780f680-9640-430f-813f-dbf2128b445c |\n| project_id           | 4f07cc254d6c4471805d49bae1f739b9     |\n| revision_number      | 0                                    |\n| segment_id           | None                                 |\n| service_types        |                                      |\n| subnetpool_id        | None                                 |\n| tags                 |                                      |\n| updated_at           | 2023-08-11T02:47:17Z                 |\n+----------------------+--------------------------------------+\n</code></pre> <p>Take note of the <code>allocation_pools</code> as that will specify the pool of IP addresses</p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-via-cli/#create-a-network-port","title":"Create a network port","text":"<p>Run the following command to create a network port </p> <pre><code>openstack port create --network NETWORK_ID --description PORT_DESCRIPTION --fixed-ip subnet=SUBNET_ID,ip-address=IP_ADDRESS --enable PORT_NAME\n</code></pre> <p>Using the example IDs we prepared earlier it will look like this</p> <pre><code>openstack port create --network d780f680-9640-430f-813f-dbf2128b445c --description wiki-network-port --fixed-ip subnet=70dc21e9-d8f4-4232-bda9-2f0a0d508105,ip-address=192.168.100.60 --enable Wiki-Network-Port-CLI\n</code></pre> <p>We have specified the <code>Network ID</code> as the <code>azimuth-demo</code> network, with the <code>Subnet ID</code> within that network and assigning that network port an IP address of <code>192.168.100.60</code>, we also gave it a description and a friendly name.</p> <p>The response from the command</p> <pre><code>+-------------------------+---------------------------------------------------------------------------------------------------------+\n| Field                   | Value                                                                                                   |\n+-------------------------+---------------------------------------------------------------------------------------------------------+\n| admin_state_up          | UP                                                                                                      |\n| allowed_address_pairs   |                                                                                                         |\n| binding_host_id         | None                                                                                                    |\n| binding_profile         | None                                                                                                    |\n| binding_vif_details     | None                                                                                                    |\n| binding_vif_type        | None                                                                                                    |\n| binding_vnic_type       | normal                                                                                                  |\n| created_at              | 2023-08-29T01:29:45Z                                                                                    |\n| data_plane_status       | None                                                                                                    |\n| description             | wiki-network-port                                                                                       |\n| device_id               |                                                                                                         |\n| device_owner            |                                                                                                         |\n| device_profile          | None                                                                                                    |\n| dns_assignment          | fqdn='host-192-168-100-60.openstacklocal.', hostname='host-192-168-100-60', ip_address='192.168.100.60' |\n| dns_domain              |                                                                                                         |\n| dns_name                |                                                                                                         |\n| extra_dhcp_opts         |                                                                                                         |\n| fixed_ips               | ip_address='192.168.100.60', subnet_id='70dc21e9-d8f4-4232-bda9-2f0a0d508105'                           |\n| id                      | 09e94e3f-ee9e-42f5-851e-a9b4d957b563                                                                    |\n| ip_allocation           | None                                                                                                    |\n| mac_address             | fa:16:3e:05:c9:dd                                                                                       |\n| name                    | Wiki-Network-Port-CLI                                                                                   |\n| network_id              | d780f680-9640-430f-813f-dbf2128b445c                                                                    |\n| numa_affinity_policy    | None                                                                                                    |\n| port_security_enabled   | True                                                                                                    |\n| project_id              | 4f07cc254d6c4471805d49bae1f739b9                                                                        |\n| propagate_uplink_status | None                                                                                                    |\n| qos_network_policy_id   | None                                                                                                    |\n| qos_policy_id           | None                                                                                                    |\n| resource_request        | None                                                                                                    |\n| revision_number         | 1                                                                                                       |\n| security_group_ids      | f2f15d6f-2a04-4196-8102-a058042694b3                                                                    |\n| status                  | DOWN                                                                                                    |\n| tags                    |                                                                                                         |\n| trunk_details           | None                                                                                                    |\n| updated_at              | 2023-08-29T01:29:45Z                                                                                    |\n+-------------------------+---------------------------------------------------------------------------------------------------------+\n</code></pre> <p>Should you not want to assign an IP yourself and allow the DHCP to assign it then run the command without the <code>ip-address</code>parameter like below</p> <pre><code>openstack port create --network NETWORK_ID --description PORT_DESCRIPTION --fixed-ip subnet=SUBNET_ID --enable PORT_NAME\n</code></pre> <p>Command with response</p> <pre><code>openstack port create --network d780f680-9640-430f-813f-dbf2128b445c --description wiki-network-port --fixed-ip subnet=70dc21e9-d8f4-4232-bda9-2f0a0d508105 --enable Wiki-Network-Port-CLI\n</code></pre> <pre><code>+-------------------------+------------------------------------------------------------------------------------------------------------+\n| Field                   | Value                                                                                                      |\n+-------------------------+------------------------------------------------------------------------------------------------------------+\n| admin_state_up          | UP                                                                                                         |\n| allowed_address_pairs   |                                                                                                            |\n| binding_host_id         | None                                                                                                       |\n| binding_profile         | None                                                                                                       |\n| binding_vif_details     | None                                                                                                       |\n| binding_vif_type        | None                                                                                                       |\n| binding_vnic_type       | normal                                                                                                     |\n| created_at              | 2023-08-29T01:38:28Z                                                                                       |\n| data_plane_status       | None                                                                                                       |\n| description             | wiki-network-port                                                                                          |\n| device_id               |                                                                                                            |\n| device_owner            |                                                                                                            |\n| device_profile          | None                                                                                                       |\n| dns_assignment          | fqdn='host-192-168-100-182.openstacklocal.', hostname='host-192-168-100-182', ip_address='192.168.100.182' |\n| dns_domain              |                                                                                                            |\n| dns_name                |                                                                                                            |\n| extra_dhcp_opts         |                                                                                                            |\n| fixed_ips               | ip_address='192.168.100.182', subnet_id='70dc21e9-d8f4-4232-bda9-2f0a0d508105'                             |\n| id                      | d91d923e-a91f-4e00-baa9-eda3ba842dd5                                                                       |\n| ip_allocation           | None                                                                                                       |\n| mac_address             | fa:16:3e:35:5a:e1                                                                                          |\n| name                    | Wiki-Network-Port-CLI                                                                                      |\n| network_id              | d780f680-9640-430f-813f-dbf2128b445c                                                                       |\n| numa_affinity_policy    | None                                                                                                       |\n| port_security_enabled   | True                                                                                                       |\n| project_id              | 4f07cc254d6c4471805d49bae1f739b9                                                                           |\n| propagate_uplink_status | None                                                                                                       |\n| qos_network_policy_id   | None                                                                                                       |\n| qos_policy_id           | None                                                                                                       |\n| resource_request        | None                                                                                                       |\n| revision_number         | 1                                                                                                          |\n| security_group_ids      | f2f15d6f-2a04-4196-8102-a058042694b3                                                                       |\n| status                  | DOWN                                                                                                       |\n| tags                    |                                                                                                            |\n| trunk_details           | None                                                                                                       |\n| updated_at              | 2023-08-29T01:38:28Z                                                                                       |\n+-------------------------+------------------------------------------------------------------------------------------------------------+\n</code></pre> <p>Running the below command will list the network ports within the project and we should be able to see our newly created one</p> <pre><code>openstack port list\n</code></pre> <pre><code>+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| ID                                   | Name                  | MAC Address       | Fixed IP Addresses                                                             | Status |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| 09e94e3f-ee9e-42f5-851e-a9b4d957b563 | Wiki-Network-Port-CLI | fa:16:3e:05:c9:dd | ip_address='192.168.100.60', subnet_id='70dc21e9-d8f4-4232-bda9-2f0a0d508105'  | DOWN   |\n| 0e1dc631-2c63-43b4-9bd2-fcdfbedb854c |                       | fa:16:3e:77:0d:c0 | ip_address='10.1.0.5', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc'        | ACTIVE |\n| 19737c3e-5717-4d19-8717-d362c53f552a |                       | fa:16:3e:21:99:fa | ip_address='10.1.0.2', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc'        | ACTIVE |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n</code></pre> <p>Note</p> <p>The full openstack documentation is here should you need more advanced parameters</p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-via-cli/#list-network-ports","title":"List network ports","text":"<p>Run the below command to list all network ports within your project</p> <pre><code>openstack port list\n</code></pre> <pre><code>+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| ID                                   | Name                  | MAC Address       | Fixed IP Addresses                                                             | Status |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| 09e94e3f-ee9e-42f5-851e-a9b4d957b563 | Wiki-Network-Port-CLI | fa:16:3e:05:c9:dd | ip_address='192.168.100.60', subnet_id='70dc21e9-d8f4-4232-bda9-2f0a0d508105'  | DOWN   |\n| 0e1dc631-2c63-43b4-9bd2-fcdfbedb854c |                       | fa:16:3e:77:0d:c0 | ip_address='10.1.0.5', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc'        | ACTIVE |\n| 19737c3e-5717-4d19-8717-d362c53f552a |                       | fa:16:3e:21:99:fa | ip_address='10.1.0.2', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc'        | ACTIVE |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-via-cli/#attach-network-port-to-an-instance","title":"Attach network port to an Instance","text":"<p>If you also wish to attach the newly created <code>Network Port</code> to an instance then you will also need the <code>Instance ID</code></p> <p>Running the below will return a list of all instances within your project</p> <pre><code>openstack server list\n</code></pre> <pre><code>+--------------------------------------+---------------------+--------+----------------------------------------------+------------------------------+--------------------+\n| ID                                   | Name                | Status | Networks                                     | Image                        | Flavor             |\n+--------------------------------------+---------------------+--------+----------------------------------------------+------------------------------+--------------------+\n| 610ee950-cdf8-425d-a3f3-52de500522ee | k8s-worker-node-1   | ACTIVE | NeSI-Training-Test=10.1.0.101, FLEXIHPC_IP   | Ubuntu-Focal-20.04           | balanced1.2cpu4ram |\n| 10389ba9-15a9-48b0-91f3-b7cbccdce72b | k8s-worker-node-0   | ACTIVE | NeSI-Training-Test=10.1.0.81, FLEXIHPC_IP    | Ubuntu-Focal-20.04           | balanced1.2cpu4ram |\n| af6fb776-b80e-49b9-a8d4-a1d88b272b63 | k8s-control-plane-0 | ACTIVE | NeSI-Training-Test=10.1.0.176, FLEXIHPC_IP   | Ubuntu-Focal-20.04           | balanced1.2cpu4ram |\n| 6d1d5418-a70e-4996-a0f5-4f4c03cfd138 | ood-cluster-admin   | ACTIVE | NeSI-Training-Test=10.1.0.69, FLEXIHPC_IP    | N/A (booted from volume)     | devtest1.4cpu4ram  |\n+--------------------------------------+---------------------+--------+----------------------------------------------+------------------------------+--------------------+\n</code></pre> <p>Take note of the <code>Instance ID</code></p> <p>Note</p> <p>For this example we will use <code>Instance ID: 6d1d5418-a70e-4996-a0f5-4f4c03cfd138</code></p> <p>We then want to list our network ports</p> <pre><code>openstack port list\n</code></pre> <pre><code>+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| ID                                   | Name                  | MAC Address       | Fixed IP Addresses                                                             | Status |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| d91d923e-a91f-4e00-baa9-eda3ba842dd5 | Wiki-Network-Port-CLI | fa:16:3e:35:5a:e1 | ip_address='192.168.100.182', subnet_id='70dc21e9-d8f4-4232-bda9-2f0a0d508105' | DOWN   |\n| f1c54ee3-80c5-468d-a1cb-2828c1fee5cc |                       | fa:16:3e:ad:6b:06 | ip_address='10.1.0.1', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc'        | ACTIVE |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n</code></pre> <p>Take note of the <code>Network Port ID</code></p> <p>Note</p> <p>For this example we will use <code>d91d923e-a91f-4e00-baa9-eda3ba842dd5</code></p> <p>We then run the following command</p> <pre><code>openstack server add port INSTANCE_ID NETWORK_PORT_ID\n</code></pre> <p>Command with our example ID\u2019s</p> <pre><code>openstack server add port 6d1d5418-a70e-4996-a0f5-4f4c03cfd138 d91d923e-a91f-4e00-baa9-eda3ba842dd5\n</code></pre> <p>There will be no response from the server so running the below command will display the new network port added to the instance</p> <pre><code>openstack server show 6d1d5418-a70e-4996-a0f5-4f4c03cfd138\n</code></pre> <pre><code>+-------------------------------------+----------------------------------------------------------------------------+\n| Field                               | Value                                                                      |\n+-------------------------------------+----------------------------------------------------------------------------+\n| accessIPv4                          |                                                                            |\n| accessIPv6                          |                                                                            |\n| access_ipv4                         |                                                                            |\n| access_ipv6                         |                                                                            |\n| addresses                           | NeSI-Training-Test=10.1.0.69, 163.7.177.243; azimuth-demo=192.168.100.182  |\n| adminPass                           | None                                                                       |\n| admin_password                      | None                                                                       |\n| availability_zone                   | nova                                                                       |\n| block_device_mapping                | None                                                                       |\n| block_device_mapping_v2             | None                                                                       |\n| compute_host                        | None                                                                       |\n| config_drive                        | True                                                                       |\n| created                             | 2023-07-19T03:45:21Z                                                       |\n| created_at                          | 2023-07-19T03:45:21Z                                                       |\n| description                         | None                                                                       |\n| disk_config                         | AUTO                                                                       |\n| fault                               | None                                                                       |\n| flavor                              | devtest1.4cpu4ram (devtest1.4cpu4ram)                                      |\n| flavorRef                           | None                                                                       |\n| flavor_id                           | None                                                                       |\n| has_config_drive                    | True                                                                       |\n| hostId                              | f40676c3043f50b6efeeefb163a9d9f7a0994b288b09dfddcdccac9b                   |\n| host_id                             | f40676c3043f50b6efeeefb163a9d9f7a0994b288b09dfddcdccac9b                   |\n| host_status                         | None                                                                       |\n| hostname                            | ood-cluster-admin                                                          |\n&lt;TRIMMED.....&gt;\n| launched_at                         | 2023-07-19T03:45:28.000000                                                 |\n+-------------------------------------+----------------------------------------------------------------------------+\n</code></pre> <p>You should see the additional network port under <code>addresses</code> for your instance</p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-via-cli/#delete-a-network-port","title":"Delete a network port","text":"<p>Run the command <code>openstack port list</code> and take note of the <code>Network Port ID</code></p> <pre><code>openstack port list\n</code></pre> <pre><code>+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| ID                                   | Name                  | MAC Address       | Fixed IP Addresses                                                             | Status |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| d91d923e-a91f-4e00-baa9-eda3ba842dd5 | Wiki-Network-Port-CLI | fa:16:3e:35:5a:e1 | ip_address='192.168.100.182', subnet_id='70dc21e9-d8f4-4232-bda9-2f0a0d508105' | DOWN   |\n| f1c54ee3-80c5-468d-a1cb-2828c1fee5cc |                       | fa:16:3e:ad:6b:06 | ip_address='10.1.0.1', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc'        | ACTIVE |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n</code></pre> <p>Take note of the ID for that network port</p> <p>Note</p> <p>For this example we will use <code>d91d923e-a91f-4e00-baa9-eda3ba842dd5</code></p> <p>Then run the below command, supplying the <code>Network Port ID</code> you want to delete</p> <pre><code>openstack port delete NETWORK_PORT_ID\n</code></pre> <p>Command with our example ID</p> <pre><code>openstack port delete d91d923e-a91f-4e00-baa9-eda3ba842dd5\n</code></pre> <p>There is no response from the server so run <code>openstack port list</code> to see the network port has been removed</p> <pre><code>openstack port list\n</code></pre> <pre><code>+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| ID                                   | Name                  | MAC Address       | Fixed IP Addresses                                                             | Status |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n| f1c54ee3-80c5-468d-a1cb-2828c1fee5cc |                       | fa:16:3e:ad:6b:06 | ip_address='10.1.0.1', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc'        | ACTIVE |\n+--------------------------------------+-----------------------+-------------------+--------------------------------------------------------------------------------+--------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-with-the-dashboard/","title":"Create and manage network ports with the dashboard","text":""},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-with-the-dashboard/#create-a-network-port","title":"Create a Network port","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Network</code> tab, select the <code>Networks</code> category and then select the network you want to assign the network port to.</p> <p>Click on the <code>Ports</code> tab</p> <p></p> <p>Then click <code>Create Port</code></p> <p>Within the <code>Create Port</code> dialog fill in the options</p> <code>Name</code> A friendly name for your network port <code>Device ID</code> The ID of the instance you want to attach this too, this can be done later should you not know the ID of the instance. <code>Device Owner</code> The owner of the device, this can be added later if you don't know the device owner. <code>Specify IP address or subnet</code> <p>You have 3 options to chose from</p> <code>Unspecified</code> This option will assign a DHCP IP to the network port <code>Subnet</code> This option will allow you to pick the subnet within the network to attach the port too and assign a DHCP IP to it. <code>Fixed IP Address</code> This option will allow you to specify the IP address that will be assigned to the network port <p>Depending on the option chosen above there will be additional settings to chose below</p> <code>Unspecified</code> <code>Mac Address</code> The MAC address of the NIC you want to assign, you can leave this blank should you not know the MAC address and it will be assigned later <code>Subnet</code> <code>Subnet</code> This is a required field, pick the subnet that you wish the network port to be associated with <code>Mac Address</code> The MAC address of the NIC you want to assign, you can leave this blank should you not know the MAC address and it will be assigned later <code>Fixed IP Address</code> <code>Fixed IP Address</code> This is a required field, specify the network port IP that you want to use <code>Mac Address</code> The MAC address of the NIC you want to assign, you can leave this blank should you not know the MAC address and it will be assigned later <p>After the above we have the last 2 options within the <code>Create Port</code> dialog</p> <code>Port Security</code> This is checked by default, it enables anti-spoofing rules for the network port <code>VNIC Type</code> This is the type of Virtual Network Interface Card that is bound to the port. The default of Normal should be enough for most cases. <p>There is also the option to assign security groups to this network port as well. The user guide Manage Security Groups will provide more information about them.</p> <p>We then click on <code>Create</code></p> <p></p> <p>This will then create the network port so that we can assign it to a instance later on</p> <p></p> <p>Note</p> <p>If you provided a Device ID during the creation of the network port then it will be assigned to the instance you provided</p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-with-the-dashboard/#assigning-a-network-port-to-an-instance","title":"Assigning a network port to an instance","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select <code>Instances</code></p> <p></p> <p>Under the <code>Actions</code> dropdown select <code>Attach Interface</code></p> <p></p> <p>Within the <code>Attach Interface</code> dialog we have a few options to attach the network port. We can create a new one here or attach a previously created one.</p> <p>The first option is to create a new one from within the dialog, so we pick the option <code>by Network (and IP Address)</code> within <code>The way to specify an Interface</code></p> <code>Network</code> This is a required field, pick the network you wish for this port to be assigned too <code>IP Address</code> Leaving this blank will assign an IP address from the DHCP, you can also specify the IP Address you wish for this network port to use <p>The second option is to assign a previously created network port, so we pick the option <code>by Port</code> within <code>The way to specify an Interface</code></p> <code>Port</code> This is a required field, pick the previously created network port from the options provided. <p>Click <code>Attach Interface</code></p> <p>The instance should now have the new network port attached</p> <p></p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-with-the-dashboard/#detach-a-network-port-from-an-instance","title":"Detach a network port from an instance","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select <code>Instances</code></p> <p></p> <p>Under the <code>Actions</code> dropdown select <code>Detach Interface</code></p> <p></p> <p>Within the <code>Detach Interface</code> dialog select the IP address for the Network port you wish to detach</p> <p>Click <code>Detach Interface</code></p> <p></p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-network-ports-with-the-dashboard/#delete-a-network-port","title":"Delete a network port","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Network</code> tab, select the <code>Networks</code> category and then select the network you want to assign the network port to.</p> <p>Click on the <code>Ports</code> tab</p> <p></p> <p>Select the port you wish to delete with the check box and the <code>Delete Port</code> option so become solid.</p> <p>Within the <code>Delete Port</code> dialog ensure you are deleting the correct one</p> <p>Click <code>Delete Ports</code></p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-via-cli/","title":"Create and manage network via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-via-cli/#create-a-network","title":"Create a network","text":"<p>Running the below command will generate a network without a subnet</p> <pre><code>openstack network create NETWORK_NAME\n</code></pre> <p>Our example command with response</p> <pre><code>openstack network create wiki-net\n</code></pre> <pre><code>+---------------------------+--------------------------------------+\n| Field                     | Value                                |\n+---------------------------+--------------------------------------+\n| admin_state_up            | UP                                   |\n| availability_zone_hints   |                                      |\n| availability_zones        |                                      |\n| created_at                | 2023-09-10T21:10:02Z                 |\n| description               |                                      |\n| dns_domain                |                                      |\n| id                        | 15274353-ceae-476c-a374-dc7142a676f4 |\n| ipv4_address_scope        | None                                 |\n| ipv6_address_scope        | None                                 |\n| is_default                | False                                |\n| is_vlan_transparent       | None                                 |\n| mtu                       | 8942                                 |\n| name                      | wiki-net                             |\n| port_security_enabled     | True                                 |\n| project_id                | 4f07cc254d6c4471805d49bae1f739b9     |\n| provider:network_type     | None                                 |\n| provider:physical_network | None                                 |\n| provider:segmentation_id  | None                                 |\n| qos_policy_id             | None                                 |\n| revision_number           | 1                                    |\n| router:external           | Internal                             |\n| segments                  | None                                 |\n| shared                    | False                                |\n| status                    | ACTIVE                               |\n| subnets                   |                                      |\n| tags                      |                                      |\n| tenant_id                 | 4f07cc254d6c4471805d49bae1f739b9     |\n| updated_at                | 2023-09-10T21:10:02Z                 |\n+---------------------------+--------------------------------------+\n</code></pre> <p>Take note of the <code>id</code> that is returned for the new network</p> <p>Note</p> <p>Our <code>id</code> from above is <code>15274353-ceae-476c-a374-dc7142a676f4</code></p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-via-cli/#create-a-network-subnet","title":"Create a network subnet","text":"<p>Running the below command will generate a subnet for the network that you supply the id from</p> <pre><code>openstack subnet create SUBNET_NAME --network NETWORK_ID --subnet-range IP_RANGE_CIDR\n</code></pre> <p>Our example command using the id from above will look like the following</p> <pre><code>openstack subnet create wiki-subnet --network  15274353-ceae-476c-a374-dc7142a676f4 --subnet-range 192.0.2.0/24\n</code></pre> <pre><code>+----------------------+--------------------------------------+\n| Field                | Value                                |\n+----------------------+--------------------------------------+\n| allocation_pools     | 192.0.2.2-192.0.2.254                |\n| cidr                 | 192.0.2.0/24                         |\n| created_at           | 2023-09-10T21:11:13Z                 |\n| description          |                                      |\n| dns_nameservers      |                                      |\n| dns_publish_fixed_ip | False                                |\n| enable_dhcp          | True                                 |\n| gateway_ip           | 192.0.2.1                            |\n| host_routes          |                                      |\n| id                   | ae9277e7-0a2c-4325-8eb1-33ad86eec974 |\n| ip_version           | 4                                    |\n| ipv6_address_mode    | None                                 |\n| ipv6_ra_mode         | None                                 |\n| name                 | wiki-subnet                          |\n| network_id           | 15274353-ceae-476c-a374-dc7142a676f4 |\n| project_id           | 4f07cc254d6c4471805d49bae1f739b9     |\n| revision_number      | 0                                    |\n| segment_id           | None                                 |\n| service_types        |                                      |\n| subnetpool_id        | None                                 |\n| tags                 |                                      |\n| updated_at           | 2023-09-10T21:11:13Z                 |\n+----------------------+--------------------------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-via-cli/#list-all-networks-and-subnets","title":"List all networks and subnets","text":"<p>Running the below command will list all networks within your project</p> <pre><code>openstack network list\n</code></pre> <pre><code>+--------------------------------------+--------------------------------+--------------------------------------+\n| ID                                   | Name                           | Subnets                              |\n+--------------------------------------+--------------------------------+--------------------------------------+\n| 15274353-ceae-476c-a374-dc7142a676f4 | wiki-net                       | ae9277e7-0a2c-4325-8eb1-33ad86eec974 |\n| 33d0c11b-b659-4b77-9afc-5676fe965839 | external                       | 5c2644ad-7253-42f5-ad69-40970b84dea6 |\n| 79029286-80ad-4923-a2e6-7d1216a9f2be | rally_verify_88403f86_qmojdKSJ |                                      |\n| bcfd4714-ef9c-4c0b-aa58-ad8bcc1a999e | rally_verify_51cf3f2d_mQ0taHVb |                                      |\n| d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | NeSI-Training-Test             | f5715775-270c-4230-bfa7-fdbdf51352dc |\n| d780f680-9640-430f-813f-dbf2128b445c | azimuth-demo                   | 70dc21e9-d8f4-4232-bda9-2f0a0d508105 |\n+--------------------------------------+--------------------------------+--------------------------------------+\n</code></pre> <p>Running the below will list all subnets within your project</p> <pre><code>openstack subnet list\n</code></pre> <pre><code>+--------------------------------------+--------------------+--------------------------------------+------------------+\n| ID                                   | Name               | Network                              | Subnet           |\n+--------------------------------------+--------------------+--------------------------------------+------------------+\n| 5c2644ad-7253-42f5-ad69-40970b84dea6 | external           | 33d0c11b-b659-4b77-9afc-5676fe965839 | 163.7.177.0/24   |\n| 70dc21e9-d8f4-4232-bda9-2f0a0d508105 | azimuth-demo       | d780f680-9640-430f-813f-dbf2128b445c | 192.168.100.0/24 |\n| ae9277e7-0a2c-4325-8eb1-33ad86eec974 | wiki-subnet        | 15274353-ceae-476c-a374-dc7142a676f4 | 192.0.2.0/24     |\n| f5715775-270c-4230-bfa7-fdbdf51352dc | NeSI-Training-Test | d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | 10.1.0.0/24      |\n+--------------------------------------+--------------------+--------------------------------------+------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-via-cli/#delete-a-subnet","title":"Delete a subnet","text":"<p>Run the below command to list out all subnets</p> <pre><code>openstack subnet list\n</code></pre> <pre><code>+--------------------------------------+--------------------+--------------------------------------+------------------+\n| ID                                   | Name               | Network                              | Subnet           |\n+--------------------------------------+--------------------+--------------------------------------+------------------+\n| 5c2644ad-7253-42f5-ad69-40970b84dea6 | external           | 33d0c11b-b659-4b77-9afc-5676fe965839 | 163.7.177.0/24   |\n| 70dc21e9-d8f4-4232-bda9-2f0a0d508105 | azimuth-demo       | d780f680-9640-430f-813f-dbf2128b445c | 192.168.100.0/24 |\n| ae9277e7-0a2c-4325-8eb1-33ad86eec974 | wiki-subnet        | 15274353-ceae-476c-a374-dc7142a676f4 | 192.0.2.0/24     |\n| f5715775-270c-4230-bfa7-fdbdf51352dc | NeSI-Training-Test | d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | 10.1.0.0/24      |\n+--------------------------------------+--------------------+--------------------------------------+------------------+\n</code></pre> <p>Take note of the subnet id that you wish to delete</p> <p>Note</p> <p>For our example we will use <code>ae9277e7-0a2c-4325-8eb1-33ad86eec974</code></p> <p>We then run the following command while supplying it with the id we have chosen to delete</p> <pre><code>openstack subnet delete SUBNET_ID\n</code></pre> <p>The server will not give a response if successful so you will need to run <code>openstack subnet list</code> to confirm its removal</p> <pre><code>openstack subnet list\n</code></pre> <p>Using our example id our command and list looks like the following</p> <pre><code>openstack subnet delete ae9277e7-0a2c-4325-8eb1-33ad86eec974\n</code></pre> <pre><code>+--------------------------------------+--------------------+--------------------------------------+------------------+\n| ID                                   | Name               | Network                              | Subnet           |\n+--------------------------------------+--------------------+--------------------------------------+------------------+\n| 5c2644ad-7253-42f5-ad69-40970b84dea6 | external           | 33d0c11b-b659-4b77-9afc-5676fe965839 | 163.7.177.0/24   |\n| 70dc21e9-d8f4-4232-bda9-2f0a0d508105 | azimuth-demo       | d780f680-9640-430f-813f-dbf2128b445c | 192.168.100.0/24 |\n| f5715775-270c-4230-bfa7-fdbdf51352dc | NeSI-Training-Test | d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | 10.1.0.0/24      |\n+--------------------------------------+--------------------+--------------------------------------+------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-via-cli/#delete-a-network","title":"Delete a network","text":"<p>Run the below command to list all networks</p> <pre><code>openstack network list\n</code></pre> <pre><code>+--------------------------------------+--------------------------------+--------------------------------------+\n| ID                                   | Name                           | Subnets                              |\n+--------------------------------------+--------------------------------+--------------------------------------+\n| 15274353-ceae-476c-a374-dc7142a676f4 | wiki-net                       | ae9277e7-0a2c-4325-8eb1-33ad86eec974 |\n| 33d0c11b-b659-4b77-9afc-5676fe965839 | external                       | 5c2644ad-7253-42f5-ad69-40970b84dea6 |\n| 79029286-80ad-4923-a2e6-7d1216a9f2be | rally_verify_88403f86_qmojdKSJ |                                      |\n| bcfd4714-ef9c-4c0b-aa58-ad8bcc1a999e | rally_verify_51cf3f2d_mQ0taHVb |                                      |\n| d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | NeSI-Training-Test             | f5715775-270c-4230-bfa7-fdbdf51352dc |\n| d780f680-9640-430f-813f-dbf2128b445c | azimuth-demo                   | 70dc21e9-d8f4-4232-bda9-2f0a0d508105 |\n+--------------------------------------+--------------------------------+--------------------------------------+\n</code></pre> <p>Take note of the network id we want to remove</p> <p>Note</p> <p>For our example we will use <code>15274353-ceae-476c-a374-dc7142a676f4</code></p> <p>Then run the below command while supplying the id for the network you wish to remove</p> <pre><code>openstack network delete NETWORK_ID\n</code></pre> <p>There will be no response from the server when you send the command so will need to list the networks to confirm removal.</p> <p>Example command and list response</p> <pre><code>openstack network delete 15274353-ceae-476c-a374-dc7142a676f4\n</code></pre> <pre><code>openstack network list\n</code></pre> <pre><code>+--------------------------------------+--------------------------------+--------------------------------------+\n| ID                                   | Name                           | Subnets                              |\n+--------------------------------------+--------------------------------+--------------------------------------+\n| 33d0c11b-b659-4b77-9afc-5676fe965839 | external                       | 5c2644ad-7253-42f5-ad69-40970b84dea6 |\n| 79029286-80ad-4923-a2e6-7d1216a9f2be | rally_verify_88403f86_qmojdKSJ |                                      |\n| bcfd4714-ef9c-4c0b-aa58-ad8bcc1a999e | rally_verify_51cf3f2d_mQ0taHVb |                                      |\n| d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | NeSI-Training-Test             | f5715775-270c-4230-bfa7-fdbdf51352dc |\n| d780f680-9640-430f-813f-dbf2128b445c | azimuth-demo                   | 70dc21e9-d8f4-4232-bda9-2f0a0d508105 |\n+--------------------------------------+--------------------------------+--------------------------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-with-the-dashboard/","title":"Create and manage networks via the dashboard","text":""},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-with-the-dashboard/#create-a-network","title":"Create a Network","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Network</code> tab and select the <code>Networks</code> category</p> <p></p> <p>Click <code>Create Network</code> on the right hand side</p> <p>Within the <code>Create Network &gt; Network</code> dialog you have the following options.</p> <code>Network Name</code> A friendly name for your network <code>Enable Admin State</code> If checked this will enable the network, by default leave this set to true <code>Create Subnet</code> If checked this will enable the creation of a subnet, by default leave this set to true <code>Availability Zone Hints</code> Availability zones where the DHCP agents can be scheduled. Leaving this unset is the same as selecting all Availability zones. As FlexiHPC only has 1 zone nova this value can be left unset <code>MTU</code> Maximum Transmission Unit. An MTU is the largest size frame or packet -- in bytes or octets (eight-bit bytes) -- that can be transmitted across a data link. Leaving this unset is the default unless you know what you are doing here. <p>Click <code>Next</code></p> <p>Within the <code>Create Network &gt; Subnet dialog</code> you have the following options</p> <code>Subnet Name</code> A friendly name for your subnet <code>Network Address</code> The network address in CIDR format e.g. 192.168.0.0/24 if its IPv4 <code>IP Version</code> If your Network Address is an IPv4 then pick that otherwise pick IPv6. IPv4 is generally the default <code>Gateway IP</code> IP address of the gateway is generally the first IP of the network address, from our Network Address example above it would be 192.168.0.1. To use the default leave this blank. <code>Disable Gateway</code> Should you not want a gateway then check this. By default you will want your network to have a gateway. <p>Click <code>Next</code></p> <p>Within the <code>Create Network &gt; Subnet Details</code> dialog you have the following options</p> <code>Enable DHCP</code> This allows the network to auto assign an IP when a compute instance is attached to it <code>Allocation Pools</code> The IP\u2019s you would like to allocate to compute instances when they are attached. The format should be start_ip_address,end_ip_address using our Network Address example it would be 192.168.0.20,192.168.0.50. Leave blank if you want to use any IP addresses from the specified Network Address <code>DNS Name Servers</code> Should you wish to use different name servers then the ones FlexiHPC uses please enter then here, one per line. <code>Host Routes</code> Additional Routes announced to the hosts. The format should be destination_cidr,nexthop. This is used should you wish to have separate networks that want to communicate with each other.  <p>Click <code>Create</code> and it should start to create your new network</p> <p></p>"},{"location":"user-guides/create-and-manage-networks/create-and-manage-networks-with-the-dashboard/#delete-a-network","title":"Delete a network","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Network</code> tab and select the <code>Networks</code> category</p> <p>Select the network you wish to delete with the check box</p> <p></p> <p>The <code>Delete Network</code> button should become a solid red</p> <p>Click <code>Delete Network</code></p> <p>Within the <code>Confirm Delete Network</code> dialog ensure you have selected the correct network that is displayed.</p> <p>Click <code>Delete Networks</code></p> <p>The network should now be deleted</p>"},{"location":"user-guides/create-and-manage-networks/manage-floating-ips-via-cli/","title":"Manage Floating IPs via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>Use the <code>openstack</code> commands to manage floating IP addresses.</p>"},{"location":"user-guides/create-and-manage-networks/manage-floating-ips-via-cli/#list-floating-ip-address-information","title":"List floating IP address information","text":"<p>To list all floating IP addresses that are allocated to the current project, run:</p> <pre><code>openstack floating ip list\n</code></pre> <pre><code>+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+\n| ID                                   | Floating IP Address | Fixed IP Address | Port                                 | Floating Network                     | Project                          |\n+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+\n| 1c59da88-9b5c-4214-930e-8447cebd3980 | &lt;FLEXIHPC_IP&gt;       | None             | None                                 | 33d0c11b-b659-4b77-9afc-5676fe965839 | 4f07cc254d6c4471805d49bae1f739b9 |\n+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/manage-floating-ips-via-cli/#associate-floating-ip-addresses","title":"Associate floating IP addresses","text":"<p>You can assign a floating IP address to a project and to an instance.</p> <p>Run the following command to allocate a floating IP address to the current project. By default, the floating IP address is allocated from the <code>external</code> pool. The command outputs the allocated IP address:</p> <pre><code>openstack floating ip create external\n</code></pre> <pre><code>+---------------------+--------------------------------------+\n| Field               | Value                                |\n+---------------------+--------------------------------------+\n| created_at          | 2023-07-27T01:29:31Z                 |\n| description         |                                      |\n| dns_domain          |                                      |\n| dns_name            |                                      |\n| fixed_ip_address    | None                                 |\n| floating_ip_address | &lt;FLEXIHPC_IP&gt;                        |\n| floating_network_id | 33d0c11b-b659-4b77-9afc-5676fe965839 |\n| id                  | 5c8781cd-399b-4b37-8ced-41ca4a38c128 |\n| name                | &lt;FLEXIHPC_IP&gt;                        |\n| port_details        | None                                 |\n| port_id             | None                                 |\n| project_id          | 4f07cc254d6c4471805d49bae1f739b9     |\n| qos_policy_id       | None                                 |\n| revision_number     | 0                                    |\n| router_id           | None                                 |\n| status              | DOWN                                 |\n| subnet_id           | None                                 |\n| tags                | []                                   |\n| updated_at          | 2023-07-27T01:29:31Z                 |\n+---------------------+--------------------------------------+\n</code></pre> <p>List all project instances with which a floating IP address could be associated.</p> <pre><code>openstack server list\n</code></pre> <pre><code>+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n| ID                                   | Name                                  | Status | Networks                                     | Image                    | Flavor             |\n+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n| 8b08a4fb-7372-4269-a583-9dbc91779ffe | test-instance-wiki                    | ACTIVE | NeSI-Training-Test=10.1.0.134                | Ubuntu-Jammy-22.04       | devtest1.2cpu2ram  |\n+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n</code></pre> <p>Note the server ID to use.</p> <p>List ports associated with the selected server.</p> <pre><code>openstack port list --device-id SERVER_ID\n</code></pre> <pre><code>+--------------------------------------+------+-------------------+---------------------------------------------------------------------------+--------+\n| ID                                   | Name | MAC Address       | Fixed IP Addresses                                                        | Status |\n+--------------------------------------+------+-------------------+---------------------------------------------------------------------------+--------+\n| 09c1ebd1-0fa0-40ec-98ef-bae2417f33ef |      | fa:16:3e:14:0c:32 | ip_address='10.1.0.134', subnet_id='f5715775-270c-4230-bfa7-fdbdf51352dc' | ACTIVE |\n+--------------------------------------+------+-------------------+---------------------------------------------------------------------------+--------+\n</code></pre> <p>Note the port ID to use.</p> <p>Associate an IP address with an instance in the project, as follows:</p> <pre><code>openstack floating ip set --port PORT_ID FLOATING_IP_ADDRESS\n</code></pre> <p>For example:</p> <pre><code>openstack floating ip set --port 09c1ebd1-0fa0-40ec-98ef-bae2417f33ef &lt;FLEXIHPC_IP&gt;\n</code></pre> <p>The instance is now associated with two IP addresses:</p> <pre><code>openstack server list\n</code></pre> <pre><code>+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n| ID                                   | Name                                  | Status | Networks                                     | Image                    | Flavor             |\n+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n| 8b08a4fb-7372-4269-a583-9dbc91779ffe | test-instance-wiki                    | ACTIVE | NeSI-Training-Test=10.1.0.134, &lt;FLEXIHPC_IP&gt; | Ubuntu-Jammy-22.04       | devtest1.2cpu2ram  |\n+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n</code></pre> <p>After you associate the IP address and configure security group rules for the instance, the instance is publicly available at the floating IP address.</p>"},{"location":"user-guides/create-and-manage-networks/manage-floating-ips-via-cli/#disassociate-floating-ip-addresses","title":"Disassociate floating IP addresses","text":"<p>To disassociate a floating IP address from an instance:</p> <pre><code>openstack floating ip unset --port PORT_ID FLOATING_IP_ADDRESS\n</code></pre> <p>To remove the floating IP address from a project:</p> <pre><code>openstack floating ip delete FLOATING_IP_ADDRESS\n</code></pre> <p>The IP address is returned to the pool of IP addresses that is available for all projects. If the IP address is still associated with a running instance, it is automatically disassociated from that instance.</p>"},{"location":"user-guides/create-and-manage-networks/manage-floating-ips-via-the-dashboard/","title":"Manage Floating IPs via the Dashboard","text":""},{"location":"user-guides/create-and-manage-networks/manage-floating-ips-via-the-dashboard/#assign-floating-ip-address","title":"Assign Floating IP address","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Network</code> tab and select <code>Floating IPs</code></p> <p>Click <code>Allocate IP to Project</code></p> <p>Within the <code>Allocate Floating IP</code> dialog you have the following options</p> <code>Pool</code> The pool that the floating ip should be allocated from. There is only external currently so is set as the default. <code>Description</code> A friendly description for what this IP is used for <code>DNS Domain</code> TODO: Confirm with Sean what this means <code>DNS Name</code> TODO: Confirm with Sean what this means <p>Note</p> <p>The default settings are fine should you not wish to configure anything further.</p> <p>Click <code>Allocate IP</code></p> <p></p> <p>Under <code>Actions</code> click <code>Associate</code></p> <p>Within the <code>Managing Floating IP Associations</code> dialog you want to ensure the <code>IP Address</code> is the one you wish to assign, and under the <code>Ports to be assocaited</code> select the compute instance you wish to assign the IP too.</p> <p>Click <code>Associate</code></p>"},{"location":"user-guides/create-and-manage-networks/manage-floating-ips-via-the-dashboard/#un-assign-floating-ip-address","title":"Un-assign Floating IP address","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Network</code> tab and select <code>Floating IPs</code></p> <p>Under <code>Actions</code> click <code>Disassociate</code></p> <p>Within the <code>Confrim Disassociate</code> dialog confirm the IP you are disassociating</p> <p>Click <code>Disassociate</code></p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-via-cli/","title":"Manage Security groups via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-via-cli/#creating-a-security-group","title":"Creating a Security Group","text":"<p>Run the following command to create a Security Group with a specified name and description.</p> <pre><code>openstack security group create --description FRIENDLY_DESCRIPTION NAME_FOR_GROUP\n</code></pre> <p>An example command to create a security group called <code>My_Wiki_SG</code></p> <pre><code>openstack security group create --description \"A testing group for wiki\" My_Wiki_SG\n</code></pre> <p>We can check the security group is created by running</p> <pre><code>openstack security group list\n</code></pre> <pre><code>+--------------------------------------+--------------------------+---------------------------------------------------------+----------------------------------+------+\n| ID                                   | Name                     | Description                                             | Project                          | Tags |\n+--------------------------------------+--------------------------+---------------------------------------------------------+----------------------------------+------+\n| 339bd140-e6a0-4afd-9b24-029c3243e779 | My_Wiki_SG               | A testing group for wiki                                | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| 7200b28f-9089-4797-a094-39f1995e6f0c | SSH Allow All            | This is an open SSH that allows anyone to connect to 22 | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| b5d30ed4-13b3-4f7a-bc5a-c48175566ea3 | My-Security-Group        | This is my security group                               | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| f2f15d6f-2a04-4196-8102-a058042694b3 | default                  | Default security group                                  | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n+--------------------------------------+--------------------------+---------------------------------------------------------+----------------------------------+------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-via-cli/#create-and-manage-security-group-rules","title":"Create and manage Security Group rules","text":"<p>You can modify Security Group rules with the <code>openstack security group rule</code> command.</p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-via-cli/#create-new-rules-for-a-group","title":"Create new rules for a group","text":"<p>Allow access from all IP addresses (specified as IP subnet <code>0.0.0.0/0</code> in CIDR notation) for the port <code>8080</code></p> <pre><code>openstack security group rule create --proto tcp --dst-port 8080 SECURITY_GROUP_ID\n</code></pre> <p>The command and response looks like the following</p> <pre><code>openstack security group rule create --proto tcp --dst-port 8080 339bd140-e6a0-4afd-9b24-029c3243e779\n</code></pre> <pre><code>+-------------------------+--------------------------------------+\n| Field                   | Value                                |\n+-------------------------+--------------------------------------+\n| created_at              | 2023-08-10T00:59:36Z                 |\n| description             |                                      |\n| direction               | ingress                              |\n| ether_type              | IPv4                                 |\n| id                      | f0bce470-8d94-453f-9dfa-3e3e34b0c80e |\n| name                    | None                                 |\n| normalized_cidr         | 0.0.0.0/0                            |\n| port_range_max          | 8080                                 |\n| port_range_min          | 8080                                 |\n| project_id              | 4f07cc254d6c4471805d49bae1f739b9     |\n| protocol                | tcp                                  |\n| remote_address_group_id | None                                 |\n| remote_group_id         | None                                 |\n| remote_ip_prefix        | 0.0.0.0/0                            |\n| revision_number         | 0                                    |\n| security_group_id       | 339bd140-e6a0-4afd-9b24-029c3243e779 |\n| tags                    | []                                   |\n| updated_at              | 2023-08-10T00:59:36Z                 |\n+-------------------------+--------------------------------------+\n</code></pre> <p>If you check the rules again, you'll see the new one has been added</p> <pre><code>openstack security group rule list 339bd140-e6a0-4afd-9b24-029c3243e779\n</code></pre> <pre><code>+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n| ID                                   | IP Protocol | Ethertype | IP Range  | Port Range | Direction | Remote Security Group | Remote Address Group |\n+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n| b0f0edd2-7a55-44b4-84a8-9650de36a7ec | None        | IPv6      | ::/0      |            | egress    | None                  | None                 |\n| f0bce470-8d94-453f-9dfa-3e3e34b0c80e | tcp         | IPv4      | 0.0.0.0/0 | 8080:8080  | ingress   | None                  | None                 |\n| f3925a01-5d47-4c55-ac73-1647cca5b739 | None        | IPv4      | 0.0.0.0/0 |            | egress    | None                  | None                 |\n+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-via-cli/#delete-a-security-group-rule","title":"Delete a Security Group rule","text":"<p>First, run the following command to view all Security Groups.</p> <pre><code>openstack security group list\n</code></pre> <pre><code>+--------------------------------------+--------------------------+---------------------------------------------------------+----------------------------------+------+\n| ID                                   | Name                     | Description                                             | Project                          | Tags |\n+--------------------------------------+--------------------------+---------------------------------------------------------+----------------------------------+------+\n| 339bd140-e6a0-4afd-9b24-029c3243e779 | My_Wiki_SG               | A testing group for wiki                                | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| 5150840c-9c27-45a9-91a1-61c5978de8ff | https                    |                                                         | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| 7200b28f-9089-4797-a094-39f1995e6f0c | SSH Allow All            | This is an open SSH that allows anyone to connect to 22 | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| 8873336a-02e6-4f84-8fd8-5aa3b929f955 | hpc-toolset-docker-ports | Docker Ports used for the HPC Toolset                   | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| b24e8bef-969a-4938-8b18-0a33769b181d | kubeapi_whitelist        |                                                         | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| b5d30ed4-13b3-4f7a-bc5a-c48175566ea3 | My-Security-Group        | This is my security group                               | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| f2f15d6f-2a04-4196-8102-a058042694b3 | default                  | Default security group                                  | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n+--------------------------------------+--------------------------+---------------------------------------------------------+----------------------------------+------+\n</code></pre> <p>Locate the Security Group that you wish to remove a rule from and take note of its ID</p> <p>Note</p> <p>For this example we are using <code>339bd140-e6a0-4afd-9b24-029c3243e779</code></p> <p>Running the following command will return all rules associated with that security group.</p> <pre><code>openstack security group rule list 339bd140-e6a0-4afd-9b24-029c3243e779\n</code></pre> <pre><code>+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n| ID                                   | IP Protocol | Ethertype | IP Range  | Port Range | Direction | Remote Security Group | Remote Address Group |\n+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n| b0f0edd2-7a55-44b4-84a8-9650de36a7ec | None        | IPv6      | ::/0      |            | egress    | None                  | None                 |\n| f0bce470-8d94-453f-9dfa-3e3e34b0c80e | tcp         | IPv4      | 0.0.0.0/0 | 8080:8080  | ingress   | None                  | None                 |\n| f3925a01-5d47-4c55-ac73-1647cca5b739 | None        | IPv4      | 0.0.0.0/0 |            | egress    | None                  | None                 |\n+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n</code></pre> <p>Take note of the Security Group Rule ID</p> <p>Note</p> <p>For this example we will use f0bce470-8d94-453f-9dfa-3e3e34b0c80e</p> <p>To delete a rule, run the following command with the correct rule ID.</p> <pre><code>openstack security group rule delete f0bce470-8d94-453f-9dfa-3e3e34b0c80e\n</code></pre> <p>Re-run the list command to confirm the rule has been deleted</p> <pre><code>openstack security group rule list 339bd140-e6a0-4afd-9b24-029c3243e779\n</code></pre> <pre><code>+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n| ID                                   | IP Protocol | Ethertype | IP Range  | Port Range | Direction | Remote Security Group | Remote Address Group |\n+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n| b0f0edd2-7a55-44b4-84a8-9650de36a7ec | None        | IPv6      | ::/0      |            | egress    | None                  | None                 |\n| f3925a01-5d47-4c55-ac73-1647cca5b739 | None        | IPv4      | 0.0.0.0/0 |            | egress    | None                  | None                 |\n+--------------------------------------+-------------+-----------+-----------+------------+-----------+-----------------------+----------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-via-cli/#deleting-a-security-group","title":"Deleting a Security Group","text":"<p>Run the following to delete a Security Group</p> <pre><code>openstack security group delete SECURITY_GROUP_ID\n</code></pre> <p>Warning</p> <p>You cannot delete the <code>default</code> Security Group from your project. It's also not possible to delete a Security Group that is assigned to an instance.</p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-with-the-dashboard/","title":"Create and manage Security groups with the dashboard","text":""},{"location":"user-guides/create-and-manage-networks/manage-security-groups-with-the-dashboard/#the-default-secuirty-group","title":"The Default secuirty group","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Network</code> tab and select the <code>Security Groups</code> category</p> <p>Note</p> <p>We recommend that no new rules are added to the <code>deafult</code> security group to keep things clean and tidy. We also recommend that no rules be removed from this group.</p> <p></p> <p>There are 2 Egress and 2 Ingress rules, each one is associated with either IPv4 or IPv6.</p> <p>The 2 Egress rules allow the resources within the FlexiHPC project to communicate with the outside world.</p> <p>The 2 Ingress rules allow any other resource within the FlexiHPC project that has this security group associated to it is allowed to communicate with each other.</p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-with-the-dashboard/#creating-a-new-security-group","title":"Creating a new Security Group","text":"<p>First start by clicking on <code>Create Security Group</code></p> <p></p> <p>Within the <code>Create Security Group</code> dialog you have the following options.</p> <code>Name</code> A friendly name for your network, this field is requried. <code>Description</code> A friendly description to identify what this is used for <p>Once those have been filled out hit the <code>Create Security Group</code> button and that will take you to the newly created security group</p> <p></p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-with-the-dashboard/#updating-a-security-groups-rules","title":"Updating a Security Groups Rules","text":"<p>We have a few ways of adding new rules to the security groups, either with predefined rules or customs rules.</p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-with-the-dashboard/#using-predefined-rules","title":"Using Predefined Rules","text":"<p>Find the security group that you would like to update the rules for and click <code>Manage Rules</code> under the <code>Action</code> column</p> <p></p> <p>Once in the security group we want to click on <code>Add Rule</code> on the top right</p> <p></p> <p>We are presented with the following dialog that allows us to add new rules based on the direction(Ingress/Egress) that we want to apply the rule. Think of these as Firewall Rules</p> <p></p> <p>There are all ready a few predefined rules that are ready to use if you so chose</p> <p></p> <p>For this example we will create an <code>SSH</code> rule</p> <p></p> <p>We have specified the <code>SSH</code> Rule, given it a description so it explains what it is for other users, we have chosen <code>CIDR</code> as the remote and left the <code>CIDR</code> as <code>Allow All</code>.</p> <p>Info</p> <p>If we changed that CIDR to 192.168.0.0/16 then only machines that reside within that IP Range will be able to pass through this Rule.</p> <p>For the above example we want to be able to SSH to a Compute Service within the FlexiHPC space however the IP that we would be connecting from would be our Public IP, therefore using the above CIDR would actually block our attempts to SSH to the compute service that has this rule applied.</p> <p>If you wish to restrict the Rule to only your Public IP then google whats my ip and use the IP that is provided prefixed with /32</p> <p>Clicking <code>Add</code> will update the Security group with the newly created rule</p> <p></p>"},{"location":"user-guides/create-and-manage-networks/manage-security-groups-with-the-dashboard/#using-custom-rules","title":"Using Custom Rules","text":"<p>Find the security group that you would like to update the rules for and click <code>Manage Rules</code> under the <code>Action</code> column</p> <p></p> <p>Once in the security group we want to click on <code>Add Rule</code> on the top right</p> <p></p> <p>We are presented with the following dialog that allows us to add new rules based on the direction(Ingress/Egress) that we want to apply the rule. Think of these as Firewall Rules</p> <p></p> <p>For this Example rule we will allow port <code>6443</code>.</p> <p>So the things we need to ensure are Rule has been set to <code>Custom TCP Rule</code>, The Direction is <code>Ingress</code> as we are allowing the port into the FlexiHPC space and the Port we would like to allow, in this case <code>6443</code>.</p> <p>We will also leave Remote as <code>CIDR</code> and the <code>CIDR</code> as allow all, as denoted by <code>0.0.0.0/0</code></p> <p></p> <p>We click <code>Add</code> and our rule is now added to the security group</p> <p></p>"},{"location":"user-guides/create-and-manage-networks/summary/","title":"Summary","text":"<ul> <li>Networks: Create and Manage</li> <li>With the Dashboard<ul> <li>Networks</li> <li>Security Groups</li> <li>Network Ports</li> <li>Floating IPs</li> </ul> </li> <li>With the CLI<ul> <li>Networks</li> <li>Security Groups</li> <li>Network Ports</li> <li>Floating IPs</li> </ul> </li> <li>*</li> </ul>"},{"location":"user-guides/create-and-manage-object-storage/","title":"Create and Manage Object Storage","text":"<p>Object Storage within FlexiHPC is a file system storage that is primarily used for storing static data. Unlike other storage systems, object storage is independent of virtual machines and operating system type.</p> <p>You are able to upload and download files from anywhere with network access using a few methods.</p> <p>The general use case for object storage is storing data that you upload once and read or download many times. Its not the best for files that are being modified consistently.</p> <p>There are a few ways to create and mange object storage within FlexiHPC</p> <ul> <li> <p>Creating and Managing object storage via the Dashboard</p> </li> <li> <p>Creating and Managing object storage via CLI</p> </li> </ul> <p>If you are looking to interact with the s3 Protocol then you need to also generate yourself some EC2 credentials</p> <ul> <li>Creating and Managing EC2 credentials</li> </ul> <p>Interacting with the FlexiHPC Object storage can be done a few ways outside of the dashboard.</p> <ul> <li> <p>Interacting with the S3 protocol with Boto3</p> </li> <li> <p>Using FlexiHPC object storage for Terraform state file</p> </li> <li> <p>Accessing object storage with Cyberduck</p> </li> </ul>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-via-cli/","title":"Create and manage object storage via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-via-cli/#create-new-container","title":"Create new container","text":"<p>Running the below command will generate a new container within the projects object storage</p> <pre><code>openstack container create &lt;CONTAINER_NAME&gt;\n</code></pre> <p>You will get a response from the server that looks like the following</p> <pre><code>+-------------+------------------+-----------------------------+\n| account     | container        | x-trans-id                  |\n+-------------+------------------+-----------------------------+\n| AUTH_&lt;GUID&gt; | &lt;CONTAINER_NAME&gt; | tx00000&lt;X_TRANS_GUID&gt;-akl-1 |\n+-------------+------------------+-----------------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-via-cli/#list-containers","title":"List containers","text":"<p>Running the below command will list all containers within the projects object storage</p> <p><pre><code>openstack container list\n</code></pre> <pre><code>+------------------+\n| Name             |\n+------------------+\n| a-test-container |\n| boto3-test       |\n| cli-container    |\n| terraform-state  |\n+------------------+\n</code></pre></p> <p>The command <code>openstack container list</code> also has some additional parameters</p> <code>--prefix &lt;prefix&gt;</code> Filter the list using a prefix, example if we use the prefix <code>a</code> then the only container returned would the <code>a-test-container</code> <code>--marker &lt;marker&gt;</code> Start anchor for paging is used when you wish to return a specified list of containers should you have a lot of them <code>--end-marker &lt;end-marker&gt;</code> End anchor for paging <code>--limit &lt;num-containers&gt;</code> Limit the number of containers returned <code>--long</code> List additional fields in output that contain the amount of space used and number of files inside the container <code>--all</code> List all containers (default is 10000)"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-via-cli/#display-container-details","title":"Display container details","text":"<p>Running the below command will display additional details about the container specified</p> <p><pre><code>openstack container show CONTAINER_NAME\n</code></pre> <pre><code>+----------------+---------------------------------------+\n| Field          | Value                                 |\n+----------------+---------------------------------------+\n| account        | AUTH_&lt;AUTH_TOKEN&gt;                     |\n| bytes_used     | 0                                     |\n| container      | &lt;CONTAINER_NAME&gt;                      |\n| object_count   | 0                                     |\n| storage_policy | default-placement                     |\n+----------------+---------------------------------------+\n</code></pre></p>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-via-cli/#save-container-contents-local","title":"Save container contents local","text":"<p>Running the below command will save all the container contents to your local directory where you run the command</p> <pre><code>openstack container save CONTAINER_NAME\n</code></pre>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-via-cli/#delete-container","title":"Delete container","text":"<p>Run the <code>openstack container list</code> command first to get the name of the container you wish to delete</p> <p><pre><code>openstack container list\n</code></pre> <pre><code>+------------------+\n| Name             |\n+------------------+\n| a-test-container |\n| boto3-test       |\n| cli-container    |\n| terraform-state  |\n+------------------+\n</code></pre></p> <p>Then run the below command to delete the container you wish to remove</p> <pre><code>openstack container delete CONTAINER_NAME\n</code></pre> <p>Your container should then be removed, however should you container contain any files you will get the following error</p> <pre><code>openstack container delete a-test-container\nConflict (HTTP 409) (Request-ID: tx00000a9dff65235cbe523-0064dadec9-a09387f-akl-1)\n</code></pre> <p>Supplying the <code>--recursive, -r</code> parameter will delete all files within that container before deleting it</p> <pre><code>openstack container delete --recursive &lt;CONTAINER_NAME&gt;\n</code></pre>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-with-the-dashboard/","title":"Create and manage object storage via the dashboard","text":""},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-with-the-dashboard/#creating-an-object-storage-container","title":"Creating an object storage container","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Object Storage</code> tab and select the <code>Containers</code> category</p> <p>Click <code>+ Container</code>.</p> <p></p> <p>Within the <code>Create Container</code> dialog you have a few options</p> <code>Container Name</code> A friendly name for your container. It must not contain \u201c/\u201d in its name. <code>Storage Policy</code> This defaults to default-placement and is the only option available at this time. <code>Container Access</code> <p>You have a choice between <code>public</code> or <code>not-public</code></p> <p>A <code>Public</code> container will allow anyone with the public URL to gain access to your objects in the container</p> <p>Once you have given the container a name and decided if its public or private click <code>Submit</code> to create the container.</p>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-with-the-dashboard/#deleting-an-object-storage-container","title":"Deleting an object storage container","text":"<p>Note</p> <p>You are not able to delete a container if there are items present within it. Please delete all items before attempting to delete the container.</p> <p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Object Storage</code> tab and select the <code>Containers</code> category</p> <p>Select the container you would like to delete and it should highlight with blue</p> <p></p> <p>Hovering over the <code>Trashcan Icon</code> should show a tooltip that says Delete Container and clicking it should present a <code>Confirm Delete</code> dialog.</p> <p>If you are certain that you wish to delete the container click <code>Delete</code> and the container should be removed</p>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-with-the-dashboard/#upload-a-file-to-a-storage-object-container","title":"Upload a file to a storage object container","text":"<p>Note</p> <p>Files uploaded into a FlexiHPC storage via the dashboard are saved as a binary/octet-stream which means they are only downloaded when they are requested via the URL.</p> <p>There is also an issue where the public URL provided via the dashboard doesn't auth correctly so you are unable to view/download files. </p> <p>The URL that currently works should you wish to view/download a file from object storage looks like the following https://object.akl-1.cloud.nesi.org.nz/CONTAINER_NAME/FILE_NAME</p> <p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Object Storage</code> tab and select the <code>Containers</code> category</p> <p>Select the container you would like to delete and it should highlight with blue</p> <p></p> <p>On the far right there should be 3 icons, <code>Upload File</code> <code>+ Folder</code> and <code>Delete Item</code></p> <p>Click the <code>Upload File</code> icon and within the <code>Upload File</code> dialog clicking <code>Choose File</code> should allow you to browse to the file on your local machine. You are also able to give it a different name should you so choose.</p> <p></p> <p>Clicking <code>Upload File</code> will now begin to upload that file to the object storage container. The time it takes to complete the upload will depend on the file size and the network upload speed.</p>"},{"location":"user-guides/create-and-manage-object-storage/create-and-manage-object-storage-with-the-dashboard/#create-a-folder-like-structure-in-an-object-storage-container","title":"Create a folder like structure in an object storage container","text":"<p>We say folder like structure as that is what it looks like from the dashboards perspective, however under lying this the structure is flat.</p> <p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Object Storage</code> tab and select the <code>Containers</code> category</p> <p>Select the container you would like to delete and it should highlight with blue</p> <p></p> <p>On the far right there should be 3 icons, <code>Upload File</code> <code>+ Folder</code> and <code>Delete Item</code></p> <p>Clicking <code>+ Folder</code> will present you with the <code>Create Folder</code> dialog.</p> <p>Fill in the Folder Name and click <code>Create Folder</code></p>"},{"location":"user-guides/create-and-manage-object-storage/creating-and-managing-ec2-credentials-via-cli/","title":"Creating and Managing EC2 Credentials via CLI","text":""},{"location":"user-guides/create-and-manage-object-storage/creating-and-managing-ec2-credentials-via-cli/#overview","title":"Overview","text":"<p>For using the OpenStack S3 API:s you need to generate an additional set of credentials. These can then be used to store data in the Swift Object store for applications that don\u2019t have native Swift support but do support the S3 interfaces.</p> <p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/create-and-manage-object-storage/creating-and-managing-ec2-credentials-via-cli/#create-and-fetch-credentials-using-the-cli","title":"Create and fetch credentials using the CLI","text":"<p>Running the below command will generate EC2 credentials</p> <pre><code>openstack ec2 credentials create\n</code></pre> <p>With the following ouput</p> <pre><code>+------------+----------------------------------------------------------------------------------------------------------------+\n| Field      | Value                                                                                                          |\n+------------+----------------------------------------------------------------------------------------------------------------+\n| access     | &lt;USER_ACCESS_TOKEN&gt;                                                                                            |\n| links      | {'self': 'https://keystone.akl-1.cloud.nesi.org.nz/v3/users/&lt;USER_ID&gt;/credentials/OS-EC2/&lt;USER_ACCESS_TOKEN&gt;'} |\n| project_id | &lt;PROJECT_ID&gt;                                                                                                   |\n| secret     | &lt;USERS_SECRET_TOKEN&gt;                                                                                           |\n| trust_id   | None                                                                                                           |\n| user_id    | &lt;USER_ID&gt;                                                                                                      |\n+------------+----------------------------------------------------------------------------------------------------------------+\n</code></pre> <p>Note the <code>access</code> field and the <code>secret</code> field. These are the 2 fields required to interact with the s3 protocol.</p> <p>The below command will fetch all EC2 credentails associated with the user</p> <pre><code>openstack ec2 credentials list\n</code></pre> <pre><code>+---------------------+----------------------+--------------+-----------+\n| Access              | Secret               | Project ID   | User ID   |\n+---------------------+----------------------+--------------+-----------+\n| &lt;USER_ACCESS_TOKEN&gt; | &lt;USERS_SECRET_TOKEN&gt; | &lt;PROJECT_ID&gt; | &lt;USER_ID&gt; |\n+---------------------+----------------------+--------------+-----------+\n</code></pre>"},{"location":"user-guides/create-and-manage-object-storage/creating-and-managing-ec2-credentials-via-cli/#delete-credentials-using-the-cli","title":"Delete credentials using the CLI","text":"<p>Use the access key to refer to the credentials you wish to delete:</p> <pre><code>openstack ec2 credentials delete USER_ACCESS_TOKEN\n</code></pre>"},{"location":"user-guides/create-and-manage-object-storage/summary/","title":"Summary","text":"<ul> <li>Object Storage: Create and Manage</li> <li>With the Dashboard<ul> <li>Create and Manage</li> </ul> </li> <li>With the CLI<ul> <li>Create and Manage</li> </ul> </li> <li>Creating and Managing EC2 credentials</li> <li>Interacting with the S3 protocol with Boto3</li> <li>Accessing object storage with Cyberduck</li> <li>*</li> </ul>"},{"location":"user-guides/create-and-manage-object-storage/using-boto3-to-interact-with-object-storage/","title":"Interacting with the S3 protocol with Boto3","text":""},{"location":"user-guides/create-and-manage-object-storage/using-boto3-to-interact-with-object-storage/#interacting-with-the-s3-protocol-with-boto3","title":"Interacting with the S3 protocol with Boto3","text":"<p>Note</p> <p>Prior to starting this you will need to have read Setting up your CLI environment and ran the commands to generate EC2 Credentials</p> <p>Boto3 documentation can be found here</p> <p>Since FlexiHPC object storage has the S3 protocol built on top of it you are able to use the python boto3 client to interact with it.</p> <p>When doing python development it is recommend that you do so within a python venv. As this article wont be covering what a python venv is please have a read of the the following documentation on the python website</p> <p>Ensure your in a clean folder, for this example we will be in a new folder called <code>FLEXIHPC.Boto3.Example</code></p> <p>Once inside that folder we will make a python venv by ruining the below command</p> <pre><code>python3 -m venv boto3-dev\n</code></pre> <p>Once that has completed setting up the venv we want to activate that</p> <pre><code>. boto3-dev/bin/activate\n</code></pre> <p>We then need to bring in the boto3 module for python</p> <pre><code>pip3 install boto3\n</code></pre> <p>This will also bring in any other required modules.</p> <p>Create a file called <code>main.py</code> and add the following to that file</p> <pre><code>import boto3\nimport botocore\n\n#boto3.set_stream_logger(name='botocore')  # this enables debug tracing\nsession = boto3.session.Session()\ns3_client = session.client(\n    service_name='s3',\n    aws_access_key_id='EC2_ACCESS_TOKEN',\n    aws_secret_access_key='EC2_SECRET_TOKEN',\n    endpoint_url='https://object.akl-1.cloud.nesi.org.nz/',\n    config=botocore.client.Config(signature_version='s3v4')\n)\n\n#List all buckets in the project\nbucketsResponse = s3_client.list_buckets()\n\nprint('Buckets:')\nfor bucket in bucketsResponse['Buckets']:\n    print(f'  {bucket[\"Name\"]}')\n</code></pre> <p>You will need to change <code>EC2_ACCESS_TOKEN</code> and <code>EC2_SECRET_TOKEN</code> to the ones that were generated when you ran the commands to generate EC2 Credentials</p> <p>Save the file and call it using the python command</p> <pre><code>python3 main.py\n</code></pre> <p>The output should look similar to the below</p> <pre><code>Buckets:\n  boto3-test\n  terraform-state\n</code></pre>"},{"location":"user-guides/create-and-manage-object-storage/using-boto3-to-interact-with-object-storage/#uploading-a-file-to-object-storage","title":"Uploading a file to object storage","text":"<p>You will need to know the name of the container you wish to upload the file too. You can either get this from the dashboard or CLI</p> <p>We then use the below code to upload a file to the container we specify</p> <pre><code>s3_client.upload_file(&lt;FILE_LOCATION&gt;, &lt;BUCKET_NAME&gt;, &lt;FILENAME_ON_S3&gt;)\n</code></pre> <code>&lt;FILE_LOCATION&gt;</code> The local location of the file you wish to upload to FlexiHPC object storage <code>&lt;BUCKET_NAME&gt;</code> The container name within FlexiHPC, example would be boto3-test <code>&lt;FILENAME_ON_S3&gt;</code> The name of the file as it would be presented on the FlexiHPC object storage"},{"location":"user-guides/create-and-manage-object-storage/using-boto3-to-interact-with-object-storage/#downloading-a-file-from-object-storage","title":"Downloading a file from object storage","text":"<p>You will need to know the name of the container you wish to download the file from. You can either get this from the dashboard or CLI</p> <p>We use the below code to download a file from the container we specify</p> <pre><code>with open('&lt;FILENAME_ON_S3&gt;', 'wb') as data:\n    s3_client.download_fileobj('&lt;BUCKET_NAME&gt;', '&lt;FILENAME_KEY&gt;', data)\n</code></pre> <code>&lt;FILENAME_ON_S3&gt;</code> The name of the file as it would be presented on the FlexiHPC object storage <code>&lt;BUCKET_NAME&gt;</code> The container name within FlexiHPC, example would be boto3-test <code>&lt;FILENAME_KEY&gt;</code> This is generally the <code>&lt;FILENAME_ON_S3&gt;</code> however if its inside a folder then it might have that appended to the file name"},{"location":"user-guides/create-and-manage-object-storage/using-cyberduck-to-interact-with-object-storage/","title":"Accessing object storage with Cyberduck","text":""},{"location":"user-guides/create-and-manage-object-storage/using-cyberduck-to-interact-with-object-storage/#accessing-object-storage-with-cyberduck","title":"Accessing object storage with Cyberduck","text":"<p>Note</p> <p>You will need EC2 credentials to use Cyberduck</p> <p>Cyberduck is a libre server and cloud storage browser for Mac and Windows with support for FTP, SFTP, WebDAV, Amazon S3, OpenStack Swift, Backblaze B2, Microsoft Azure &amp; OneDrive, Google Drive and Dropbox.</p>"},{"location":"user-guides/create-and-manage-object-storage/using-cyberduck-to-interact-with-object-storage/#installation","title":"Installation","text":"<p>Cyberduck can be downloaded and installed from the Cyberduck website. You can also get it from the Windows Store or the Apple Mac App Store. Instructions for installing can be found at the respective locations.</p>"},{"location":"user-guides/create-and-manage-object-storage/using-cyberduck-to-interact-with-object-storage/#connecting-using-cyberduck","title":"Connecting using Cyberduck","text":"<p>Once Cyberduck is installed you will want to start it and click on <code>Open Connection</code></p> <p></p> <p>Within the <code>Open Connection</code> dialog you will want to ensure that the dropdown has selected <code>Amazon S3</code></p> <p></p> <p>We then need to update the details to interact and auth with FlexiHPC</p> <code>Server</code> Server should be updated to <code>object.akl-1.cloud.nesi.org.nz</code> and the port should be 443 <code>Access Key ID</code> This should be the EC2 Credentials Access key token <code>Secret Access Key</code> This should be the EC2 Credentials Secret key token <p></p> <p>Click on <code>Connect</code> to open the connection</p> <p></p>"},{"location":"user-guides/create-and-manage-volumes/","title":"Create and manage volumes","text":"<p>Volumes are block storage devices that you attach to instances to enable persistent storage. You can attach a volume to a running instance or detach a volume and attach it to another instance at any time. You can also create a snapshot from or delete a volume.</p> <p>Volumes can be created a few ways</p> <ul> <li> <p>Create and manage volumes via the dashboard</p> </li> <li> <p>Create and manage volumes via CLI</p> </li> </ul>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-via-cli/","title":"Create and manage volumes via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-via-cli/#create-an-empty-volume","title":"Create an empty volume","text":"<p>Running the following command will create a volume with 8 gibibytes (GiB) of space, and specify the availability zone. This is creates an empty volume that does not contain a file system or a partition table:</p> <pre><code>openstack volume create --size 8 --availability-zone nova my-new-volume\n</code></pre> <pre><code>+---------------------+--------------------------------------+\n| Field               | Value                                |\n+---------------------+--------------------------------------+\n| attachments         | []                                   |\n| availability_zone   | nova                                 |\n| bootable            | false                                |\n| consistencygroup_id | None                                 |\n| created_at          | 2023-08-04T03:40:29.634209           |\n| description         | None                                 |\n| encrypted           | False                                |\n| id                  | f297c807-1eb3-4b48-8438-04d995ca498a |\n| multiattach         | False                                |\n| name                | my-new-volume                        |\n| properties          |                                      |\n| replication_status  | None                                 |\n| size                | 8                                    |\n| snapshot_id         | None                                 |\n| source_volid        | None                                 |\n| status              | creating                             |\n| type                | ceph-ssd                             |\n| updated_at          | None                                 |\n| user_id             | fb9a3d02c89e4cfdbe64658ad43ece97     |\n+---------------------+--------------------------------------+\n</code></pre> <p>To verify that your volume was created successfully, list the available volumes:</p> <pre><code>openstack volume list\n</code></pre> <pre><code>+--------------------------------------+---------------+-----------+------+-------------+\n| ID                                   | Name          | Status    | Size | Attached to |\n+--------------------------------------+---------------+-----------+------+-------------+\n| f297c807-1eb3-4b48-8438-04d995ca498a | my-new-volume | available |    8 |             |\n+--------------------------------------+---------------+-----------+------+-------------+\n</code></pre> <p>If your volume was created successfully, its status is <code>available</code>. If its status is <code>error</code>, you might have exceeded your quota.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-via-cli/#attach-a-volume-to-an-instance","title":"Attach a volume to an instance","text":"<p>Attach your volume to a server, specifying the server ID and the volume ID:</p> <pre><code>openstack server add volume &lt;COMPUTE INSTANCE ID&gt; &lt;VOLUME ID&gt; --device /dev/vdb\n</code></pre> <p>Show information for your volume:</p> <pre><code>openstack volume show f297c807-1eb3-4b48-8438-04d995ca498a\n</code></pre> <p>The output shows that the volume is attached to the server with ID <code>84c6e57d-a6b1-44b6-81eb-fcb36afd31b5</code>, is in the nova availability zone, and is bootable.</p> <pre><code>+------------------------------+--------------------------------------+\n| Field                        | Value                                |\n+------------------------------+--------------------------------------+\n| attachments                  | [{u'device': u'/dev/vdb',            |\n|                              |        u'server_id': u'84c6e57d-a    |\n|                              |           u'id': u'573e024d-...      |\n|                              |        u'volume_id': u'573e024d...   |\n| availability_zone            | nova                                 |\n| bootable                     | false                                |\n| consistencygroup_id          | None                                 |\n| created_at                   | 2023-08-04T03:40:29.000000           |\n| description                  | None                                 |\n| encrypted                    | False                                |\n| id                           | f297c807-1eb3-4b48-8438-04d995ca498a |\n| multiattach                  | False                                |\n| name                         | my-new-volume                        |\n| os-vol-tenant-attr:tenant_id | 4f07cc254d6c4471805d49bae1f739b9     |\n| properties                   |                                      |\n| replication_status           | None                                 |\n| size                         | 8                                    |\n| snapshot_id                  | None                                 |\n| source_volid                 | None                                 |\n| status                       | available                            |\n| type                         | ceph-ssd                             |\n| updated_at                   | 2023-08-04T03:40:29.000000           |\n| user_id                      | fb9a3d02c89e4cfdbe64658ad43ece97     |\n+------------------------------+--------------------------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-via-cli/#detach-a-volume-from-an-instance","title":"Detach a volume from an instance","text":"<p>Detach your volume from a server, specifying the server ID and the volume ID:</p> <pre><code>openstack server remove volume &lt;COMPUTE INSTANCE ID&gt; &lt;VOLUME ID&gt;\n</code></pre> <p>Show information for your volume:</p> <pre><code>openstack volume show f297c807-1eb3-4b48-8438-04d995ca498a\n</code></pre> <p>The output shows that the volume is no longer attached to the server:</p> <pre><code>+------------------------------+--------------------------------------+\n| Field                        | Value                                |\n+------------------------------+--------------------------------------+\n| attachments                  | []                                   |\n| availability_zone            | nova                                 |\n| bootable                     | false                                |\n| consistencygroup_id          | None                                 |\n| created_at                   | 2023-08-04T03:40:29.000000           |\n| description                  | None                                 |\n| encrypted                    | False                                |\n| id                           | f297c807-1eb3-4b48-8438-04d995ca498a |\n| multiattach                  | False                                |\n| name                         | my-new-volume                        |\n| os-vol-tenant-attr:tenant_id | 4f07cc254d6c4471805d49bae1f739b9     |\n| properties                   |                                      |\n| replication_status           | None                                 |\n| size                         | 8                                    |\n| snapshot_id                  | None                                 |\n| source_volid                 | None                                 |\n| status                       | available                            |\n| type                         | ceph-ssd                             |\n| updated_at                   | 2023-08-04T03:40:29.000000           |\n| user_id                      | fb9a3d02c89e4cfdbe64658ad43ece97     |\n+------------------------------+--------------------------------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-via-cli/#resize-a-volume","title":"Resize a volume","text":"<p>To resize your volume, you must first detach it from the server if it is current. To detach the volume from your server, pass the server ID and volume ID to the following command:</p> <pre><code>openstack server remove volume &lt;COMPUTE INSTANCE ID&gt; &lt;VOLUME ID&gt;\n</code></pre> <p>This command does not provide any output.</p> <pre><code>openstack volume list\n</code></pre> <pre><code>+--------------------------------------+---------------+-----------+------+-------------+\n| ID                                   | Name          | Status    | Size | Attached to |\n+--------------------------------------+---------------+-----------+------+-------------+\n| f297c807-1eb3-4b48-8438-04d995ca498a | my-new-volume | available |    8 |             |\n+--------------------------------------+---------------+-----------+------+-------------+\n</code></pre> <p>Note that the volume is now available.</p> <p>Resize the volume by passing the volume ID and the new size (a value greater than the old one) as parameters:</p> <pre><code>openstack volume set f297c807-1eb3-4b48-8438-04d995ca498a --size 10\n</code></pre> <p>This command does not provide any output.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-via-cli/#delete-a-volume","title":"Delete a volume","text":"<p>To delete your volume, you must first detach it from the server. Delete the volume the volume ID:</p> <pre><code>openstack volume delete f297c807-1eb3-4b48-8438-04d995ca498a\n</code></pre> <p>This command does not provide any output.</p> <p>List the volumes again, and note that the status of your volume is <code>deleting</code>:</p> <pre><code>openstack volume list\n</code></pre> <pre><code>+----------------+-----------------+-----------+------+-------------+\n|       ID       |   Display Name  |  Status   | Size | Attached to |\n+----------------+-----------------+-----------+------+-------------+\n| f297c807-1e... |  my-new-volume  |  deleting |  8   |             |\n+----------------+-----------------+-----------+------+-------------+\n</code></pre> <p>When the volume is fully deleted, it disappears from the list of volumes:</p> <pre><code>+--------------------------------------+------+-----------+------+-------------+\n| ID                                   | Name | Status    | Size | Attached to |\n+--------------------------------------+------+-----------+------+-------------+\n| d0d686e9-bcfe-499b-850d-50f4a998ad81 |      | available |   30 |             |\n+--------------------------------------+------+-----------+------+-------------+\n</code></pre>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-with-the-dashboard/","title":"Create and manage volumes via the dashboard","text":""},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-with-the-dashboard/#create-a-volume","title":"Create a volume","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Volume</code> tab and select the <code>Volumes</code> category</p> <p>Click <code>Create Volume</code>.</p> <p>In the dialog box that opens, enter or select the following values.</p> <code>Volume Name</code> Specify a name for the volume. <code>Description</code> Optionally, provide a brief description for the volume. <code>Volume Source</code> <p>Select one of the following options</p> <ul> <li> <code>No source, empty volume</code> Creates an empty volume. An empty volume does not contain a file system or a partition table. </li> <li> <code>Image</code> If you choose this option, a new field for Use image as a source displays. You can select the image from the list. </li> <li> <code>Volume</code> If you choose this option, a new field for Use volume as a source displays. You can select the volume from the list. Options to use a snapshot or a volume as the source for a volume are displayed only if there are existing snapshots or volumes. </li> </ul> <code>Type</code> <p>Select one of the following options:</p> <ul> <li> <code>ceph-ssd</code> Flash based storage, this has the fastest read and write speeds however is generally priced higher </li> <li> <code>ceph-hdd</code> Spinning disk based storage, this has the slow read and write speeds compared to flash based however it is generally priced lower then flash based storage </li> <li> <code>ceph-ssd-encrypted</code> Flash based storage that is further encrypted </li> <li> <code>ceph-hdd-encrypted</code> Spinning disk based storage that is further encrypted </li> </ul> <p>Note</p> <p>All storage types are encrypted on the FlexiHPC based systems, the encrypted drives are an option to further encrypt the volume </p> <code>Size (GB)</code> The size of the volume in gibibytes (GiB). <code>Availability Zone</code> By default this will be nova. This specifies which zone it will be deployed too if there were multiple zones. The current default and only zone is nova at this point in time. <p>Click <code>Create Volume</code></p> <p>The dashboard shows the volume on the <code>Volumes</code> tab.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-with-the-dashboard/#attach-a-volume-to-an-instance","title":"Attach a volume to an instance","text":"<p>After you create one or more volumes, you can attach them to instances. You can attach a volume to one instance at a time.</p> <p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Volume</code> tab and select the <code>Volumes</code> category</p> <p>Select the volume to add to an instance, expand the <code>Actions</code> column and click <code>Manage Attachments</code>.</p> <p>In the <code>Manage Volume Attachments</code> dialog box, select an instance.</p> <p>Click <code>Attach Volume</code></p> <p>The dashboard shows the instance to which the volume is now attached and the device name.</p> <p>You can view the status of a volume in the Volumes tab of the dashboard. The volume is either Available or In-Use.</p> <p>Now you can log in to the instance and mount, format, and use the disk.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-with-the-dashboard/#detach-a-volume-from-an-instance","title":"Detach a volume from an instance","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Volume</code> tab and select the <code>Volumes</code> category</p> <p>Select the volume to add to an instance, expand the <code>Actions</code> column and click <code>Manage Attachments</code>.</p> <p>Click <code>Detach Volume</code> and confirm your changes.</p> <p>A message indicates whether the action was successful.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-with-the-dashboard/#create-a-snapshot-from-a-volume","title":"Create a snapshot from a volume","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Volume</code> tab and select the <code>Volumes</code> category</p> <p>Select the volume, expand the <code>Actions</code> column and click <code>Create Snapshot</code>.</p> <p>In the dialog box that opens, enter a snapshot name and a brief description.</p> <p>Confirm your changes.</p> <p>The dashboard shows the new volume snapshot in Volume Snapshots tab.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-with-the-dashboard/#edit-a-volume","title":"Edit a volume","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Volume</code> tab and select the <code>Volumes</code> category</p> <p>Select the volume, expand the <code>Actions</code> column and click <code>Edit Volume</code>.</p> <p>In the <code>Edit Volume</code> dialog box, update the name and description of the volume.</p> <p>Click <code>Edit Volume</code>.</p> <p>Note</p> <p>You can extend a volume by using the Extend Volume option available in the Actions dropdown list and entering the new value for volume size.</p>"},{"location":"user-guides/create-and-manage-volumes/create-and-manage-volumes-with-the-dashboard/#delete-a-volume","title":"Delete a volume","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Volume</code> tab and select the <code>Volumes</code> category</p> <p>Select the check boxes for the volumes that you want to delete.</p> <p>Click <code>Delete Volumes</code> and confirm your choice.</p> <p>A message indicates whether the action was successful.</p>"},{"location":"user-guides/create-and-manage-volumes/format-and-mount-volumes/","title":"Format and Mount a Volume","text":"<p>Warning</p> <p>Formatting a device/volume erases all existing data on a device, if a file system already exists on the target device/volume. If you need to retain the data on your volume, you should skip to the mount section below.</p> <p>Note</p> <p>This guide is based on a linux and is using Ubuntu as the Linux distro, however these commands are generic for most linux distros</p> <p>You can verify that the volume is attached to your instance via the NeSI RDC dashboard under <code>Project</code> &gt; <code>Volumes</code> &gt; <code>Volumes</code></p> <p></p> <p>Connect to the instance with the attached Volume and using the command <code>lsblk</code> it should have an output similar to the following</p> <pre><code>$ lsblk\nNAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS\nloop0    7:0    0  40.8M  1 loop /snap/snapd/20092\nloop1    7:1    0 111.9M  1 loop /snap/lxd/24322\nloop2    7:2    0  63.5M  1 loop /snap/core20/2015\nloop3    7:3    0     0B  0 loop \nloop4    7:4    0     0B  0 loop \nloop5    7:5    0     0B  0 loop \nloop6    7:6    0     0B  0 loop \nloop7    7:7    0     0B  0 loop \nsr0     11:0    1   482K  0 rom  \nvda    252:0    0    80G  0 disk \n\u2514\u2500vda1 252:1    0    80G  0 part /\nvdb    252:16   0    10G  0 disk \n</code></pre> <p>If we reference that output with the dashboard we can see the following drives:</p> <pre><code>vda = my_ubuntu_volume\nvdb = test-volume\n</code></pre>"},{"location":"user-guides/create-and-manage-volumes/format-and-mount-volumes/#format-a-volume","title":"Format a volume","text":"<p>Depending on how you created your volume, it may not have a file system and you need to create one before mounting, i.e. format the device. The exact format command syntax is dependent on the virtual machine\u2019s operating system and the type of file system you need. The example below formats the volume attached as <code>/dev/vdb</code> in the Ubuntu-based instance using the <code>ext4</code> filesystem.</p> <pre><code>sudo mkfs -t ext4 /dev/vdb\n</code></pre> <p>Warning</p> <p>Ensure that your drive path is the drive that you wish to format, picking the wrong one my result in data loss</p> <p>To make your volume/device available to the operating system you need to mount it on a directory called a mount point. You can mount your device using an in-memory-only mount, but the mount will be lost upon rebooting your instance. We recommend you configure the mounting of your device/volume filesystem persistently using the configuration file <code>/etc/fstab</code>. In both examples we will create a mount point called <code>/mnt-vol</code>.</p>"},{"location":"user-guides/create-and-manage-volumes/format-and-mount-volumes/#in-memory-only-mount","title":"In memory only mount","text":"<p>You can use below commands to create a mount point called <code>/mnt-vol</code> and to mount the device <code>/dev/vdb</code> at that mount point.</p> <pre><code>sudo mkdir /mnt-vol\nsudo mount /dev/vdb /mnt-vol -t auto\n</code></pre> <p>Note</p> <p>On reboot this mount will be lost and the <code>mount</code> command will need to be run again</p>"},{"location":"user-guides/create-and-manage-volumes/format-and-mount-volumes/#using-etcfstab","title":"Using /etc/fstab","text":"<p>To ensure that your Volume is remounted after a reboot of your instance, you should configure it in the file <code>/etc/fstab</code>.</p> <p>First create the mount point <code>/mnt-vol</code> using:</p> <pre><code>sudo mkdir /mnt-vol\n</code></pre> <p>When we mount drives in the <code>fstab</code> file its higly recommended that we do so using the drives UUID, we can find the UUID of the drive a few ways. We will use the command <code>blkid</code></p> <pre><code>sudo blkid /dev/vdb\n</code></pre> <p>Sample output:</p> <pre><code>$ sudo blkid /dev/vdb\n/dev/vdb: UUID=\"238c1032-4fcb-4dd7-86a2-957d3fc10201\" BLOCK_SIZE=\"4096\" TYPE=\"ext4\"\n</code></pre> <p>Then use a text editor to open the <code>/etc/fstab</code>file. You can do this with the command below. We are using the nano text editor in this example but you can use whichever text editor your prefer, just replace nano with the name of the text editor (Vim etc).</p> <pre><code>sudo nano /etc/fstab\n</code></pre> <p>You can then add the following line to <code>/etc/fstab</code>. The <code>/dev/vdb</code> is the device you\u2019re mounting and <code>/mnt-vol</code> is the its target mount point.</p> <p>The syntax that we want to use looks like the following </p> <pre><code>UUID={YOUR-UID} {/path/to/mount/point}  {file-system-type}  defaults,nofail 0 2\n</code></pre> <p>Using our example UUID from the ouput of the command <code>blkid</code> it should look like this</p> <pre><code>UUID=238c1032-4fcb-4dd7-86a2-957d3fc10201 /mnt-vol ext4 defaults,nofail 0 2\n</code></pre> <p>This is appended to the <code>/etc/fstab</code> file.</p> <p>The example <code>fstab</code> file looks like this</p> <pre><code>LABEL=cloudimg-rootfs / ext4 defaults 0 1\nUUID=238c1032-4fcb-4dd7-86a2-957d3fc10201 /mnt-vol ext4 defaults,nofail 0 2\n</code></pre> <p>Save that file and after adjusting the <code>/etc/fstab</code> file you need to initiate any changes.</p> <p>Use the mount all command:</p> <pre><code>sudo mount --all\n</code></pre> <p>We can verify the mounted volume by running the command <code>lsblk</code> again</p> <pre><code>$ lsblk\nNAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS\nloop0    7:0    0  40.8M  1 loop /snap/snapd/20092\nloop1    7:1    0 111.9M  1 loop /snap/lxd/24322\nloop2    7:2    0  63.5M  1 loop /snap/core20/2015\nsr0     11:0    1   482K  0 rom  \nvda    252:0    0    80G  0 disk \n\u2514\u2500vda1 252:1    0    80G  0 part /\nvdb    252:16   0    10G  0 disk /mnt-vol\n</code></pre> <p>We can see that the volume <code>vdb</code> is mounted at the path <code>/mnt-vol</code></p> <p>You may have to change ownership or write privileges to enable writing to the ephemeral storage, using chown, chgrp or chmod, e.g.</p> <pre><code>sudo chown ubuntu:ubuntu /mnt-vol\n</code></pre>"},{"location":"user-guides/create-and-manage-volumes/summary/","title":"Summary","text":"<ul> <li>Volumes: Create and Manage</li> <li>With the Dashboard<ul> <li>Create and Manage</li> </ul> </li> <li>With the CLI<ul> <li>Create and Manage</li> </ul> </li> <li>Format and Mount Volume</li> <li>*/</li> </ul>"},{"location":"user-guides/launch-and-mange-instances/","title":"Launch and mange instances","text":"<p>Instances are virtual machines that run inside of the FlexiHPC cloud space.</p> <p>FlexiHPC offers 2 ways to Launch and instance on the platform:</p> <ul> <li>Launch an Instance via Dashboard</li> </ul> <p>This is the most user friendly way to get up and running as its all done via the FlexiHPC dashboard. </p> <ul> <li>Launch an Instance via CLI</li> </ul> <p>This is a more advance way of interacting with the FlexiHPC platform. It requires some environment setup however it gives you the most control over the your project within the platform.</p> <p>After reading one of the above you should be able to connect to the instance using ssh by following Connecting to your instance with SSH</p>"},{"location":"user-guides/launch-and-mange-instances/#resizing-an-instance","title":"Resizing an Instance","text":"<p>Resizing an instance allows you to scale the instance either up, if your workload requires a bit more grunt, or down, should you no longer need to consume a large amount of resources.</p> <p>FlexiHPC allows you to resize and instance in 2 ways</p> <ul> <li> <p>Resizing an instance via the dashboard</p> </li> <li> <p>Resizing an instance via CLI</p> </li> </ul>"},{"location":"user-guides/launch-and-mange-instances/connect-to-instance-ssh/","title":"Connect to your instance by using SSH","text":"<p>To use SSH to connect to your instance, use the downloaded keypair file. You will also need to ensure you have created and assigned a <code>Security group</code> to your instance that allows connections on port 22.</p> <p>Read Create and Manage Security Groups via Dashboard or CLI to create one that allows port 22 if you have not done so already. You will then need to add that to the Instance if you havent already via the Dashboard or CLI</p> <p>Note</p> <p>The user name is <code>ubuntu</code> for the Ubuntu cloud images on FlexiHPC. We have a list of default users for the most common cloud images in Default user for images</p> <p>Insure your instance has a <code>floating ip</code> associated with it. If you need to assign one then check the following Assign Floating IP to an Instance via the Dashboard</p> <p>Copy the <code>floating ip</code> address for your instance.</p> <p>Use the ssh command to make a secure connection to the instance. For example:</p> <pre><code>ssh -i MyKey.pem ubuntu@10.0.0.2\n</code></pre> <p>Note</p> <p>A <code>MyKey.pem</code> private key is a key kept secret by the SSH user on their client machine. The user must never reveal the private key to anyone, including the server (server administrator), to ensure the their identity is never compromised. Please look at Create and Manage Keypairs to create or import a keypair for use on the RDC</p> <p>At the prompt, type <code>yes</code>.</p>"},{"location":"user-guides/launch-and-mange-instances/default-user-nesi-images/","title":"Launch and mange instances","text":"<p>The following images provided to the Research Developer Cloud by NeSI all have the following default username when using ssh to connect</p> <code>Ubuntu</code> The default user is <code>ubuntu</code> <code>CentOS</code> The default user is <code>centos</code> <code>FedoraCoreOS</code> The default user is <code>core</code> <code>Rocky</code> The default user is <code>cloud-user</code> <code>Rocky-Cloud</code> The default user is <code>rocky</code>"},{"location":"user-guides/launch-and-mange-instances/deployment-of-an-instance-with-terraform/","title":"Deployment of an instance with Terraform","text":"<p>Note</p> <p>You will need to have Terraform installed on the machine that will be executing the commands. Follow the Install Terraform link from the official documentation. We also highly recommend that you use Application Credentials to do any automation</p> <p>Please make sure you have download the <code>clouds.yaml</code> file for your application credentials and its sitting in the directory <code>~/.config/openstack/</code></p> <p>Generating Application Credentials is covered here</p> <p>Normally creating a folder space for Terraform projects can be a good thing as this ensures the Terraform state file doesn't clash with another.</p> <p>Once you are in an empty folder, example <code>terraform-example-flexihpc</code>, we will need to create a file called <code>main.tf</code></p> <p>Inside this file we will need to define the provider</p> <pre><code>provider \"openstack\" {\n  cloud = \"NAME_IN_CLOUDS_YAML\"\n}\n</code></pre> <p>Replace the placeholder <code>NAME_IN_CLOUDS_YAML</code> with the name of your openstack section in the clouds.yaml file. An example <code>clouds.yaml</code> with multiple entries looks like the following:</p> <p><pre><code>clouds:\n  openstack-entry-1:\n    auth:\n      auth_url: https://keystone.akl-1.cloud.nesi.org.nz\n      application_credential_id: \"APP_CREDS_ID\"\n      application_credential_secret: \"APP_CREDS_SECRET\"\n    interface: \"public\"\n    identity_api_version: 3\n    auth_type: \"v3applicationcredential\"\n    verify: false\n  openstack-entry-2:\n    auth:\n      auth_url: https://keystone.akl-1.cloud.nesi.org.nz\n      application_credential_id: \"APP_CREDS_ID\"\n      application_credential_secret: \"APP_CREDS_SECRET\"\n    region_name: \"akl-1\"\n    interface: \"public\"\n    identity_api_version: 3\n    auth_type: \"v3applicationcredential\"\n    verify: false\n</code></pre> You will want to be using the name <code>openstack-entry-X</code> as your the value in <code>NAME_IN_CLOUDS_YAML</code></p> <p>Then within the same file we want to define the compute instance</p> <pre><code>resource \"openstack_compute_instance_v2\" \"compute_instance\" {\n  name            = \"compute-instance-0\"\n  flavor_id       = \"FLEXIHPC_FLAVOR_ID\"\n  image_id        = \"FLEXIHPC_IMAGE_ID\"\n  key_pair        = \"FLEXIHPC_KEY_PAIR_NAME\"\n  security_groups = [\"FLEXIHPC_SECURITY_GROUP_NAME\"]\n\n  network {\n    name = \"FLEXIHPC_NETWORK_NAME\"\n  }\n}\n</code></pre> <p>Replace the placeholders <code>FLEXIHPC_FLAVOR_ID</code>, <code>FLEXIHPC_IMAGE_ID</code>, <code>FLEXIHPC_KEY_PAIR_NAME</code>, <code>FLEXIHPC_SECURITY_GROUP_NAME</code>, and <code>FLEXIHPC_NETWORK_NAME</code> with appropriate values from your OpenStack environment.</p> <p>The network name is normally the same as your FlexiHPC project name.</p> <p>Then we want to apply a floating IP to the instance so we can connect from outside the FlexiHPC platform</p> <pre><code>resource \"openstack_networking_floatingip_v2\" \"floating_ip\" {\n  pool = \"external\"\n}\n\nresource \"openstack_compute_floatingip_associate_v2\" \"floating_ip_association\" {\n  floating_ip = openstack_networking_floatingip_v2.floating_ip.address\n  instance_id = openstack_compute_instance_v2.compute_instance.id\n}\n</code></pre> <p>The floating IP pool is <code>external</code> within the FlexiHPC platform.</p> <p>Once all the above is filled in then you only need to run the standard terraform commands</p> <pre><code>terraform init\n</code></pre> <p>This will initialize the terraform directory with all the required modules</p> <p>Then we run the command to create our resources</p> <pre><code>terraform apply\n</code></pre> <p>Terraform will prompt you to confirm the changes. Type \"yes\" to proceed with the creation of the compute instance and the floating IP association.</p> <p>Terraform will then provision the compute instance and associate the floating IP to it.</p> <p>Remember that this is a basic example, and you might need to adapt it to your specific FlexiHPC environment and configurations.</p> <p>The full <code>main.tf</code> file for completeness</p> main.tf<pre><code>terraform {\nrequired_version = \"&gt;= 0.14.0\"\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \"~&gt; 1.51.1\"\n    }\n  }\n}\n\nprovider \"openstack\" {\n  cloud = \"NAME_IN_CLOUDS_YAML\"\n}\n\nresource \"openstack_compute_instance_v2\" \"compute_instance\" {\n  name            = \"compute-instance-0\"\n  flavor_id       = \"FLEXIHPC_FLAVOR_ID\"\n  image_id        = \"FLEXIHPC_IMAGE_ID\"\n  key_pair        = \"FLEXIHPC_KEY_PAIR_NAME\"\n  security_groups = [\"FLEXIHPC_SECURITY_GROUP_NAME\"]\n\n  network {\n    name = \"FLEXIHPC_NETWORK_NAME\"\n  }\n}\n\nresource \"openstack_networking_floatingip_v2\" \"floating_ip\" {\n  pool = \"external\"\n}\n\nresource \"openstack_compute_floatingip_associate_v2\" \"floating_ip_association\" {\n  floating_ip = openstack_networking_floatingip_v2.floating_ip.address\n  instance_id = openstack_compute_instance_v2.compute_instance.id\n}\n</code></pre>"},{"location":"user-guides/launch-and-mange-instances/deployment-of-an-instance-with-terraform/#using-flexihpc-object-storage-to-store-the-terraform-state-file","title":"Using FlexiHPC object storage to store the Terraform state file","text":"<p>Should you wish to not include the terraform state file within the git repo then you will want to update the above with a the backend that you wish to store that file</p> <p>Within the first chunk of the file you want to add the following so it looks like this</p> <pre><code>terraform {\nrequired_version = \"&gt;= 0.14.0\"\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \"~&gt; 1.51.1\"\n    }\n  }\n\n  backend \"s3\" {\n    bucket = \"&lt;CONTAINER_NAME&gt;\"\n    key    = \"state/terraform.tfstate\"\n    endpoint   = \"https://object.akl-1.cloud.nesi.org.nz/\"\n    sts_endpoint = \"https://object.akl-1.cloud.nesi.org.nz/\"\n    access_key = \"&lt;EC2 User Access Token&gt;\"\n    secret_key = \"&lt;EC2 User Secret Token&gt;\"\n    #region = \"us-east-1\"\n    force_path_style = \"true\"\n    skip_credentials_validation = \"true\"\n  }\n}\n</code></pre> <p>We have added the <code>backend \"s3\"</code> chunk to the <code>terraform</code> block</p> <code>&lt;CONTAINER_NAME&gt;</code> The container name within FlexiHPC object storage. You can create this either via the dashboard or CLI <p>You will need to update the following after generating EC2 Credentials</p> <code>&lt;EC2 User Access Token&gt;</code> The EC2 Credentials Access Token <code>&lt;EC2 User Secret Token&gt;</code> The EC2 Credentials User Secret <p>Save that file and run</p> <pre><code>terraform init -reconfigure\n</code></pre> <p>This will reconfigure the backend to store the state file on FlexiHPC, you can also pass <code>-migrate-state</code> instead of <code>-reconfigure</code> should you have a state file that you want to move there from a previous run.</p> <p>Your terraform state file should now be configured and stored on FlexiHPC object storage</p>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-from-a-volume/","title":"Launch an Instance from a volume","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>You can create a volume from an existing image, volume, or snapshot. This procedure shows you how to create a volume from an image, and use the volume to boot an instance.</p> <p>List the available images.</p> <pre><code>openstack image list\n</code></pre> <pre><code>+--------------------------------------+----------------------------------------------------------+--------+\n| ID                                   | Name                                                     | Status |\n+--------------------------------------+----------------------------------------------------------+--------+\n| 701e29ac-8963-4cf9-b90a-e1b14095866d | CentOS-Stream-8                                          | active |\n| 42ebfb1b-f136-4947-ae1a-025ad57b369c | CentOS-stream8-baremetal                                 | active |\n| 386c661a-4c30-4f09-b536-511a862102b4 | FedoraCoreOS35                                           | active |\n| fe8c98d3-7a87-4b5b-9f9e-0f967c53f9bd | FedoraCoreOS37                                           | active |\n| 622c4f3f-8e62-4c81-8809-69b0a34a28e0 | PostgreSQL-Ubuntu-20.04.4                                | active |\n| 3936d736-e5bb-4024-a361-512fd40413bc | RockyLinux-8.5                                           | active |\n| eb40dbb5-7da6-4784-b47c-f417c9d3b126 | RockyLinux-8.6                                           | active |\n| 2b00f364-1bd0-432c-91f9-8d1adda6fc9f | RockyLinux-8.6-OFED-5.7                                  | active |\n| f366dd3a-5353-47dd-9e92-662055125174 | RockyLinux-8.7                                           | active |\n| b443a9a2-32d1-48c1-8d84-bcc10adbb0c3 | RockyLinux-8.7-OFED-5.8                                  | active |\n| 1276db65-e5de-4721-b2db-666a73929b3e | Ubuntu-22.10-Wiki-Test                                   | active |\n| ab67f1b1-44f9-4465-9a68-82cc35ed69c0 | Ubuntu-Bionic-18.04                                      | active |\n| d73ef17b-6b0a-4148-b3b2-f4edcf2e480e | Ubuntu-Focal-20.04                                       | active |\n| ce869c9d-35bb-46be-9b6d-d74d4035e2f8 | Ubuntu-Focal-20.04-baremetal                             | active |\n| 885d01da-777b-4e67-a1ec-e114e4c2786e | Ubuntu-Focal-20.04-mark-testing-dib-2022-06-30T12:47:00Z | active |\n| a5c9b7b2-e77b-4094-99ac-db0cf5181da5 | Ubuntu-Jammy-22.04                                       | active |\n| 05f13645-2ac7-44ce-aa1c-64f31ca42761 | Ubuntu-Jammy-22.04-DEMOCREDS                             | active |\n| c7e208cb-6521-422b-8d00-1b8f003c4646 | Ubuntu20.04                                              | active |\n| 728719c2-0a75-4411-a8fa-3230fa5d50e5 | Ubuntu22.04                                              | active |\n| a13f3659-eed9-411c-9a33-f1584fd00328 | Windows-Server-2012-R2-Eval                              | active |\n| 8814f28f-1dbd-4253-84e8-8e45032855c6 | Windows-Server-2019                                      | active |\n| 15f3eebe-4c15-4565-a4f8-7369f072b50d | cirros-0.4                                               | active |\n| 534b8b78-f455-4f85-bd21-13c2b1b14e3e | cirros-0.5                                               | active |\n| 64dead14-9c5a-41c3-b4d6-a122a2ca8f28 | linux-test-snapshot                                      | active |\n| d479470d-ab6d-40d6-afc9-04f5f253404d | linux-test-to-boot-2                                     | active |\n| 40ed5c78-c970-4182-a9c8-27e18a6a4251 | linux-test-to-boot-cli                                   | active |\n| 5a8e5595-d893-4d1c-8600-d7982f3915bb | ood-keycloak-1                                           | active |\n| 04e1a31a-adee-4af2-935e-0e6e7c4b3193 | test-break                                               | active |\n| 1a0480d1-55c8-4fd7-8c7a-8c26e52d8cbd | ubuntu-jammy-server-cloudimg                             | active |\n+--------------------------------------+----------------------------------------------------------+--------+\n</code></pre> <p>Note the ID of the image that you want to use to create a volume.</p> <p>Note</p> <p>We will use the Ubuntu-Jammy-22.04 image with the ID <code>a5c9b7b2-e77b-4094-99ac-db0cf5181da5</code></p> <p>We also need to list the available flavors.</p> <pre><code>openstack flavor list\n</code></pre> <pre><code>+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n| ID                                   | Name                    |    RAM | Disk | Ephemeral | VCPUs | Is Public |\n+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n| 0f71f1e2-d327-41f9-87e3-0f6c29f51af1 | gb.bm.gpu               | 524288 |  240 |         0 |    48 | True      |\n| 1281555c-6bcb-42e4-a48e-98352dcd0fd0 | compute1.2cpu4ram       |   4096 |   30 |         0 |     2 | True      |\n| 14505c86-765f-4971-a36f-1e867216dccf | memory1.4cpu16ram       |  16384 |   30 |         0 |     4 | True      |\n| 1dbac08-d9a9-4c27-8534-57293785433e  | balanced1.32cpu64ram    |  65536 |   30 |         0 |    32 | True      |\n| 2d02e6a4-3937-4ed3-951a-8e27867ff53e | balanced1.8cpu16ram     |  16384 |   30 |         0 |     8 | True      |\n| 2e7b7cc7-9e29-4ff2-98dd-03dbb99dbb5c | compute1.16cpu32ram     |  32768 |   30 |         0 |    16 | True      |\n| 3276cd5f-c96a-4e05-960f-f4f197142c98 | memory1.1cpu4ram        |   4096 |   30 |         0 |     1 | True      |\n| 3b5a6e01-d3ad-49e3-a4f8-183c04444330 | balanced1.1cpu2ram      |   2048 |   30 |         0 |     1 | True      |\n| 4a0425c8-7494-473e-a5bb-acc91c378615 | c1.cpu128.ram448.disk30 | 458752 |   30 |         0 |   128 | True      |\n| 4e8af724-f66d-4072-a692-114126de25a0 | compute1.1cpu2ram       |   2048 |   30 |         0 |     1 | True      |\n| 4ec785be-a422-4207-9daa-cbb71c61f9ed | devtest1.4cpu4ram       |   4096 |   30 |         0 |     4 | True      |\n| 674fa81a-69c7-4bf7-b3a9-59989fb63618 | balanced1.16cpu32ram    |  32768 |   30 |         0 |    16 | True      |\n| 6b2e76a8-cce0-4175-8160-76e2525d3d3d | balanced1.2cpu4ram      |   4096 |   30 |         0 |     2 | True      |\n| 7af5c672-43e7-4296-9608-5974394851b8 | memory1.2cpu8ram        |   8192 |   30 |         0 |     2 | True      |\n| 7ffa092c-e75a-4cb5-be9f-db8c749e8801 | compute1.4cpu8ram       |   8192 |   30 |         0 |     4 | True      |\n| 8aef7f54-1ed6-4275-a38c-3f1e61afabd9 | memory1.16cpu64ram      |  65536 |   30 |         0 |    16 | True      |\n| 94ba9177-cb98-4b04-870c-9a696e1c5327 | memory1.32cpu128ram     | 131072 |   30 |         0 |    32 | True      |\n| 9d536959-dd7a-4532-b0b7-db8bb8a72ddb | compute1.8cpu16ram      |  16384 |   30 |         0 |     8 | True      |\n| b46e184c-0dcb-44b2-a53f-c2b8eff676c9 | compute1.32cpu64ram     |  65536 |   30 |         0 |    32 | True      |\n| d6c2e93a-d430-44ca-822b-79a4b882c0c3 | piotr-gpu               | 131072 |  100 |         0 |     8 | True      |\n| d6e3a25a-4f9e-4c87-9342-77f807ead537 | memory1.8cpu32ram       |  32768 |   30 |         0 |     8 | True      |\n| e07cfee1-43af-4bf6-baac-3bdf7c1b88f8 | balanced1.4cpu8ram      |   8192 |   30 |         0 |     4 | True      |\n| e3a1ec6d-9513-4b9f-9580-671c4eee1c21 | devtest1.2cpu2ram       |   2048 |   30 |         0 |     2 | True      |\n| ee55c523-9803-4296-91be-1c34e986baaa | devtest1.1cpu1ram       |   1024 |   30 |         0 |     1 | True      |\n+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n</code></pre> <p>Note the ID of the flavor that you want to use</p> <p>Note</p> <p>We will use the <code>balanced1.1cpu2ram</code> flavor with an ID <code>3b5a6e01-d3ad-49e3-a4f8-183c04444330</code></p> <p>Get a list of networks</p> <pre><code>openstack network list\n</code></pre> <pre><code>+--------------------------------------+--------------------------------+--------------------------------------+\n| ID                                   | Name                           | Subnets                              |\n+--------------------------------------+--------------------------------+--------------------------------------+\n| 33d0c11b-b659-4b77-9afc-5676fe965839 | external                       | 5c2644ad-7253-42f5-ad69-40970b84dea6 |\n| d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | NeSI-Training-Test             | f5715775-270c-4230-bfa7-fdbdf51352dc |\n+--------------------------------------+--------------------------------+--------------------------------------+\n</code></pre> <p>Note the ID for the network that is not the external one and is named the same as your project space.</p> <p>Note</p> <p>For this example we will use NeSI-Training-Test with an ID <code>d3a7ddb5-6582-42cf-978a-c99b4ed25ad4</code></p> <p>With we above values we then have 2 choices to booting an instance from a volume</p> <ul> <li> <p>Create and boot from volume in a single step</p> <p>This option doesn't give us control over the volume creation process and only allows us to specify a size for our new volume</p> </li> <li> <p>Creating the volume first and boot from it</p> <p>This allows us to specify more then the size on creation, example is we might want to encrypt it</p> </li> </ul>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-from-a-volume/#create-and-boot-from-volume-in-a-single-step","title":"Create and boot from volume in a single step","text":"<p>We will then create an instance from that image using the <code>--boot-from-volume</code> parameter</p> <p>Note</p> <p>We highly recommend that you supply the parameter <code>--key-name</code> to allow connections with your SSH key</p> <p>The command will look like the following</p> <pre><code>openstack server create --flavor &lt;FLAVOR_ID&gt; --network &lt;NETWORK_ID&gt; --image &lt;IMAGE_ID&gt; --boot-from-volume &lt;VOULME_SIZE&gt; --key-name &lt;KEY_PAIR_NAME&gt; --wait &lt;INSTANCE_NAME&gt;\n</code></pre> <p>Using or example values the command looks like the following</p> <pre><code>openstack server create --flavor 3b5a6e01-d3ad-49e3-a4f8-183c04444330 --network d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 --image a5c9b7b2-e77b-4094-99ac-db0cf5181da5 --boot-from-volume 80 --key-name kahus-key --wait Ubuntu_boot_volume\n</code></pre> <pre><code>+-----------------------------+----------------------------------------------------------+\n| Field                       | Value                                                    |\n+-----------------------------+----------------------------------------------------------+\n| accessIPv4                  |                                                          |\n| accessIPv6                  |                                                          |\n| addresses                   | NeSI-Training-Test=10.1.0.57                             |\n| adminPass                   | rCs2E9BP2RZu                                             |\n| config_drive                | True                                                     |\n| created                     | 2023-09-03T22:06:56Z                                     |\n| flavor                      | memory1.4cpu16ram (14505c86-765f-4971-a36f-1e867216dccf) |\n| hostId                      | c79c5b9fc6c64341b07c0408e401a28ad0b20aa123a250f77fd8c249 |\n| id                          | ddc5d676-db4e-4fd3-b0c9-14b91a1f16d5                     |\n| image                       | N/A (booted from volume)                                 |\n| key_name                    | kahus-key                                                |\n| name                        | Ubuntu_boot_volume                                       |\n| progress                    | 0                                                        |\n| project_id                  | 4f07cc254d6c4471805d49bae1f739b9                         |\n| properties                  |                                                          |\n| security_groups             | name='default'                                           |\n| status                      | ACTIVE                                                   |\n| updated                     | 2023-09-03T22:07:04Z                                     |\n| user_id                     | fb9a3d02c89e4cfdbe64658ad43ece97                         |\n| volumes_attached            | id='0aa677c7-072b-4241-a70a-05a4de020596'                |\n+-----------------------------+----------------------------------------------------------+\n</code></pre> <p>Warning</p> <p>Should you not provide a key file to the deployment you will need to remake the instance as by default the Flexi environment doesn't set passwords.</p> <p>Ubuntu and CentOS cloud images also don't allow password SSH by default.</p>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-from-a-volume/#creating-the-volume-first-and-boot-from-it","title":"Creating the volume first and boot from it","text":"<p>Should you wish to have more control over the volume creation process we will first create the volume then boot an instance from that.</p> <p>Cinder makes a volume bootable when <code>--image</code> parameter is passed.</p> <pre><code>openstack volume create --image IMAGE_ID --size SIZE_IN_GB bootable_volume\n</code></pre> <p>We will use the <code>Ubuntu-Jammy-22.04</code> image with the ID <code>a5c9b7b2-e77b-4094-99ac-db0cf5181da5</code> the command will look like</p> <pre><code>openstack volume create --image a5c9b7b2-e77b-4094-99ac-db0cf5181da5 --size 80 my_ubuntu_volume\n</code></pre> <pre><code>+---------------------+--------------------------------------+\n| Field               | Value                                |\n+---------------------+--------------------------------------+\n| attachments         | []                                   |\n| availability_zone   | nova                                 |\n| bootable            | false                                |\n| consistencygroup_id | None                                 |\n| created_at          | 2023-08-09T21:57:52.675096           |\n| description         | None                                 |\n| encrypted           | False                                |\n| id                  | 3dd489d8-7c44-4c59-b4af-0c804ddf4729 |\n| multiattach         | False                                |\n| name                | my_ubuntu_volume                     |\n| properties          |                                      |\n| replication_status  | None                                 |\n| size                | 30                                   |\n| snapshot_id         | None                                 |\n| source_volid        | None                                 |\n| status              | creating                             |\n| type                | ceph-ssd                             |\n| updated_at          | None                                 |\n| user_id             | fb9a3d02c89e4cfdbe64658ad43ece97     |\n+---------------------+--------------------------------------+\n</code></pre> <p>Take note of the volume ID</p> <p>The following command is used to boot an instance from a volume</p> <pre><code>openstack server create --flavor &lt;FLAVOR_ID&gt; --volume &lt;VOLUME_ID&gt; --network &lt;NETWORK_ID&gt; --key-name &lt;KEY_PAIR_NAME&gt; &lt;Instance Name&gt;\n</code></pre> <p>We will supply the <code>balanced1.1cpu2ram</code> ID for flavor and our volume ID of <code>3dd489d8-7c44-4c59-b4af-0c804ddf4729</code> from the volume we created before</p> <pre><code>openstack server create --flavor 3b5a6e01-d3ad-49e3-a4f8-183c04444330 --volume 3dd489d8-7c44-4c59-b4af-0c804ddf4729 --network d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 --key-name kahus-key Ubuntu_From_Volume\n</code></pre> <pre><code>+-----------------------------+-----------------------------------------------------------+\n| Field                       | Value                                                     |\n+-----------------------------+-----------------------------------------------------------+\n| accessIPv4                  |                                                           |\n| accessIPv6                  |                                                           |\n| addresses                   |                                                           |\n| adminPass                   | MPu74uppSp4r                                              |\n| config_drive                |                                                           |\n| created                     | 2023-08-09T22:05:30Z                                      |\n| flavor                      | balanced1.1cpu2ram (3b5a6e01-d3ad-49e3-a4f8-183c04444330) |\n| hostId                      |                                                           |\n| id                          | 2d4db443-eb48-4d64-8770-5624568f29ad                      |\n| image                       | N/A (booted from volume)                                  |\n| key_name                    | kahus-key                                                 |\n| name                        | Ubuntu_From_Volume                                        |\n| progress                    | 0                                                         |\n| project_id                  | 4f07cc254d6c4471805d49bae1f739b9                          |\n| properties                  |                                                           |\n| security_groups             | name='default'                                            |\n| status                      | BUILD                                                     |\n| updated                     | 2023-08-09T22:05:30Z                                      |\n| user_id                     | fb9a3d02c89e4cfdbe64658ad43ece97                          |\n| volumes_attached            |                                                           |\n+-----------------------------+-----------------------------------------------------------+\n</code></pre> <p>Warning</p> <p>Should you not provide a key file to the deployment you will need to remake the instance as by default the Flexi environment doesn't set passwords.</p> <p>Ubuntu and CentOS cloud images also don't allow password SSH by default.</p> <p>To allow external access a floating IP will need to be provided to the newly created instance, following Manage Floating IPs via CLI will complete this for you, You should then be able to connect to your instance using ssh which is explained more in Connect to your instance by using SSH.</p>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-from-an-image/","title":"Launch an Instance from an Image","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>We highly recommend that you supply the parameter <code>--key-name</code> to allow connections with your SSH key</p> <p>After you gather required parameters, run the following command to launch an instance. Specify the server <code>name</code>, <code>flavor ID</code>, and <code>image ID</code>.</p> <pre><code>openstack server create --flavor FLAVOR_ID --image IMAGE_ID --key-name KEY_NAME --security-group SEC_GROUP_ID --network NETWORK_ID INSTANCE_NAME\n</code></pre> <p>Example with the values supplied</p> <pre><code>openstack server create --flavor e3a1ec6d-9513-4b9f-9580-671c4eee1c21 --image a5c9b7b2-e77b-4094-99ac-db0cf5181da5 --key-name test-key-pair --security-group 7200b28f-9089-4797-a094-39f1995e6f0c --network d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 test-instance-wiki\n</code></pre> <pre><code>+-----------------------------+-----------------------------------------------------------+\n| Field                       | Value                                                     |\n+-----------------------------+-----------------------------------------------------------+\n| OS-DCF:diskConfig           | MANUAL                                                    |\n| OS-EXT-AZ:availability_zone |                                                           |\n| OS-EXT-STS:power_state      | NOSTATE                                                   |\n| OS-EXT-STS:task_state       | scheduling                                                |\n| OS-EXT-STS:vm_state         | building                                                  |\n| OS-SRV-USG:launched_at      | None                                                      |\n| OS-SRV-USG:terminated_at    | None                                                      |\n| accessIPv4                  |                                                           |\n| accessIPv6                  |                                                           |\n| addresses                   |                                                           |\n| adminPass                   | &lt;PASSWORD HERE&gt;                                           |\n| config_drive                |                                                           |\n| created                     | 2023-07-26T22:51:53Z                                      |\n| flavor                      | devtest1.2cpu2ram (e3a1ec6d-9513-4b9f-9580-671c4eee1c21)  |\n| hostId                      |                                                           |\n| id                          | 8b08a4fb-7372-4269-a583-9dbc91779ffe                      |\n| image                       | Ubuntu-Jammy-22.04 (a5c9b7b2-e77b-4094-99ac-db0cf5181da5) |\n| key_name                    | test-key-pair                                             |\n| name                        | test-instance-wiki                                        |\n| progress                    | 0                                                         |\n| project_id                  | 4f07cc254d6c4471805d49bae1f739b9                          |\n| properties                  |                                                           |\n| security_groups             | name='7200b28f-9089-4797-a094-39f1995e6f0c'               |\n| status                      | BUILD                                                     |\n| updated                     | 2023-07-26T22:51:53Z                                      |\n| user_id                     | fb9a3d02c89e4cfdbe64658ad43ece97                          |\n| volumes_attached            |                                                           |\n+-----------------------------+-----------------------------------------------------------+\n</code></pre> <p>A status of <code>BUILD</code> indicates that the instance has started, but is not yet online.</p> <p>A status of <code>ACTIVE</code> indicates that the instance is active.</p> <p>Copy the server ID value from the <code>id</code> field in the output. Use the ID to get server details or to delete your server.</p> <p>Check if the instance is online</p> <pre><code>openstack server list\n</code></pre> <p>The list shows the ID, name, status, and private (and if assigned, public) IP addresses for all instances in the project to which you belong:</p> <pre><code>+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n| ID                                   | Name                                  | Status | Networks                                     | Image                    | Flavor             |\n+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n| 8b08a4fb-7372-4269-a583-9dbc91779ffe | test-instance-wiki                    | ACTIVE | NeSI-Training-Test=10.1.0.134                | Ubuntu-Jammy-22.04       | devtest1.2cpu2ram  |\n+--------------------------------------+---------------------------------------+--------+----------------------------------------------+--------------------------+--------------------+\n</code></pre> <p>If the status for the instance is <code>ACTIVE</code>, the instance is online.</p> <p>If you would like to access your Compute instance outside the FlexiHPC platform you will need to associate a <code>floating ip</code> to your instance. Reading Manage Floating IPs via CLI, You should then be able to connect to your instance using ssh which is explained more in Connect to your instance by using SSH.</p>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-via-cli/","title":"Launch an Instance via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>Before you can launch an instance via the CLI, gather the following parameters:</p> <ul> <li> <p>The <code>instance source</code> can be an image, snapshot, or block storage volume that contains an image or snapshot.</p> </li> <li> <p>A <code>name</code> for your instance.</p> </li> <li> <p>The <code>flavor</code> for your instance, which defines the compute, memory, and storage capacity of nova computing instances. A flavor is an available hardware configuration for a server. It defines the size of a virtual server that can be launched.</p> </li> <li> <p>Access and security credentials, which include one or both of the following credentials:</p> <ul> <li> <p>A <code>key pair</code> for your instance, which are SSH credentials that are injected into images when they are launched. Create at least one key pair for each project. If you already have generated a key pair with an external tool, you can import it into OpenStack. You can use the key pair for multiple instances that belong to that project. Read Create and Manage Key Pairs if you would like to know more.</p> </li> <li> <p>A <code>security group</code> that defines which incoming network traffic is forwarded to instances. Security groups hold a set of firewall policies, known as security group rules.</p> </li> </ul> </li> <li> <p>The <code>network</code> to attach the instance too.</p> </li> <li> <p>If needed, you can assign a floating (public) IP address to a running instance to make it accessible from outside the cloud.</p> </li> <li> <p>You can also attach a block storage device, or volume, for persistent storage.</p> </li> </ul> <p>Note</p> <p>Instances that use the default security group cannot, by default, be accessed from any IP address outside of the cloud. If you want those IP addresses to access the instances, you must modify the rules for the security group. Read How to add/update and remove security groups for more information.</p> <p>After you gather the parameters that you need to launch an instance, you can launch it from an image or a volume.</p>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-via-cli/#gather-parameters-to-launch-an-instance","title":"Gather parameters to launch an instance","text":"<p>List the available flavors.</p> <pre><code>openstack flavor list\n</code></pre> <p>Note the ID of the flavor that you want to use for your instance:</p> <pre><code>+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n| ID                                   | Name                    |    RAM | Disk | Ephemeral | VCPUs | Is Public |\n+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n| 0f71f1e2-d327-41f9-87e3-0f6c29f51af1 | gb.bm.gpu               | 524288 |  240 |         0 |    48 | True      |\n| 1281555c-6bcb-42e4-a48e-98352dcd0fd0 | compute1.2cpu4ram       |   4096 |   30 |         0 |     2 | True      |\n| 14505c86-765f-4971-a36f-1e867216dccf | memory1.4cpu16ram       |  16384 |   30 |         0 |     4 | True      |\n| 1dbac08-d9a9-4c27-8534-57293785433e  | balanced1.32cpu64ram    |  65536 |   30 |         0 |    32 | True      |\n| 2d02e6a4-3937-4ed3-951a-8e27867ff53e | balanced1.8cpu16ram     |  16384 |   30 |         0 |     8 | True      |\n| 2e7b7cc7-9e29-4ff2-98dd-03dbb99dbb5c | compute1.16cpu32ram     |  32768 |   30 |         0 |    16 | True      |\n| 3276cd5f-c96a-4e05-960f-f4f197142c98 | memory1.1cpu4ram        |   4096 |   30 |         0 |     1 | True      |\n| 3b5a6e01-d3ad-49e3-a4f8-183c04444330 | balanced1.1cpu2ram      |   2048 |   30 |         0 |     1 | True      |\n| 4a0425c8-7494-473e-a5bb-acc91c378615 | c1.cpu128.ram448.disk30 | 458752 |   30 |         0 |   128 | True      |\n| 4e8af724-f66d-4072-a692-114126de25a0 | compute1.1cpu2ram       |   2048 |   30 |         0 |     1 | True      |\n| 4ec785be-a422-4207-9daa-cbb71c61f9ed | devtest1.4cpu4ram       |   4096 |   30 |         0 |     4 | True      |\n| 674fa81a-69c7-4bf7-b3a9-59989fb63618 | balanced1.16cpu32ram    |  32768 |   30 |         0 |    16 | True      |\n| 6b2e76a8-cce0-4175-8160-76e2525d3d3d | balanced1.2cpu4ram      |   4096 |   30 |         0 |     2 | True      |\n| 7af5c672-43e7-4296-9608-5974394851b8 | memory1.2cpu8ram        |   8192 |   30 |         0 |     2 | True      |\n| 7ffa092c-e75a-4cb5-be9f-db8c749e8801 | compute1.4cpu8ram       |   8192 |   30 |         0 |     4 | True      |\n| 8aef7f54-1ed6-4275-a38c-3f1e61afabd9 | memory1.16cpu64ram      |  65536 |   30 |         0 |    16 | True      |\n| 94ba9177-cb98-4b04-870c-9a696e1c5327 | memory1.32cpu128ram     | 131072 |   30 |         0 |    32 | True      |\n| 9d536959-dd7a-4532-b0b7-db8bb8a72ddb | compute1.8cpu16ram      |  16384 |   30 |         0 |     8 | True      |\n| b46e184c-0dcb-44b2-a53f-c2b8eff676c9 | compute1.32cpu64ram     |  65536 |   30 |         0 |    32 | True      |\n| d6c2e93a-d430-44ca-822b-79a4b882c0c3 | piotr-gpu               | 131072 |  100 |         0 |     8 | True      |\n| d6e3a25a-4f9e-4c87-9342-77f807ead537 | memory1.8cpu32ram       |  32768 |   30 |         0 |     8 | True      |\n| e07cfee1-43af-4bf6-baac-3bdf7c1b88f8 | balanced1.4cpu8ram      |   8192 |   30 |         0 |     4 | True      |\n| e3a1ec6d-9513-4b9f-9580-671c4eee1c21 | devtest1.2cpu2ram       |   2048 |   30 |         0 |     2 | True      |\n| ee55c523-9803-4296-91be-1c34e986baaa | devtest1.1cpu1ram       |   1024 |   30 |         0 |     1 | True      |\n+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n</code></pre> <p>List the available images.</p> <pre><code>openstack image list\n</code></pre> <p>Note the ID of the image from which you want to boot your instance:</p> <pre><code>+--------------------------------------+----------------------------------------------------------+--------+\n| ID                                   | Name                                                     | Status |\n+--------------------------------------+----------------------------------------------------------+--------+\n| 701e29ac-8963-4cf9-b90a-e1b14095866d | CentOS-Stream-8                                          | active |\n| 42ebfb1b-f136-4947-ae1a-025ad57b369c | CentOS-stream8-baremetal                                 | active |\n| f94a4d02-661f-4df7-bb50-ad08ad89f816 | Centos-8.4-AGR                                           | active |\n| 386c661a-4c30-4f09-b536-511a862102b4 | FedoraCoreOS35                                           | active |\n| fe8c98d3-7a87-4b5b-9f9e-0f967c53f9bd | FedoraCoreOS37                                           | active |\n| 622c4f3f-8e62-4c81-8809-69b0a34a28e0 | PostgreSQL-Ubuntu-20.04.4                                | active |\n| 3936d736-e5bb-4024-a361-512fd40413bc | RockyLinux-8.5                                           | active |\n| eb40dbb5-7da6-4784-b47c-f417c9d3b126 | RockyLinux-8.6                                           | active |\n| 2b00f364-1bd0-432c-91f9-8d1adda6fc9f | RockyLinux-8.6-OFED-5.7                                  | active |\n| f366dd3a-5353-47dd-9e92-662055125174 | RockyLinux-8.7                                           | active |\n| b443a9a2-32d1-48c1-8d84-bcc10adbb0c3 | RockyLinux-8.7-OFED-5.8                                  | active |\n| 9933eb25-b0c1-4ef2-b199-25e916c79906 | Ubuntu-20-AGR                                            | active |\n| ab67f1b1-44f9-4465-9a68-82cc35ed69c0 | Ubuntu-Bionic-18.04                                      | active |\n| d73ef17b-6b0a-4148-b3b2-f4edcf2e480e | Ubuntu-Focal-20.04                                       | active |\n| ce869c9d-35bb-46be-9b6d-d74d4035e2f8 | Ubuntu-Focal-20.04-baremetal                             | active |\n| 885d01da-777b-4e67-a1ec-e114e4c2786e | Ubuntu-Focal-20.04-mark-testing-dib-2022-06-30T12:47:00Z | active |\n| a5c9b7b2-e77b-4094-99ac-db0cf5181da5 | Ubuntu-Jammy-22.04                                       | active |\n| 05f13645-2ac7-44ce-aa1c-64f31ca42761 | Ubuntu-Jammy-22.04-DEMOCREDS                             | active |\n| c7e208cb-6521-422b-8d00-1b8f003c4646 | Ubuntu20.04                                              | active |\n| 728719c2-0a75-4411-a8fa-3230fa5d50e5 | Ubuntu22.04                                              | active |\n| a13f3659-eed9-411c-9a33-f1584fd00328 | Windows-Server-2012-R2-Eval                              | active |\n| 8814f28f-1dbd-4253-84e8-8e45032855c6 | Windows-Server-2019                                      | active |\n| 15f3eebe-4c15-4565-a4f8-7369f072b50d | cirros-0.4                                               | active |\n| 534b8b78-f455-4f85-bd21-13c2b1b14e3e | cirros-0.5                                               | active |\n| 04e1a31a-adee-4af2-935e-0e6e7c4b3193 | test-break                                               | active |\n+--------------------------------------+----------------------------------------------------------+--------+\n</code></pre> <p>List the available security groups.</p> <pre><code>openstack security group list\n</code></pre> <p>Note the ID of the security group you want to attach to the instance:</p> <pre><code>+--------------------------------------+----------------------------------------------------------------+---------------------------------------------------------+----------------------------------+------+\n| ID                                   | Name                                                           | Description                                             | Project                          | Tags |\n+--------------------------------------+----------------------------------------------------------------+---------------------------------------------------------+----------------------------------+------+\n| 7200b28f-9089-4797-a094-39f1995e6f0c | SSH Allow All                                                  | This is an open SSH that allows anyone to connect to 22 | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| b24e8bef-969a-4938-8b18-0a33769b181d | kubeapi_whitelist                                              |                                                         | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| b5d30ed4-13b3-4f7a-bc5a-c48175566ea3 | My-Security-Group                                              | This is my security group                               | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n| f2f15d6f-2a04-4196-8102-a058042694b3 | default                                                        | Default security group                                  | 4f07cc254d6c4471805d49bae1f739b9 | []   |\n+--------------------------------------+----------------------------------------------------------------+---------------------------------------------------------+----------------------------------+------+\n</code></pre> <p>If you have not created any security groups, you can read How to add/update and remove security groups</p> <p>You can view rules for a specified security group:</p> <pre><code>openstack security group rule list b5d30ed4-13b3-4f7a-bc5a-c48175566ea3\n</code></pre> <p>List the available key pairs, and note the key pair name that you use for SSH access.</p> <pre><code>openstack keypair list\n</code></pre> <p>List the available networks.</p> <pre><code>openstack network list\n</code></pre> <p>Note the ID for the network</p> <pre><code>+--------------------------------------+--------------------------------+--------------------------------------+\n| ID                                   | Name                           | Subnets                              |\n+--------------------------------------+--------------------------------+--------------------------------------+\n| 33d0c11b-b659-4b77-9afc-5676fe965839 | external                       | 5c2644ad-7253-42f5-ad69-40970b84dea6 |\n| d3a7ddb5-6582-42cf-978a-c99b4ed25ad4 | NeSI-Training-Test             | f5715775-270c-4230-bfa7-fdbdf51352dc |\n+--------------------------------------+--------------------------------+--------------------------------------+\n</code></pre> <p>Note</p> <p>The recommend Network ID to take note of is the network that has the same name as your project. If external access is required then after creating the compute instance a floating ip is the recommend way to gain this external access.</p>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-via-cli/#launch-an-instance","title":"Launch an instance","text":"<p>You can launch an instance from various sources.</p> <ul> <li> <p>Launch an instance from an image</p> </li> <li> <p>Launch an instance from a volume</p> </li> </ul>"},{"location":"user-guides/launch-and-mange-instances/launch-an-instance-via-dashboard/","title":"Launch an Instance via Dashboard","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select <code>Instances</code></p> <p>Click <code>Launch Instance</code></p> <p></p> <p>Within the <code>Launch Instance</code> dialog box there are the following values:</p> <p>Details</p> <code>Project Name</code> The name of the project that this instance will be deployed under. <code>Instance Name</code> The name of the VM/Instance. The name you assign here becomes the initial host name of the server. <p>Note</p> <p>After the server is built, if you change the server name in the API or change the host name directly, the names are not updated in the dashboard.</p> <p>Server names are not guaranteed to be unique when created so you could have two instances with the same host name.</p> <code>Description</code> A brief description of the VM/Instance. <code>Availability Zone</code> By default this will be \u201cnova\u201c. This specifies which zone it will be deployed too if there were multiple zones. The current default and only zone is \u201cnova\u201c at this point in time. <code>Count</code> how many of the VMs/Instances you would like to deploy. <code>Source</code> <p>Select Boot Source</p> <code>Boot from image</code> Selecting this option allows you to choose from a list of images to boot from, a list of images will be presented to choose from. <code>Boot from instance snapshot</code> Selecting this option allows you to choose an instance snapshot to boot from, a list of instance snapshots will be presented to choose from. <code>Boot from volume</code> Selecting this option allows you to choose a volume to boot from, a list of volumes will be presented to choose from. <code>Boot from volume snapshot</code> Selecting this option allows you to choose a volume snapshot to boot from, a list of volume snapshots will be presented to choose from. <code>Delete Volume on Instance Delete</code> Selecting YES will enable the volume to be deleted when the instance is deleted. <code>Volume Size (GB)</code> This will be present should the user choose to boot from image or instance snapshot. This setting determines the size of the boot volume. This will be overridden when selecting a flavor if its less then the flavor's size. <p>Flavor</p> <code>Flavor</code> Specify the size of the instance to launch, click the <code>^</code> to select the instance size you are after. <p>Note</p> <p>Instance sizes have a brief explanation in the name of what they are best used for.</p> <p>Example <code>compute1.1cpu2ram</code> is best for Compute heavy workloads with 1 vCPU and 2 GB of RAM or <code>memory1.1cpu4ram</code> is best for Memory heavy workloads with 1 vCPU and 4 GB of RAM</p> <p>Networks</p> <code>Selected Networks</code> To add a network to the instance, click the <code>^</code> in the Available field. <p>Note</p> <p>If you haven't configured a network prior to the creation of a compute instance then the recommend network should be the one that has the same name as the project you are in. Example, I am in the <code>NeSI-SandBox-Environment</code> so I will pick the <code>NeSI-SandBox-Environment</code> network.</p> <p>You shouldn't need to add the instance to an external network as a floating IP will be added later on should you need to access the instance from outside the FlexiHPC network.</p> <p>Network Ports</p> <p>This for now can be ignored as we will use Security Groups to assign port connections for the instance.</p> <p>Security Groups</p> <p>Activate the security groups that you want to assign to the instance.</p> <p>Security groups are a kind of cloud firewall that define which incoming network traffic is forwarded to instances.</p> <p>If you have not created any security groups, you can assign only the default security group to the instance.</p> <p>Note</p> <p>By default the <code>default</code> security group is added to all instances. This is required should the instance want to communicate to the outside world or to any other instance within the FlexiHPC project.</p> <p>How to create <code>Security Groups</code> are explained here How to add/update and remove security groups</p> <p>Key Pair</p> <p>Specify a key pair that is associated with your FlexiHPC user login. If there is none available then you can create one by clicking <code>Create key Pair</code></p> <p>If the image uses a static root password or a static key set (neither is recommended), you do not need to provide a key pair to launch the instance.</p> <p>Info</p> <p>The following Creating and Importing Key Pairs will also explain on how to import and create key pairs</p> <p>Configuration</p> <code>Customization Script Source</code> Specify a customization script that runs after your instance launches. This can either be applied by uploading a file from your local machine or entered manually within the textbox provided. <p>Server Groups</p> <p>Server groups determine the Policy that FlexiHPC should apply during the deployment of the instance in regards to other servers within the same group.</p> <p>Info</p> <p>By default an instance doesn't need to be in a Server Group, however should you want to apply policies to your servers then please read Server Groups within FlexiHPC to create a Server Group and also understand each policy.</p> <p>Server Group should be created prior to the creation of the instance if so required.</p> <p>Scheduler Hints</p> <p>These are tags or labels that tell the underlying FlexiHPC on where to deploy an instance. An example would be, If your workload or instance requires an intel based processor then you would apply the corresponding Scheduler Hint to the instance so it is only deployed to intel based processors.</p> <p>Metadata</p> <code>Available Metadata</code> Add Metadata items to your instance. <p>Click <code>Launch Instance</code>.</p> <p>The instance starts on a compute node in the cloud.</p> <p>Info</p> <p>If you require an external connection to this instance then a floating IP is required. The article</p> <p>Manage Floating IPs via the Dashboard will detail the requirements to complete this.</p> <p>You should now be able to connect to your instance using ssh which is explained more in Connect to your instance by using SSH.</p>"},{"location":"user-guides/launch-and-mange-instances/manage-security-groups-of-an-Instance-via-the-cli/","title":"Manage Security Groups of an Instance via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>When adding or removing <code>Security Groups</code> from an instance via the CLI there are few details you will need, the <code>Instance ID</code> for the compute instance you want to adjust and the <code>Security Group ID</code> you want to add or remove from the instance.</p> <p>Run the following command to return a list of servers within your project space</p> <pre><code>openstack server list\n</code></pre> <pre><code>+--------------------------------------+-----------+--------+-------------------------------+-------------------------------+--------------------+\n| ID                                   | Name      | Status | Networks                      | Image                         | Flavor             |\n+--------------------------------------+-----------+--------+-------------------------------+-------------------------------+--------------------+\n| 4f69a45d-78ad-48e7-b427-5694c8b09e45 | kahu-test | ACTIVE | NeSI-Training-Prod=10.1.0.250 | NeSI-FlexiHPC-Rocky-9.3_cloud | balanced1.2cpu4ram |\n+--------------------------------------+-----------+--------+-------------------------------+-------------------------------+--------------------+\n</code></pre> <p>Taking note of the <code>Instance ID</code></p> <p>Note</p> <p>For this example we will use <code>4f69a45d-78ad-48e7-b427-5694c8b09e45</code></p> <p>Then run the following command to return a list of Security Groups</p> <pre><code>openstack security group list\n</code></pre> <pre><code>+--------------------------------------+----------------+------------------------+----------------------------------+------+\n| ID                                   | Name           | Description            | Project                          | Tags |\n+--------------------------------------+----------------+------------------------+----------------------------------+------+\n| 050e0ec4-1416-46f2-98a0-b492f2c8d81b | ssh-allow-all  |                        | 1b899a2883da444fa6b31172dcebbc56 | []   |\n| 08749b3c-f8aa-443e-a881-80f6009fff59 | http           |                        | 1b899a2883da444fa6b31172dcebbc56 | []   |\n| 0ed77965-05bf-438e-b4e4-89060f814c4c | SSH Allow All  |                        | 1b899a2883da444fa6b31172dcebbc56 | []   |\n| b713d80c-1b7d-4991-b387-514261e59b94 | 6443_Allow_ALL |                        | 1b899a2883da444fa6b31172dcebbc56 | []   |\n| cdad3d6b-a726-4020-a6a3-7c20b1afc79f | https          |                        | 1b899a2883da444fa6b31172dcebbc56 | []   |\n| e73a47e9-cc3a-4986-95f9-c3d101c3d448 | default        | Default security group | 1b899a2883da444fa6b31172dcebbc56 | []   |\n+--------------------------------------+----------------+------------------------+----------------------------------+------+\n</code></pre> <p>Take note of the <code>ID</code></p> <p>Note</p> <p>For this example we will use the id <code>050e0ec4-1416-46f2-98a0-b492f2c8d81b</code> to add <code>ssh-allow-all</code> to our instance</p>"},{"location":"user-guides/launch-and-mange-instances/manage-security-groups-of-an-Instance-via-the-cli/#adding-a-security-group-to-an-instance","title":"Adding a Security Group to an Instance","text":"<p>Taking the Instance ID and Security Group ID we will add those to the following command</p> <pre><code>openstack server add security group &lt;INSTANCE_ID&gt; &lt;SECURITY_GROUP_ID&gt;\n</code></pre> <p>Using our example values the command will look like this</p> <pre><code>openstack server add security group 4f69a45d-78ad-48e7-b427-5694c8b09e45 050e0ec4-1416-46f2-98a0-b492f2c8d81b\n</code></pre> <p>You will not get a response from the endpoint on success</p> <p>So you will want to run the following command to see if the Security Group was added</p> <pre><code>openstack server show &lt;INSTANCE_ID&gt;\n</code></pre> <p>This will return the server details and there will be the security_groups field with the newly added group</p> <pre><code>| security_groups                     | name='ssh-allow-all'                                          |\n|                                     | name='default'                                                |\n</code></pre>"},{"location":"user-guides/launch-and-mange-instances/manage-security-groups-of-an-Instance-via-the-cli/#removing-a-security-group-to-an-instance","title":"Removing a Security Group to an Instance","text":"<p>Taking the Instance ID and Security Group ID we will add those to the following command</p> <pre><code>openstack server remove security group &lt;INSTANCE_ID&gt; &lt;SECURITY_GROUP_ID&gt;\n</code></pre> <p>Using our example values the command will look like this</p> <pre><code>openstack server remove security group 4f69a45d-78ad-48e7-b427-5694c8b09e45 050e0ec4-1416-46f2-98a0-b492f2c8d81b\n</code></pre> <p>You will not get a response from the endpoint on success</p> <p>So you will want to run the following command to see if the Security Group was removed</p> <pre><code>openstack server show &lt;INSTANCE_ID&gt;\n</code></pre> <p>This will return the server details and there will be the security_groups field with the removed group not present</p> <pre><code>| security_groups                     | name='ssh-allow-all'                                          |\n</code></pre>"},{"location":"user-guides/launch-and-mange-instances/manage-security-groups-of-an-Instance-via-the-dashboard/","title":"Manage Security Groups of an Instance via the Dashboard","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select <code>Instances</code> then select the compute instance you want to manage.</p>"},{"location":"user-guides/launch-and-mange-instances/manage-security-groups-of-an-Instance-via-the-dashboard/#attach-a-security-group","title":"Attach a Security Group","text":"<p>Under the <code>Actions</code> menu on the far right, select <code>Edit Security Groups</code></p> <p></p> <p>Within the <code>Edit Instance</code> dialog you will have 2 columns</p> <code>All Security Groups</code> These are all security groups created in your project <code>Instance Security Groups</code> These are the security groups attached to your instance <p></p> <p>Clicking the <code>+</code> icon from the <code>All Security Groups</code> column will add them to the <code>Instance Security Groups</code> column</p> <p></p> <p>Once the desired <code>Secuirty Groups</code> have been added you then click <code>save</code></p>"},{"location":"user-guides/launch-and-mange-instances/manage-security-groups-of-an-Instance-via-the-dashboard/#remove-a-security-group","title":"Remove a Security Group","text":"<p>Under the <code>Actions</code> menu on the far right, select <code>Edit Security Groups</code></p> <p></p> <p>Within the <code>Edit Instance</code> dialog you will have 2 columns</p> <code>All Security Groups</code> These are all security groups created in your project <code>Instance Security Groups</code> These are the security groups attached to your instance <p></p> <p>Clicking the <code>-</code> icon from the <code>Instance Security Groups</code> column will remove it and add it to the <code>All Security Groups</code> column</p> <p></p> <p>Once the desired <code>Secuirty Groups</code> have been removed you then click <code>save</code></p>"},{"location":"user-guides/launch-and-mange-instances/resizing-an-Instance-via-cli/","title":"Resizing an Instance via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>When resizing an instance via the CLI there are few details you will need, the <code>Instance ID</code> for the compute instance you want to resize and the <code>Flavor ID</code> you want to resize the instance to.</p> <p>Run the following command to return a list of servers within your project space</p> <pre><code>openstack server list\n</code></pre> <pre><code>+--------------------------------------+--------------------------+-----------+---------------------------------------------------------------------------+--------------------------+-----------------------+\n| ID                                   | Name                     | Status    | Networks                                                                  | Image                    | Flavor                |\n+--------------------------------------+--------------------------+-----------+---------------------------------------------------------------------------+--------------------------+-----------------------+\n| 6a91e5a1-cf20-4fc5-9b7c-edc2bf1b8de4 | kahu-disk-test           | ACTIVE    | NeSI-Internal-Sandbox=10.1.0.147, 163.7.177.51                            | N/A (booted from volume) | balanced1.4cpu8ram    |\n+--------------------------------------+--------------------------+-----------+---------------------------------------------------------------------------+--------------------------+-----------------------+\n</code></pre> <p>Taking note of the <code>Instance ID</code></p> <p>Note</p> <p>For this example we will use <code>6a91e5a1-cf20-4fc5-9b7c-edc2bf1b8de4</code></p> <p>Then run the following command to return a list of flavors</p> <pre><code>openstack flavor list\n</code></pre> <pre><code>+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n| ID                                   | Name                    |    RAM | Disk | Ephemeral | VCPUs | Is Public |\n+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n| 1281555c-6bcb-42e4-a48e-98352dcd0fd0 | compute1.2cpu4ram       |   4096 |   30 |         0 |     2 | True      |\n| 14505c86-765f-4971-a36f-1e867216dccf | memory1.4cpu16ram       |  16384 |   30 |         0 |     4 | True      |\n| 1dbac08-d9a9-4c27-8534-57293785433e  | balanced1.32cpu64ram    |  65536 |   30 |         0 |    32 | True      |\n| 2d02e6a4-3937-4ed3-951a-8e27867ff53e | balanced1.8cpu16ram     |  16384 |   30 |         0 |     8 | True      |\n| 2e7b7cc7-9e29-4ff2-98dd-03dbb99dbb5c | compute1.16cpu32ram     |  32768 |   30 |         0 |    16 | True      |\n| 3276cd5f-c96a-4e05-960f-f4f197142c98 | memory1.1cpu4ram        |   4096 |   30 |         0 |     1 | True      |\n| 3b5a6e01-d3ad-49e3-a4f8-183c04444330 | balanced1.1cpu2ram      |   2048 |   30 |         0 |     1 | True      |\n| 4e8af724-f66d-4072-a692-114126de25a0 | compute1.1cpu2ram       |   2048 |   30 |         0 |     1 | True      |\n| 4ec785be-a422-4207-9daa-cbb71c61f9ed | devtest1.4cpu4ram       |   4096 |   30 |         0 |     4 | True      |\n| 674fa81a-69c7-4bf7-b3a9-59989fb63618 | balanced1.16cpu32ram    |  32768 |   30 |         0 |    16 | True      |\n| 6b2e76a8-cce0-4175-8160-76e2525d3d3d | balanced1.2cpu4ram      |   4096 |   30 |         0 |     2 | True      |\n| 7af5c672-43e7-4296-9608-5974394851b8 | memory1.2cpu8ram        |   8192 |   30 |         0 |     2 | True      |\n| 7ffa092c-e75a-4cb5-be9f-db8c749e8801 | compute1.4cpu8ram       |   8192 |   30 |         0 |     4 | True      |\n| 8aef7f54-1ed6-4275-a38c-3f1e61afabd9 | memory1.16cpu64ram      |  65536 |   30 |         0 |    16 | True      |\n| 94ba9177-cb98-4b04-870c-9a696e1c5327 | memory1.32cpu128ram     | 131072 |   30 |         0 |    32 | True      |\n| 9d536959-dd7a-4532-b0b7-db8bb8a72ddb | compute1.8cpu16ram      |  16384 |   30 |         0 |     8 | True      |\n| b46e184c-0dcb-44b2-a53f-c2b8eff676c9 | compute1.32cpu64ram     |  65536 |   30 |         0 |    32 | True      |\n| d6e3a25a-4f9e-4c87-9342-77f807ead537 | memory1.8cpu32ram       |  32768 |   30 |         0 |     8 | True      |\n| e07cfee1-43af-4bf6-baac-3bdf7c1b88f8 | balanced1.4cpu8ram      |   8192 |   30 |         0 |     4 | True      |\n| e3a1ec6d-9513-4b9f-9580-671c4eee1c21 | devtest1.2cpu2ram       |   2048 |   30 |         0 |     2 | True      |\n| ee55c523-9803-4296-91be-1c34e986baaa | devtest1.1cpu1ram       |   1024 |   30 |         0 |     1 | True      |\n+--------------------------------------+-------------------------+--------+------+-----------+-------+-----------+\n</code></pre> <p>Take note of the <code>Flavor ID</code></p> <p>Note</p> <p>For this example we will resize to balanced1.2cpu4ram with an id of <code>6b2e76a8-cce0-4175-8160-76e2525d3d3d</code></p> <p>Taking the Instance ID and Flavor ID we will add those to the following command</p> <pre><code>openstack server resize --flavor &lt;FLAVOUR_ID&gt; &lt;INSTANCE_ID&gt;\n</code></pre> <p>Using our example values the command will look like this</p> <pre><code>openstack server resize --flavor 6b2e76a8-cce0-4175-8160-76e2525d3d3d 6a91e5a1-cf20-4fc5-9b7c-edc2bf1b8de4\n</code></pre> <p>You will not get a response from the endpoint on success</p> <p>So you will want to run the following command to see when its in the state of <code>verify_resize</code></p> <pre><code>openstack server show &lt;INSTANCE_ID&gt;\n</code></pre> <p>This will return the server details and there will be the status</p> <pre><code>| status                              | VERIFY_RESIZE\n</code></pre> <p>You will then need to run the command below to verify the resize</p> <pre><code>openstack server resize confirm &lt;INSTANCE_ID&gt;\n</code></pre> <p>Using the example values the command will be the following</p> <pre><code>openstack server resize confirm 6a91e5a1-cf20-4fc5-9b7c-edc2bf1b8de4\n</code></pre> <p>Again there wont be a response from the endpoint so we will call the command <code>openstack server show</code> again to confirm the status of the instance</p> <pre><code>openstack server show &lt;INSTANCE_ID&gt;\n</code></pre> <p>The status of the instance should now be <code>ACTIVE</code></p> <pre><code>| status                              | ACTIVE\n</code></pre> <p>You should also see the new <code>flavor</code> that the instance has been resized too</p> <pre><code>| flavor                              | balanced1.2cpu4ram (balanced1.2cpu4ram)\n</code></pre>"},{"location":"user-guides/launch-and-mange-instances/resizing-an-Instance-via-the-dashboard/","title":"Resizing an Instance via the Dashboard","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select <code>Instances</code> then select the compute instance you want to resize.</p> <p>Under the <code>Actions</code> menu on the far right, select <code>Resize Instance</code></p> <p></p> <p>Within the <code>Resize Instance</code> dialog, under the <code>Flavor Choice</code> tab you have the following options</p> <code>Old Flavor</code> This is the flavor your compute instance is currently <code>New Flavor</code> This is the flavor you would like to resize your compute instance too. <p></p> <p>Under the Advanced Options tab </p> <code>Disk Partition</code> The Default is Automatic if you don't want the disk to resize upon resize then select Manual.  <p>Note</p> <p>The disk will resize if you booted from image and the image is bigger or smaller then the current one you are running. By default flavors have a disk size of 30 GB and that will generally stay at the same size</p> <p>Click <code>Resize</code></p> <p>After a few moments you will be asked to confirm the Resize</p> <p></p> <p>Under the <code>Actions</code> menu click <code>Confirm Resize/Migrate</code> to confirm and complete the resize.</p> <p>Note</p> <p>A resize will result in the compute instance being shutdown and rebooted in the new flavor</p>"},{"location":"user-guides/launch-and-mange-instances/summary/","title":"Summary","text":"<ul> <li>Compute: Create and Manage</li> <li>With the Dashboard<ul> <li>Launch an Instance</li> <li>Resizing an Instance</li> <li>Manage Security Groups of an Instance</li> </ul> </li> <li>With the CLI<ul> <li>Gather details to launch an Instance</li> <li>Launch an Instance from an Image</li> <li>Launch an Instance from a Volume</li> <li>Risizing an Instance</li> <li>Manage Security Groups of an Instance</li> </ul> </li> <li>Other Tools<ul> <li>Deploy with Terraform</li> </ul> </li> <li>Connecting to your instance with SSH</li> <li>Default user for images</li> </ul>"},{"location":"user-guides/setting-up-your-CLI-environment/","title":"Set up your CLI environment","text":""},{"location":"user-guides/setting-up-your-CLI-environment/#linux-or-mac-os-cli","title":"Linux or Mac OS CLI","text":"<p>Note</p> <p>Python 3+ is recommended for all commands in this article</p>"},{"location":"user-guides/setting-up-your-CLI-environment/#installation-on-linux-and-mac","title":"Installation on Linux and Mac","text":"<p>When installing the CLI using pip, it is recommended to use a python virtual environment to contain the required dependencies. The examples below all make reference to the use of a virtual environment.</p> <p>Operating system specific steps Here is an outline for installing the Openstack command line tools on the common Linux/Unix based systems. This includes MacOS as it runs a BSD based system.</p> Ubuntu 20.04MacOSCentos 8MacOS - python3 <pre><code># Make sure the package cache is up to date and ensure you have\n# Python3 installed\nsudo apt update\nsudo apt install -y python3-venv python3-dev\n\n# create a virtual environment using the Python3 virtual environment module\npython3 -m venv venv\n\n# activate the virtual environment\nsource venv/bin/activate\n\n# install the Openstack commandline tools into the virtual environment\npip install -U pip \\\nwheel \\\npython-openstackclient\n</code></pre> <pre><code># from a terminal session install virtualenv\nsudo pip install virtualenv\n\n# if the above fails and your on python 2.x then run\nsudo easy_install pip\nsudo pip install virtualenv\n\n# Create a new virtual environment and activate it\nvirtualenv venv\nsource venv/bin/activate\n\n# Install the Python openstack client libraries into your virtual environment\n        pip install -U pip \\\npython-openstackclient\n</code></pre> <pre><code># Make sure the package cache is up to date and ensure you have\n# Python3 installed\nsudo yum update -y\nsudo yum install -y python3\n\n# create a virtual environment using the Python3 virtual environment module\npython3 -m venv venv\n\n# activate the virtual environment\nsource venv/bin/activate\n\n# install the Openstack commandline tools into the virtual environment\npip install -U pip \\\npython-openstackclient\n</code></pre> <pre><code># Create a new virtual environment and activate it\npython -m venv venv-openstackcli\nsource venv-openstackcli/bin/activate\n\n# Install the Python openstack client libraries into your virtual environment\npip install -U python-openstackclient\n</code></pre>"},{"location":"user-guides/setting-up-your-CLI-environment/#upgrading-the-cli","title":"Upgrading the CLI","text":"<p>To keep the command line tools up to date, you will need to perform upgrades on them after changes have come out. The following code snippet will upgrade all of the tools listed above; make sure that you have activated your virtual environment before running the command below:</p> <pre><code>pip install --upgrade pip \\\npython-openstackclient\n</code></pre>"},{"location":"user-guides/setting-up-your-CLI-environment/#additional-cli-tools","title":"Additional CLI tools","text":"<p>Should you be moving into more advance projects that require the reader to interact with other parts of FlexiHPC then the following tools will need to be installed</p>"},{"location":"user-guides/setting-up-your-CLI-environment/#kubernetes-cli-tools","title":"Kubernetes CLI Tools","text":"<p>Note</p> <p>If installing the Networking or HOT templating CLI tools then you want need to install either of the following tools python-heatclient or python-neutronclient</p> <pre><code>pip install -U pip \\\npython-heatclient \\\npython-neutronclient \\\npython-octaviaclient \\\npython-magnumclient\n</code></pre>"},{"location":"user-guides/setting-up-your-CLI-environment/#networking-cli-tools","title":"Networking CLI Tools","text":"<p>Note</p> <p>If installing the Kubernetes CLI tools this is included</p> <pre><code>pip install -U pip \\\npython-neutronclient\n</code></pre>"},{"location":"user-guides/setting-up-your-CLI-environment/#hot-templating-cli-tools","title":"HOT Templating CLI Tools","text":"<p>Note</p> <p>If installing the Kubernetes CLI tools this is included</p> <pre><code>pip install -U pip \\\npython-heatclient\n</code></pre>"},{"location":"user-guides/setting-up-your-CLI-environment/#object-storage-cli-tools","title":"Object Storage CLI Tools","text":"<pre><code>pip install -U pip \\\npython-swiftclient\n</code></pre>"},{"location":"user-guides/setting-up-your-CLI-environment/#configuration-on-linux-and-mac","title":"Configuration on Linux and Mac","text":""},{"location":"user-guides/setting-up-your-CLI-environment/#source-an-openstack-rc-file","title":"Source an openstack RC file","text":"<p>When no configuration arguments are passed, the OpenStack client tools will try to obtain their configuration from environment variables. To help you define these variables, the cloud dashboard allows you to download an OpenStack RC file from which you can easily source the required configuration.</p> <p>To download an OpenStack RC file from the dashboard:</p> <ul> <li>Log in to the FlexiHPC dashboard and select your project.</li> <li>From the left hand menu select \u201cAPI Access\u201d and click on \u201cDownload OpenStack RC File\u201d. Save the \u201cOpenStack RC File\u201d file on to the host where the client tools are going to be used from.</li> <li>Source the configuration from the OpenStack RC file: <pre><code>source projectname-openrc.sh\n</code></pre></li> <li>When prompted for a password, enter the password of the user who downloaded the file. Note that your password is not displayed on the screen as you type it in.</li> </ul> <p>Warning</p> <p>You should never type in your password on the command line (or pass it as an argument to the client tools), because the password will be stored in plain text in the shell history file. This is unsafe and could allow a potential attacker to compromise your credentials.</p> <ul> <li>You can confirm the configuration works by running a simple command, such as <code>openstack network list</code> and ensuring it returns no errors.</li> </ul> <p>Note</p> <p>You are also able to download the Openstack RC file from the top-right corner where your login details are display as shown below:  </p>"},{"location":"user-guides/setting-up-your-CLI-environment/#using-the-cli-on-linux-and-mac","title":"Using the CLI on Linux and Mac","text":"<p>This page assumes that you have installed the python virtual environment and other dependencies from earlier in this section of the documentation. If you have, then the following should make sense. </p> <ol> <li>Activate your virtual environment.</li> <li>Source an openstack RC file</li> <li>Invoke the CLI with the openstack command</li> </ol> <p>For a reference of all commands supported by the CLI, refer to the OpenStack Client documentation.</p>"},{"location":"user-guides/uploading-and-managing-Images/","title":"Uploading and Managing Images","text":"<p>FlexiHPC supplies many OS images within the Platform. However should you require a specific version for an OS there is the ability to upload that image to the Flexi HPC platform.</p> <p>The two ways to add an image are as follows:</p> <ul> <li> <p>Upload an Image via the Dashboard</p> </li> <li> <p>Upload an Image via CLI</p> </li> </ul> <p>When managing images within the FlexiHPC platform we have the same options either via the dashboard or the cli</p> <ul> <li> <p>Managing Images via the Dashboard</p> </li> <li> <p>Managing Images via CLI</p> </li> </ul>"},{"location":"user-guides/uploading-and-managing-Images/converting_image-types/","title":"Converting Image types","text":"<p>Note</p> <p>The following commands are generally run from the CLI, you dont need the Openstack CLI to complete these tasks just ensure you have <code>qemu-img</code> pakcage installed</p> <p>Converting images from one format to another is generally straightforward and can be done from a single simple command</p> <p>The <code>qemu-img convert</code> command can do conversion between multiple formats, including qcow2, qed, raw, vdi, vhd, and vmdk.</p> <p>qemu-img format strings:</p> Image Format Argument to qemu-img QCOW2 (KVM, Xen) <code>qcow2</code> QED (KVM) <code>qed</code> raw <code>raw</code> VDI (VirtualBox) <code>vdi</code> VHD (Hyper-V) <code>vpc</code> VMDK (VMware) <code>vmdk</code> <p>Note</p> <p>The main formats used in the RDC are either <code>RAW</code> or <code>QCOW2</code></p> <p>The following command example will convert a raw image file named <code>image.img</code> to a <code>qcow2</code> image file, the <code>-f</code> specifies the first image format and the <code>-O</code> specifies the output format</p> <pre><code>qemu-img convert -f raw -O qcow2 image.img image.qcow2\n</code></pre> <p>The following command example will convert a vmdk image file to a raw image file</p> <pre><code>qemu-img convert -f vmdk -O raw image.vmdk image.img\n</code></pre> <p>The following command example will convert a vmdk image file to a qcow2 image file</p> <pre><code>qemu-img convert -f vmdk -O qcow2 image.vmdk image.qcow2\n</code></pre> <p>Note</p> <p>The <code>-f format</code> flag is optional. If omitted, qemu-img will try to infer the image format.</p> <p>When converting an image file with Windows, ensure the virtio driver is installed. Otherwise, you will get a blue screen when launching the image due to lack of the virtio driver. Another option is to set the image properties as below when you update the image in the Image service to avoid this issue, but it will reduce virtual machine performance significantly.</p> <pre><code>openstack image set --property hw_disk_bus='ide' image_name_or_id\n</code></pre>"},{"location":"user-guides/uploading-and-managing-Images/image-filter/","title":"Image Visibility Types","text":"<p>The NeSI Research Developer Cloud has different image tags that are broken down in the following way</p> <code>Public</code> <p>These images are built and mantained by NeSI, the nameing format is generally <code>NeSI-FlexiHPC-*</code> which is then appened with the OS flavor.</p> <p>For example <code>NeSI-FlexiHPC-Ubuntu-Jammy_22.04</code></p> <code>Private</code> These are images built and uploaded by the project you are in. Think of these as your images that you have created and uploaded to the Research Developer Cloud <code>Shared with Project</code> These are images that are shared from another project to your project. <code>Community</code> These are images upload by the community/other cloud users that are looking to share their images with the wider Research Cloud users"},{"location":"user-guides/uploading-and-managing-Images/managing-images-via-cli/","title":"Upload an Image via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p>"},{"location":"user-guides/uploading-and-managing-Images/managing-images-via-cli/#list-images","title":"List images","text":"<p>You are able to list the images that you have uploaded to the FlexiHPC platform using the command <code>openstack image list --&lt;private/shared&gt;</code></p> <pre><code>openstack image list --private\n</code></pre> <pre><code>+--------------------------------------+------------------------+--------+\n| ID                                   | Name                   | Status |\n+--------------------------------------+------------------------+--------+\n| 64dead14-9c5a-41c3-b4d6-a122a2ca8f28 | linux-test-snapshot    | active |\n| d479470d-ab6d-40d6-afc9-04f5f253404d | linux-test-to-boot-2   | active |\n| 40ed5c78-c970-4182-a9c8-27e18a6a4251 | linux-test-to-boot-cli | active |\n| 5a8e5595-d893-4d1c-8600-d7982f3915bb | ood-keycloak-1         | active |\n| 04e1a31a-adee-4af2-935e-0e6e7c4b3193 | test-break             | active |\n+--------------------------------------+------------------------+--------+\n</code></pre> <pre><code>openstack image list --shared\n</code></pre> <pre><code>+--------------------------------------+------------------------------+--------+\n| ID                                   | Name                         | Status |\n+--------------------------------------+------------------------------+--------+\n| 2282be79-1b79-434b-9974-162b533dab00 | Ubuntu-22.10-Wiki-Test       | active |\n| 1a0480d1-55c8-4fd7-8c7a-8c26e52d8cbd | ubuntu-jammy-server-cloudimg | active |\n+--------------------------------------+------------------------------+--------+\n</code></pre> <p>Adding <code>--long</code> to either command will present more information regarding the image</p> <pre><code>openstack image list --shared --long\n</code></pre> <pre><code>+--------------------------------------+------------------------------+-------------+------------------+-----------+----------------------------------+--------+------------+-----------+----------------------------------+------+\n| ID                                   | Name                         | Disk Format | Container Format |      Size | Checksum                         | Status | Visibility | Protected | Project                          | Tags |\n+--------------------------------------+------------------------------+-------------+------------------+-----------+----------------------------------+--------+------------+-----------+----------------------------------+------+\n| 2282be79-1b79-434b-9974-162b533dab00 | Ubuntu-22.10-Wiki-Test       | raw         | bare             | 740491264 | 91c3094a3ff142ce651034d41aa860c3 | active | shared     | False     | 4f07cc254d6c4471805d49bae1f739b9 |      |\n| 1a0480d1-55c8-4fd7-8c7a-8c26e52d8cbd | ubuntu-jammy-server-cloudimg | qcow2       | bare             | 688193536 | e05c516fa30cf6c0fd47930449b85ac7 | active | shared     | False     | 4f07cc254d6c4471805d49bae1f739b9 |      |\n+--------------------------------------+------------------------------+-------------+------------------+-----------+----------------------------------+--------+------------+-----------+----------------------------------+------+\n</code></pre>"},{"location":"user-guides/uploading-and-managing-Images/managing-images-via-cli/#updating-an-image","title":"Updating an image","text":"<p>If you need to modify the image details or metadata, the general practice is to create a new image with the desired changes rather than directly editing the existing one. After creating the new image, you can delete the old image if it's no longer needed.</p> <p>If you need to update an Image this can be done via the Dashboard</p>"},{"location":"user-guides/uploading-and-managing-Images/managing-images-via-cli/#deleting-an-image","title":"Deleting an image","text":"<p>Using the same command <code>openstack image list --&lt;private/shared&gt;</code> get the <code>image id</code> as you will need to supply that to the following command</p> <pre><code>openstack image delete image_id\n</code></pre> <p>Info</p> <p>Deleting an image that has been used to create a compute instance will fail until that instance has been deleted</p>"},{"location":"user-guides/uploading-and-managing-Images/managing-images-via-the-dashboard/","title":"Upload an Image via the Dashboard","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select <code>Images</code></p> <p>You should see a list of all images available for your project. You can use the filter to see images that are <code>public</code>,<code>private</code>,<code>shared</code> or <code>community</code></p> <p>Images that are <code>public</code> are uploaded and configured by the FlexiHPC team.</p> <p>Images that are specific to your project are either <code>private</code> or <code>shared</code></p>"},{"location":"user-guides/uploading-and-managing-Images/managing-images-via-the-dashboard/#updating-an-image","title":"Updating an Image","text":"<p>Note</p> <p>If you need to modify the image details or metadata, the general practice is to create a new image with the desired changes rather than directly editing the existing one. After creating the new image, you can delete the old image if it's no longer needed.</p> <p>Find the image you would like to update and then click the down arrow at the end of the image row and select <code>Edit Image</code></p> <p>Within the <code>Edit Image</code> dialog you are able to change the following items</p> <p>Image Details</p> <code>Image Name</code> <p>Note</p> When changing this property be very careful as some ones code or CLI based deployment could be targeting this property. We normally say use Image ID\u2019s when using any CLI or code based deployments to avoid this issue as Image ID\u2019s are GUID\u2019s <p><code>Image Description</code></p> <p>Image Requirements</p> <p>Nothing in here should be changed or updated.</p> <p>Image Sharing</p> <code>Visibility</code> This can be changed at anytime <code>Protected</code> This can be changed at anytime <p>Click on <code>Update Image</code> to apply any changes made to the image.</p>"},{"location":"user-guides/uploading-and-managing-Images/managing-images-via-the-dashboard/#deleting-an-image","title":"Deleting an Image","text":"<p>Find the image you would like to delete and then click the down arrow at the end of the image row and select <code>Delete Image</code></p> <p>A <code>Confirm Delete Image</code> dialog will appear explaining what image you have selected to delete.</p> <p>Warning</p> <p>Deleting images is a non-recoverable exercise proceed with caution</p> <p>If you are happy to proceed then click <code>Delete Image</code></p> <p>The image will then be deleted from the project and underlying storage.</p>"},{"location":"user-guides/uploading-and-managing-Images/summary/","title":"Summary","text":"<ul> <li>Images: Upload and Manage</li> <li>With the Dashboard<ul> <li>Upload Image</li> <li>Managing Images</li> </ul> </li> <li>With the CLI<ul> <li>Upload Image</li> <li>Managing Images</li> </ul> </li> <li>Converting Images</li> <li>Image Visibility Types</li> </ul>"},{"location":"user-guides/uploading-and-managing-Images/upload-an-image-via-cli/","title":"Upload an Image via CLI","text":"<p>Note</p> <p>The openstack CLI will need to be setup to interact with the FlexiHPC system. Please read Setting up your CLI environment to interact with FlexiHPC to get started.</p> <p>To upload an image to FlexiHPC we will be using the command <code>openstack image create</code> to upload the image.</p> <p>Using Ubuntu as an example, we will upload a new Ubuntu 22.10 (kinetic) image. Heading to the Ubuntu cloud images link for Kinetic images we want to select the image that has the description <code>QCow2 UEFI/GPT Bootable disk image with linux-kvm KVM optimised kernel</code> </p> <p>With that download and accessible from your CLI we can upload it to FlexiHPC</p> <pre><code>openstack image create --file /path/to/your/image-file --disk-format disk_format --container-format container_format image_name\n</code></pre> <p>Replace the placeholders with the appropriate values depending on your environment:</p> <code>/path/to/your/image-file</code> The local path to the image file you want to upload. <code>disk_format</code> The format of the image on disk, e.g., qcow2, raw, vhd, vmdk, etc. If your unsure then set the format to qcow2 <p>Note</p> <p>When it comes to the different image formats we generally follow the very basic guideline for them.</p> <p>Images in the <code>QCOW2</code> format are for running a single compute instance.</p> <p>Images in the <code>RAW</code> format are for running multiple compute instances.</p> <p>If you wish to convert to another format please read Converting Images between formats</p> <code>container_format</code> The format of the container for the image, e.g., bare, ovf, aki (kernel image), etc. If you are unsure here then set the format to bare <code>image_name</code> The name you want to give to the uploaded image. <p>If we run the command with the supplied settings</p> <pre><code>openstack image create --file ~/openstackcli/iso/kinetic-server-cloudimg-amd64-disk-kvm.img --disk-format qcow2 --container-format bare Ubuntu-22.10-Wiki-Test\n</code></pre> <p>The command window will process silently as it uploads it to the FlexiHPC platform. We should then get a response from the FlexiHPC Platform</p> <pre><code>+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Field            | Value                                                                                                                                                                      |\n+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| container_format | bare                                                                                                                                                                       |\n| created_at       | 2023-08-01T02:55:50Z                                                                                                                                                       |\n| disk_format      | qcow2                                                                                                                                                                      |\n| file             | /v2/images/1276db65-e5de-4721-b2db-666a73929b3e/file                                                                                                                       |\n| id               | 1276db65-e5de-4721-b2db-666a73929b3e                                                                                                                                       |\n| min_disk         | 0                                                                                                                                                                          |\n| min_ram          | 0                                                                                                                                                                          |\n| name             | Ubuntu-22.10-Wiki-Test                                                                                                                                                     |\n| owner            | 4f07cc254d6c4471805d49bae1f739b9                                                                                                                                           |\n| properties       | locations='[]', os_hidden='False', owner_specified.openstack.md5='', owner_specified.openstack.object='images/Ubuntu-22.10-Wiki-Test', owner_specified.openstack.sha256='' |\n| protected        | False                                                                                                                                                                      |\n| schema           | /v2/schemas/image                                                                                                                                                          |\n| status           | queued                                                                                                                                                                     |\n| tags             |                                                                                                                                                                            |\n| updated_at       | 2023-08-01T02:55:50Z                                                                                                                                                       |\n| visibility       | shared                                                                                                                                                                     |\n+------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre> <p>Note</p> <p>Adding <code>--wait</code> to the end of the command will give you a progress bar rather then returning with the status <code>queued</code></p> <p>We should then be able to use the <code>id</code> returned to launch an instance from either the Dashboard or the CLI</p>"},{"location":"user-guides/uploading-and-managing-Images/upload-an-image-via-the-dashboard/","title":"Upload an Image via the Dashboard","text":"<p>Log into the NeSI FlexiHPC Dashboard</p> <p>Select the project you would like to deploy the new instance too (Use the project selector on the top left-hand side):</p> <p></p> <p>Open the <code>Project</code> tab, open the <code>Compute</code> tab and select <code>Images</code></p> <p>Click <code>Create Image</code></p> <p>Within the <code>Create Image</code> dialog box there are the following values:</p> <p>Image Details</p> <code>Image Name</code> A friendly name for your image <code>Image Description</code> A description for your image <p>Image Source</p> <code>File</code> The location on your machine where the image is located <code>Format</code> <ul> <li>ISO - Optical Disk Image</li> <li>PLOOP - Virtuozzo/Parallels Loopback Disk</li> <li>QCOW2 - QEMU Emulator</li> <li>RAW</li> <li>VDI - Virtual Disk Image</li> <li>VHD - Virtual Hard Disk</li> <li>VMDK - Virtual Machine Disk</li> <li>AKI - Amazon Kernel Image</li> <li>AMI - Amazon Machine Image</li> <li>ARI - Amazon Ramdisk Image</li> </ul> <p>Generally the image you downloaded will have its Format in the name/file extension, An example would be kinetic-server-cloudimg-amd64.vmdk which has the vmdk extension. If it doesn't specify the format in the name assume qcow2</p> <p>Note</p> <p>When it comes to the different image formats we generally follow the very basic guideline for them.</p> <p>Images in the <code>QCOW2</code> format are for running a single compute instance.</p> <p>Images in the <code>RAW</code> format are for running multiple compute instances.</p> <p>If you wish to convert to another format please read Converting Images between formats</p> <p>Image Requirements</p> <p>The following settings can remain blank as they are not needed to upload an image to the FlexiHPC platform.</p> <p>Image Sharing</p> <code>Visibility</code> We have the options of Private,Shared or Community. If you don't want anyone else outside your project to use/see the new image then select private, however if you want this to be shared with other projects we would select either Shared or Community <code>Protected</code> This setting allows the image to be protected from deletion. <p>Once we have filled out the required fields we can click <code>Create Image</code>, the FlexiHPC platform will then process and save the image to the underlying CEPHS file system.</p>"}]}